function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/vendor-C6HH6XaD.js","assets/react-D6L5wY80.js","assets/polyfills-Dd_fLbm1.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var cl=Object.defineProperty;var ll=(s,t,e)=>t in s?cl(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var p=(s,t,e)=>(ll(s,typeof t!="symbol"?t+"":t,e),e);import{j as n,r as h,a as dl,R as ul,b as Ne,c as ml}from"./react-D6L5wY80.js";import{C as hl,c as pl,s as fl,i as br,p as gl,a as ve,b as Ks,d as ce,e as F,g as In,h as nt,j as An,k as Ss,l as we,m as Hi,n as _l,o as yl,q as vl,r as Sa,t as xl,B as wl,u as Ui,v as bl,Q as jl,w as Sl,x as A,y as B,z as Cl,A as Pl,D as kl,E as El,F as en,N as Wi,V as Ca,G as le,H as ue,I as Ye,J as Nl,P as it,K as he,L as tn,M as Ue,O as Or,R as Dr,S as Il,T as jr,U as Vi,W as Fr,X as zt,Y as _t,Z as Al,_ as Vt,$ as qi,a0 as ze,a1 as Ll,a2 as zi,a3 as Tl,a4 as Gi,a5 as $l,a6 as Ol,a7 as Dl,a8 as Fl,a9 as Ml,aa as Bl,ab as Rl,ac as Hl,ad as Ul,ae as Wl,af as Vl,ag as Pa,ah as Ji,ai as ql}from"./vendor-C6HH6XaD.js";import{I as Z}from"./inplayer-C3cpXjh-.js";import"./index-knuSdpEX.js";import"./polyfills-Dd_fLbm1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var oS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}const zl="modulepreload",Gl=function(s){return"/"+s},ka={},Yi=function(t,e,r){let a=Promise.resolve();if(e&&e.length>0){const o=document.getElementsByTagName("link");a=Promise.all(e.map(i=>{if(i=Gl(i),i in ka)return;ka[i]=!0;const c=i.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!r)for(let m=o.length-1;m>=0;m--){const g=o[m];if(g.href===i&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":zl,c||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),c)return new Promise((m,g)=>{u.addEventListener("load",m),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${i}`)))})}))}return a.then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};function Jl(s={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:r,onRegistered:a,onRegisteredSW:o,onRegisterError:i}=s;let c,l;const d=async(m=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(c=await Yi(()=>import("./vendor-C6HH6XaD.js").then(m=>m.aj),__vite__mapDeps([0,1,2])).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{i==null||i(m)}),!c)return;c.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),c.addEventListener("installed",m=>{m.isUpdate||r==null||r()}),c.register({immediate:t}).then(m=>{o?o("/sw.js",m):a==null||a(m)}).catch(m=>{i==null||i(m)})}}return l=u(),d}const ne={APP_VERSION:"",APP_API_BASE_URL:"https://cdn.jwplayer.com",APP_PLAYER_ID:"M4qoGvUk",APP_FOOTER_TEXT:"",APP_DEFAULT_LANGUAGE:"en"},Yl=s=>{ne.APP_VERSION=s.APP_VERSION||ne.APP_VERSION,ne.APP_API_BASE_URL=s.APP_API_BASE_URL||ne.APP_API_BASE_URL,ne.APP_PLAYER_ID=s.APP_PLAYER_ID||ne.APP_PLAYER_ID,ne.APP_FOOTER_TEXT=s.APP_FOOTER_TEXT||ne.APP_FOOTER_TEXT,ne.APP_DEFAULT_LANGUAGE=s.APP_DEFAULT_LANGUAGE||ne.APP_DEFAULT_LANGUAGE,ne.APP_DEFAULT_CONFIG_SOURCE||(ne.APP_DEFAULT_CONFIG_SOURCE=s.APP_DEFAULT_CONFIG_SOURCE),ne.APP_PLAYER_LICENSE_KEY||(ne.APP_PLAYER_LICENSE_KEY=s.APP_PLAYER_LICENSE_KEY),ne.APP_BODY_FONT=s.APP_BODY_FONT||ne.APP_BODY_FONT,ne.APP_BODY_ALT_FONT=s.APP_BODY_ALT_FONT||ne.APP_BODY_ALT_FONT};var lt=(s=>(s.ContinueWatching="continue_watching",s.Favorites="favorites",s))(lt||{});const Kl=["favorites","continue_watching"],At={JWP:"JWP",CLEENG:"CLEENG"},Me={AVOD:"AVOD",AUTHVOD:"AUTHVOD",SVOD:"SVOD"},Wt={Min:.05,Max:.95},Ql=25,Ki="test_I4OFGUUCEVB5TI222AS3N2Y2LY6PJM3K",Qi="live_BQDOFBYTGZB3XKF62GBYSLPUJ4YW2TPL",Zl=15*6e4,dt={series:"series",episode:"episode",live:"live",liveChannel:"livechannel",liveEvent:"liveevent",page:"page",hub:"hub"},Sr="M4qoGvUk",Gs="app-config",mn="config-file-override",ks=60*1e3*20,Es=60*1e3*20,Xl=["1:1","2:1","2:3","4:3","5:3","16:9","9:13","9:16"],Mr=48,ed={canUpdateEmail:!1,canSupportEmptyFullName:!1,canChangePasswordWithOldPassword:!1,canRenewSubscription:!1,canExportAccountData:!1,canDeleteAccount:!1,canUpdatePaymentMethod:!1,canShowReceipts:!1,hasSocialURLs:!1,hasNotifications:!1,watchListSizeLimit:Mr},Br={jwp:"jwp",viewNexa:"viewnexa"};function td(s,t=200){let e;return(...r)=>{e&&clearTimeout(e),e=setTimeout(()=>s(...r),t)}}function sd(s,t){let e,r;return function(...a){const o=r?Date.now()-r:t;o>=t?(s.apply(this,a),r=Date.now()):e||(e=setTimeout(()=>{r&&Date.now()-r>=t&&(s.apply(this,a),r=Date.now()),e=void 0},t-o))}}const nd=s=>s.replace(/\\u[\dA-F]{4}/gi,t=>String.fromCharCode(parseInt(t.replace(/\\u/g,""),16)));function rd(s){if(s.indexOf("#")===0&&(s=s.slice(1)),s.length===3&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]),s.length===6)return{r:parseInt(s.slice(0,2),16),g:parseInt(s.slice(2,4),16),b:parseInt(s.slice(4,6),16)}}function Gn(s){const t=rd(s);return t?t.r*.299+t.g*.587+t.b*.114>186?"#000000":"#FFFFFF":""}const ad=!1,Rr=!1;function Qs(s,...t){}const sn=(s,t)=>{var e;return((e=s.contentType)==null?void 0:e.toLowerCase())===t.toLowerCase()},Gt=s=>{var t;return["true","1","yes","on"].includes((t=String(s))==null?void 0:t.toLowerCase())},od=s=>{var t;return["false","0","no","off"].includes((t=String(s))==null?void 0:t.toLowerCase())};const id=s=>!!s,me=new hl({defaultScope:"Singleton",skipBaseClassChecks:!0});function V(s,t=!0){const e=me.getAll(s)[0];if(t&&!e)throw new Error(`Service / Controller '${String(s)}' not found`);return e}function gt(s,t,e=!0){if(!t)return;let r;try{return r=me.getAllNamed(s,t)[0],r}catch(a){if(a instanceof Error&&a.message.includes("No matching bindings found")){if(e)throw new Error(`Service not found '${String(s)}' with name '${t}'`);return}}}function Ce(s,t){if(!s)throw new Error(t)}function Jn(s,t){if(!s)throw new Error(`${t} feature is not enabled`)}const Ns=Symbol("INTEGRATION_TYPE"),Hr=Symbol("DETERMINE_INTEGRATION_TYPE"),nn=Symbol("GET_CUSTOMER_IP");var Nt=(s=>(s.LIVE="LIVE",s.VOD="VOD",s.SCHEDULED="SCHEDULED",s))(Nt||{});const Zi=s=>!!s&&sn(s,dt.liveEvent),Ur=s=>s.mediaStatus==="SCHEDULED"||s.mediaStatus==="LIVE",cd=s=>{const t=s["VCH.EventState"],{scheduledStart:e,scheduledEnd:r}=s,a=new Date;if((t==="LIVE_PUBLISHED"||e&&e<a)&&r&&r>a)return"LIVE";if(!t)return"VOD";switch(t){case"PRE_LIVE":case"LIVE_UNPUBLISHED":return"SCHEDULED";case"LIVE_PUBLISHED":return"LIVE";case"INSTANT_VOD":case"VOD_PUBLIC":return"VOD"}},ld=s=>s.mediaStatus==="LIVE"||s.mediaStatus==="VOD",Xi="/m/:id/*",Wr="/p/:id/*",dd="/s/:id/*",ud="/q/*",md="/o/about",Is="/u",hd=`${Is}/*`,Js="my-account",Vr="my-profile/:id",Cr="favorites",Pr="payments",pd="profiles",fd=`${Is}/${Js}`,gd=`${Is}/${Vr}`,_d=`${Is}/${Cr}`,yd=`${Is}/${Pr}`,Pn=`${Is}/${pd}`,ec=s=>s?s.seriesPlayListId||s.seriesPlaylistId||s.seriesId:void 0,tc=s=>typeof ec(s)<"u",vd=s=>sn(s,dt.series),sc=s=>tc(s)||vd(s),nc=s=>typeof(s==null?void 0:s.episodeNumber)<"u"||sn(s,dt.episode),xd=s=>{if(!s||!nc(s))return;const e=(s.tags?s.tags.split(","):[]).find(function(r){return/seriesid_([\w\d]+)/i.test(r)});if(e)return e.split("_")[1]},rc=s=>sn(s,dt.liveChannel),Ee=(s,t)=>{const[e,r=""]=s.split("?"),a=new URLSearchParams(r);Object.entries(t).forEach(([i,c])=>{if(c==null)return a.delete(i);const l=Array.isArray(c)?c.join(","):c;a.set(i,String(l))});const o=a.toString();return`${e}${o?`?${o}`:""}`},Ln=(s,t,e)=>{const r=s.split("/").map(a=>{if(a==="*")return t?Object.entries(t).filter(([l])=>!s.includes(l)).map(([l,d])=>d).join("/"):a;if(!a.startsWith(":")||!t)return a;const o=a.endsWith("?"),i=a.replace(":","").replace("?",""),c=t[i];return c||(o||console.warn("Missing param in path creation.",{path:s,paramName:i}),"")}).join("/");return e?Ee(r,e):r},qr=(s,t="-")=>s.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/-/g,t),Fe=({media:s,playlistId:t,play:e=!1,episodeId:r})=>Ln(Xi,{id:s.mediaid,title:qr(s.title)},{r:t,play:e?"1":null,e:r}),ac=(s,t)=>Ln(Wr,{id:s,title:t?qr(t):void 0}),vs=(s,t,e=!1)=>Ln(Wr,{id:s},{channel:t,play:e?"1":null}),wd=(s,t=!1)=>Ln(t?Vr:gd,{id:s}),Zt=({seriesId:s,episodeId:t,play:e,playlistId:r})=>Ee(`/s/${s}`,{r,e:t,play:e?"1":null}),oc=(s,t,e)=>{const r=xd(s),a=ec(s);return Zt({seriesId:a||r||"",play:t,playlistId:e,episodeId:r&&s.mediaid})};class bd extends Error{constructor(e="",r){super(e);p(this,"code");p(this,"message");this.name="ApiError",this.message=e,this.code=r}}const pt=async s=>{const t=await s.json();if(!s.ok){const e=`Request '${s.url}' failed with ${s.status}`,r=t&&typeof t=="object"&&"message"in t&&typeof t.message=="string"?t.message:void 0;throw new bd(r||e,s.status||500)}return t},xs=s=>{var t,e,r,a;return typeof s=="object"&&s!==null&&"response"in s&&typeof((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.code)=="number"&&typeof((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)=="string"},Tn=(s,t,e,r)=>{const a=od(r==null?void 0:r.requiresSubscription)||Gt(r==null?void 0:r.free),o=r==null?void 0:r.mediaOffers;return!(a||s===Me.AVOD&&!o||s===Me.AUTHVOD&&t&&!o||s===Me.SVOD&&e&&!(o!=null&&o.some(i=>i.premier)))},jd=(s,t)=>t?t.replace(/\s/g,"").split(",").reduce((e,r)=>r.indexOf(`${s}:`)===0||r.indexOf(`!${s}:`)===0?[...e,{offerId:r.slice(r.indexOf(":")+1),premier:r[0]==="!"}]:e,[]):null,ts=(s,t)=>{const e=fl(t);return pl(e)},K=ts("ConfigStore",()=>({loaded:!1,config:{id:"",siteName:"",description:"",player:"",siteId:"",assets:{},content:[],menu:[],integrations:{cleeng:{useSandbox:!0},jwp:{clientId:null,assetId:null,useSandbox:!0}},styling:{}},settings:{additionalAllowedConfigSources:[],playerId:Sr},supportedLanguages:[],accessModel:Me.AVOD,integrationType:null}));var Ea,Na;const Ia=20;let He=(Ea=ve(),Ea(Na=class{constructor(){p(this,"generateAlternateImageURL",({item:t,label:e,playlistLabel:r})=>{const a=`/v2/media/${t.mediaid}/images/${r||e}.webp`;return Ee(`${ne.APP_API_BASE_URL}${a}`,{poster_fallback:1,fallback:r?e:null})});p(this,"parseDate",(t,e)=>{const r=t[e];if(r&&!br(new Date(r))){console.error(`Invalid "${e}" date provided for the "${t.title}" media item`);return}return r?gl(r):void 0});p(this,"transformMediaItem",(t,e)=>{const r=K.getState().config,a=Object.keys(r==null?void 0:r.integrations)[0],o=e==null?void 0:e.imageLabel,i={...t,cardImage:this.generateAlternateImageURL({item:t,label:"card",playlistLabel:o}),channelLogoImage:this.generateAlternateImageURL({item:t,label:"channel_logo",playlistLabel:o}),backgroundImage:this.generateAlternateImageURL({item:t,label:"background"}),mediaOffers:t.productIds?jd(a,t.productIds):void 0,scheduledStart:this.parseDate(t,"VCH.ScheduledStart"),scheduledEnd:this.parseDate(t,"VCH.ScheduledEnd")};return i.mediaStatus=cd(i),i});p(this,"transformPlaylist",(t,e)=>(t.playlist=t.playlist.map(r=>this.transformMediaItem(r,t)),e&&t.playlist.filter(r=>r.mediaid!==e),t));p(this,"transformEpisodes",(t,e)=>{const{episodes:r,page:a,page_limit:o,total:i}=t;return{episodes:r.filter(c=>c.media_item).map(c=>{var l;return{...this.transformMediaItem(c.media_item),seasonNumber:(e==null?void 0:e.toString())||((l=c.season_number)==null?void 0:l.toString())||"",episodeNumber:String(c.episode_number)}}),pagination:{page:a,page_limit:o,total:i}}});p(this,"getPlaylistById",async(t,e={})=>{if(!t)return;const r=`/v2/playlists/${t}`,a=Ee(`${ne.APP_API_BASE_URL}${r}`,e),o=await fetch(a),i=await pt(o);return this.transformPlaylist(i,e.related_media_id)});p(this,"getMediaByWatchlist",async(t,e,r)=>{if(!(e!=null&&e.length))return[];const a=`/apps/watchlists/${t}`,o=Ee(`${ne.APP_API_BASE_URL}${a}`,{token:r,media_ids:e}),i=await fetch(o),c=await pt(i);if(!c)throw new Error(`The data was not found using the watchlist ${t}`);return(c.playlist||[]).map(l=>this.transformMediaItem(l))});p(this,"getMediaById",async(t,e,r)=>{const a=r?`/v2/media/${t}/drm/${r}`:`/v2/media/${t}`,o=Ee(`${ne.APP_API_BASE_URL}${a}`,{token:e}),i=await fetch(o),l=(await pt(i)).playlist[0];if(!l)throw new Error("MediaItem not found");return this.transformMediaItem(l)});p(this,"getSeries",async(t,e={})=>{if(!t)throw new Error("Series ID is required");const r=`/apps/series/${t}`,a=Ee(`${ne.APP_API_BASE_URL}${r}`,e),o=await fetch(a);return await pt(o)});p(this,"getSeriesByMediaIds",async t=>{const r=`${ne.APP_API_BASE_URL}/apps/series?media_ids=${t.join(",")}`,a=await fetch(r);return await pt(a)});p(this,"getEpisodes",async({seriesId:t,pageOffset:e,pageLimit:r=Ia,afterId:a})=>{if(!t)throw new Error("Series ID is required");const o=`/apps/series/${t}/episodes`,i=Ee(`${ne.APP_API_BASE_URL}${o}`,{page_offset:e,page_limit:r,after_id:a}),c=await fetch(i),l=await pt(c);return this.transformEpisodes(l)});p(this,"getSeasonWithEpisodes",async({seriesId:t,seasonNumber:e,pageOffset:r,pageLimit:a=Ia})=>{if(!t)throw new Error("Series ID is required");const o=`/apps/series/${t}/seasons/${e}/episodes`,i=Ee(`${ne.APP_API_BASE_URL}${o}`,{page_offset:r,page_limit:a}),c=await fetch(i),l=await pt(c);return this.transformEpisodes(l,e)});p(this,"getAdSchedule",async t=>{if(!t)throw new Error("Ad Schedule ID is required");const e=ne.APP_API_BASE_URL+`/v2/advertising/schedules/${t}.json`,r=await fetch(e,{credentials:"omit"});return await pt(r)});p(this,"getAppContentSearch",async(t,e)=>{const r=`/v2/sites/${t}/app_content/media/search`,a=Ee(`${ne.APP_API_BASE_URL}${r}`,{search_query:e}),o=await fetch(a),i=await pt(o);return this.transformPlaylist(i)})}})||Na);class $e{}class yt{constructor(t){p(this,"features");this.features=t}}var Aa,La,Ta,$a,Lt;const Sd=Ks(ce().shape({mediaid:F(),progress:In()}));let kr=(Aa=ve(),La=function(s,t){return nt(Ns)(s,void 0,0)},Ta=Reflect.metadata("design:type",Function),$a=Reflect.metadata("design:paramtypes",[String,typeof He>"u"?Object:He,typeof $e>"u"?Object:$e]),Aa(Lt=La(Lt=Ta(Lt=$a(Lt=class{constructor(t,e,r){p(this,"PERSIST_KEY_WATCH_HISTORY","history");p(this,"apiService");p(this,"storageService");p(this,"accountService");p(this,"getWatchHistoryItems",async(t,e)=>{const r=await this.apiService.getMediaByWatchlist(t,e);return Object.fromEntries((r||[]).map(o=>[o.mediaid,o]))});p(this,"getWatchHistorySeriesItems",async(t,e)=>{const r=await this.apiService.getSeriesByMediaIds(e),a=Object.keys(r||{}).map(l=>{var d,u;return(u=(d=r==null?void 0:r[l])==null?void 0:d[0])==null?void 0:u.series_id}).filter(Boolean),o=[...new Set(a)],i=await this.apiService.getMediaByWatchlist(t,o);return Object.keys(r||{}).reduce((l,d)=>{var m,g;const u=(g=(m=r==null?void 0:r[d])==null?void 0:m[0])==null?void 0:g.series_id;return u&&(l[d]=i==null?void 0:i.find(_=>_.mediaid===u)),l},{})});p(this,"getWatchHistory",async(t,e)=>{const r=t?await this.getWatchHistoryFromAccount(t):await this.getWatchHistoryFromStorage(),a=r.map(({mediaid:o})=>o);if(!a.length)return[];try{const o=await this.getWatchHistoryItems(e,a),i=await this.getWatchHistorySeriesItems(e,a);return r.map(c=>{const l=i==null?void 0:i[c.mediaid],d=o[c.mediaid];if(d)return this.createWatchHistoryItem(l||d,c.mediaid,l==null?void 0:l.mediaid,c.progress)}).filter(c=>!!c)}catch{}return[]});p(this,"serializeWatchHistory",t=>t.map(({mediaid:e,progress:r})=>({mediaid:e,progress:r})));p(this,"persistWatchHistory",async(t,e)=>{var r;e?await((r=this.accountService)==null?void 0:r.updateWatchHistory({history:this.serializeWatchHistory(t),user:e})):await this.storageService.setItem(this.PERSIST_KEY_WATCH_HISTORY,JSON.stringify(this.serializeWatchHistory(t)))});p(this,"createWatchHistoryItem",(t,e,r,a)=>({mediaid:e,seriesId:r,title:t.title,tags:t.tags,duration:t.duration,progress:a,playlistItem:t}));p(this,"getMaxWatchHistoryCount",()=>{var t,e;return((e=(t=this.accountService)==null?void 0:t.features)==null?void 0:e.watchListSizeLimit)||Mr});p(this,"saveItem",async(t,e,r,a)=>{if(!r)return;const o=this.createWatchHistoryItem(e||t,t.mediaid,e==null?void 0:e.mediaid,r),i=a.filter(({mediaid:c,seriesId:l})=>c!==o.mediaid&&(!l||l!==o.seriesId));return i.unshift(o),i.splice(this.getMaxWatchHistoryCount()),i});this.apiService=e,this.storageService=r,this.accountService=gt(yt,t)}validateWatchHistory(t){return t&&Sd.validateSync(t)?t:[]}async getWatchHistoryFromAccount(t){const e=await this.accountService.getWatchHistory({user:t});return this.validateWatchHistory(e)}async getWatchHistoryFromStorage(){const t=await this.storageService.getItem(this.PERSIST_KEY_WATCH_HISTORY,!0);return this.validateWatchHistory(t)}})||Lt)||Lt)||Lt)||Lt);var Oa,Da;let ic=(Oa=ve(),Oa(Da=class{constructor(){p(this,"getToken",async(t,e={},r)=>await(await fetch(t,{method:"POST",headers:{Authorization:r?`Bearer ${r}`:""},body:JSON.stringify(e)})).json());p(this,"getMediaToken",async(t,e,r,a,o)=>{const i=await this.getToken(`${t}/media/${e}/sign${o?`/drm/${o}`:""}`,a,r);if(!i.entitled)throw new Error("Unauthorized");return i.token})}})||Da);var Fa,Ma;let cc=(Fa=ve(),Fa(Ma=class{constructor(){p(this,"getJWPMediaToken",async(t="",e)=>{try{const{data:r}=await Z.Asset.getSignedMediaToken(t,e);return r.token}catch{throw new Error("Unauthorized")}})}})||Ma);var Ba,Ra,Ha,Ua,Tt;const Cd=Ks(ce().shape({mediaid:F()}));let Er=(Ba=ve(),Ra=function(s,t){return nt(Ns)(s,void 0,0)},Ha=Reflect.metadata("design:type",Function),Ua=Reflect.metadata("design:paramtypes",[String,typeof He>"u"?Object:He,typeof $e>"u"?Object:$e]),Ba(Tt=Ra(Tt=Ha(Tt=Ua(Tt=class{constructor(t,e,r){p(this,"PERSIST_KEY_FAVORITES","favorites");p(this,"apiService");p(this,"storageService");p(this,"accountService");p(this,"getFavorites",async(t,e)=>{const a=(t?await this.getFavoritesFromAccount(t):await this.getFavoritesFromStorage()).map(({mediaid:o})=>o);if(!a)return[];try{return(await this.apiService.getMediaByWatchlist(e,a)||[]).map(i=>this.createFavorite(i))}catch{}return[]});p(this,"serializeFavorites",t=>t.map(({mediaid:e})=>({mediaid:e})));p(this,"persistFavorites",async(t,e)=>{var r;if(e)return(r=this.accountService)==null?void 0:r.updateFavorites({favorites:this.serializeFavorites(t),user:e});await this.storageService.setItem(this.PERSIST_KEY_FAVORITES,JSON.stringify(this.serializeFavorites(t)))});p(this,"getMaxFavoritesCount",()=>{var t,e;return((e=(t=this.accountService)==null?void 0:t.features)==null?void 0:e.watchListSizeLimit)||Mr});p(this,"createFavorite",t=>({mediaid:t.mediaid,title:t.title,tags:t.tags,duration:t.duration,playlistItem:t}));this.apiService=e,this.storageService=r,this.accountService=gt(yt,t,!1)}validateFavorites(t){return t&&Cd.validateSync(t)?t:[]}async getFavoritesFromAccount(t){var r;const e=await((r=this.accountService)==null?void 0:r.getFavorites({user:t}));return this.validateFavorites(e)}async getFavoritesFromStorage(){const t=await this.storageService.getItem(this.PERSIST_KEY_FAVORITES,!0);return this.validateFavorites(t)}})||Tt)||Tt)||Tt)||Tt);const Pd=ce({contentId:F().notRequired(),title:F().notRequired(),featured:An().notRequired(),backgroundColor:F().nullable().notRequired(),type:Ss().oneOf(["playlist","continue_watching","favorites"])}).defined(),kd=ce().shape({label:F().defined(),contentId:F().defined(),filterTags:F().notRequired(),type:Ss().oneOf(["playlist"]).notRequired()}),Ed=ce({recommendationsPlaylist:F().nullable(),searchPlaylist:F().nullable(),continueWatchingList:F().nullable(),favoritesList:F().nullable()}),Nd=ce({id:F().nullable(),monthlyOffer:F().nullable(),yearlyOffer:F().nullable(),useSandbox:An().default(!0)}),Id=ce({clientId:F().nullable(),assetId:In().nullable(),useSandbox:An().default(!0)}),Ad=ce({backgroundColor:F().nullable(),highlightColor:F().nullable(),headerBackground:F().nullable(),footerText:F().nullable()}),Ld=ce({id:F().notRequired(),siteName:F().notRequired(),description:F().defined(),analyticsToken:F().nullable(),adSchedule:F().nullable(),siteId:F().defined(),assets:ce({banner:F().notRequired().nullable()}).notRequired(),content:Ks().of(Pd),menu:Ks().of(kd),styling:Ad.notRequired(),features:Ed.notRequired(),integrations:ce({cleeng:Nd.notRequired(),jwp:Id.notRequired()}).notRequired(),adScheduleUrls:ce({json:F().notRequired().nullable(),xml:F().notRequired().nullable()}).notRequired(),custom:ce().notRequired(),contentSigningService:ce().shape({host:F().required(),drmPolicyId:F().notRequired()}),contentProtection:ce().shape({accessModel:F().oneOf(["free","freeauth","authvod","svod"]).notRequired(),drm:ce({defaultPolicyId:F()}).notRequired()}).notRequired()}).defined();class js extends Error{constructor(e,r){super(e);p(this,"payload");this.name="AppError",this.payload=r}}var Wa,Va,qa,as;let jn=(Wa=ve(),Va=Reflect.metadata("design:type",Function),qa=Reflect.metadata("design:paramtypes",[typeof He>"u"?Object:He]),Wa(as=Va(as=qa(as=class{constructor(t){p(this,"CONFIG_HOST",ne.APP_API_BASE_URL);p(this,"DEFAULT_CONFIG",{id:"",siteName:"",description:"",siteId:"",assets:{banner:"/images/logo.png"},content:[],menu:[],integrations:{},styling:{footerText:""},features:{}});p(this,"apiService");p(this,"enrichConfig",t=>{const{content:e,siteName:r}=t,a=e.map(o=>Object.assign({featured:!1},o));return{...t,siteName:r||we.t("common:default_site_name"),content:a}});p(this,"getDefaultConfig",()=>this.DEFAULT_CONFIG);p(this,"validateConfig",t=>Ld.validate(t,{strict:!0}));p(this,"formatSourceLocation",t=>{if(t)return t.match(/^[a-z,\d]{8}$/)?`${this.CONFIG_HOST}/apps/configs/${t}.json`:t});p(this,"loadAdSchedule",async t=>this.apiService.getAdSchedule(t));p(this,"loadConfig",async t=>{const e=Hi(),r={title:e.t("error:config_invalid"),description:e.t("error:check_your_config"),helpLink:"https://github.com/jwplayer/ott-web-app/blob/develop/docs/configuration.md"};if(!t)throw new js("No config location found",r);const a=await fetch(t,{headers:{Accept:"application/json"},method:"GET"}).catch(()=>{throw new js("Failed to load the config",r)});if(!a.ok)throw new js("Failed to load the config",r);const o=await a.json();if(!o)throw new Error("No config found");return this.enrichConfig(o)});this.apiService=t}})||as)||as)||as);var za,Ga,Ja,os;let Sn=(za=ve(),Ga=Reflect.metadata("design:type",Function),Ja=Reflect.metadata("design:paramtypes",[typeof $e>"u"?Object:$e]),za(os=Ga(os=Ja(os=class{constructor(t){p(this,"storageService");p(this,"isValidConfigSource",(t,e)=>e!=null&&e.UNSAFE_allowAnyConfigSource?!!t:(e==null?void 0:e.defaultConfigSource)===t||(e==null?void 0:e.additionalAllowedConfigSources)&&(e==null?void 0:e.additionalAllowedConfigSources.indexOf(t))>=0);p(this,"initialize",async()=>{var a;const t=await fetch("/.webapp.ini").then(o=>o.text()).then(o=>_l.parse(o)).catch(o=>({})),e=Hi(),r={title:e.t("error:settings_invalid"),description:e.t("error:check_your_settings"),helpLink:"https://github.com/jwplayer/ott-web-app/blob/develop/docs/initialization-file.md"};if(!t)throw new js("Unable to load .webapp.ini",r);if(t.defaultConfigSource||(t.defaultConfigSource=ne.APP_DEFAULT_CONFIG_SOURCE),t.playerId||(t.playerId=ne.APP_PLAYER_ID||Sr),t.playerLicenseKey||(t.playerLicenseKey=ne.APP_PLAYER_LICENSE_KEY),t.playerId===Sr&&!t.playerLicenseKey&&console.warn("Using Global OTT Player without setting player key. Some features, such as analytics, may not work correctly."),!t.defaultConfigSource&&(!t.additionalAllowedConfigSources||((a=t.additionalAllowedConfigSources)==null?void 0:a.length)===0)&&!t.UNSAFE_allowAnyConfigSource)throw new js("No usable config sources",r);return t});this.storageService=t}async getConfigSource(t,e){var i;if(!t)return"";const a=new URLSearchParams(e.split("?")[1]).get(Gs);if(!t.UNSAFE_allowAnyConfigSource&&(((i=t.additionalAllowedConfigSources)==null?void 0:i.length)||0)<=0)return t.defaultConfigSource;if(a!==null){if(!a)return await this.storageService.removeItem(mn),t.defaultConfigSource;if(this.isValidConfigSource(a,t))return await this.storageService.setItem(mn,a),a}const o=await this.storageService.getItem(mn,!1);if(o&&typeof o=="string"){if(this.isValidConfigSource(o,t))return o;await this.storageService.removeItem(mn)}return t.defaultConfigSource}})||os)||os)||os);const M=ts("AccountStore",(s,t)=>({loading:!1,user:null,subscription:null,transactions:null,activePayment:null,customerConsents:null,publisherConsents:null,publisherConsentsLoading:!1,pendingOffer:null,setLoading:e=>s({loading:e}),getAccountInfo:()=>{const e=t().user,r=t().customerConsents;if(!(e!=null&&e.id))throw new Error("user not logged in");return{customerId:e==null?void 0:e.id,customer:e,customerConsents:r}}})),ct=ts("WatchHistoryStore",(s,t)=>({watchHistory:[],playlistItemsLoaded:!1,continueWatchingPlaylistId:lt.ContinueWatching,getItem:e=>t().watchHistory.find(({mediaid:r,progress:a})=>r===e.mediaid&&a>Wt.Min&&a<Wt.Max),getPlaylist:()=>({feedid:t().continueWatchingPlaylistId||lt.ContinueWatching,title:"Continue watching",playlist:t().watchHistory.filter(({playlistItem:e,progress:r})=>!!e&&r>Wt.Min&&r<Wt.Max).map(({playlistItem:e})=>e)}),getDictionaryWithEpisodes:()=>t().watchHistory.reduce((e,r)=>{const a=r.mediaid;return e[a]=r.progress,e},{}),getDictionaryWithSeries:()=>t().watchHistory.reduce((e,r)=>{const a=r.seriesId||r.mediaid;return e[a]=r.progress,e},{})}));var Ya,Ka,Qa,is;let Zs=(Ya=ve(),Ka=Reflect.metadata("design:type",Function),Qa=Reflect.metadata("design:paramtypes",[typeof kr>"u"?Object:kr]),Ya(is=Ka(is=Qa(is=class{constructor(t){p(this,"watchHistoryService");p(this,"initialize",async()=>{await this.restoreWatchHistory()});p(this,"restoreWatchHistory",async()=>{var a;const{user:t}=M.getState(),e=(a=K.getState().config.features)==null?void 0:a.continueWatchingList;if(!e)return;const r=await this.watchHistoryService.getWatchHistory(t,e);ct.setState({watchHistory:r.filter(o=>!!(o!=null&&o.mediaid)),playlistItemsLoaded:!0,continueWatchingPlaylistId:e})});p(this,"persistWatchHistory",async()=>{const{watchHistory:t}=ct.getState(),{user:e}=M.getState();await this.watchHistoryService.persistWatchHistory(t,e)});p(this,"saveItem",async(t,e,r)=>{const{watchHistory:a}=ct.getState();if(!r)return;const o=await this.watchHistoryService.saveItem(t,e,r,a);o&&(ct.setState({watchHistory:o}),await this.persistWatchHistory())});this.watchHistoryService=t}})||is)||is)||is);class As{}class Ls{}const je=ts("CheckoutStore",s=>({requestedMediaOffers:[],mediaOffers:[],subscriptionOffers:[],switchSubscriptionOffers:[],selectedOffer:null,defaultOfferId:null,order:null,paymentMethods:null,setRequestedMediaOffers:t=>s({requestedMediaOffers:t}),setOrder:t=>s({order:t}),setPaymentMethods:t=>s({paymentMethods:t})}));class Je extends Error{constructor(e){super(Object.values(e).flat().join(";"));p(this,"errors");this.errors=e}}const Td=s=>{const t=s==null?void 0:s.period;return t==="month"?"upgrade":t==="year"?"downgrade":"upgrade"};var Za,Xa,eo,to,so,mt;let vt=(Za=ve(),Xa=function(s,t){return nt(Ns)(s,void 0,0)},eo=function(s,t){return nt(nn)(s,void 0,1)},to=Reflect.metadata("design:type",Function),so=Reflect.metadata("design:paramtypes",[typeof IntegrationType>"u"?Object:IntegrationType,typeof GetCustomerIP>"u"?Object:GetCustomerIP]),Za(mt=Xa(mt=eo(mt=to(mt=so(mt=class{constructor(t,e){p(this,"accountService");p(this,"checkoutService");p(this,"subscriptionService");p(this,"getCustomerIP");p(this,"initialiseOffers",async()=>{const t=je.getState().requestedMediaOffers,e=t?await this.getOffers({offerIds:t.map(({offerId:r})=>r)}):[];if(je.setState({mediaOffers:e}),!je.getState().subscriptionOffers.length&&this.accountService.svodOfferIds){const r=await this.getOffers({offerIds:this.accountService.svodOfferIds});je.setState({subscriptionOffers:r})}if(!je.getState().switchSubscriptionOffers.length){const r=await this.getSubscriptionSwitches(),a=r?await this.getOffers({offerIds:r}):[];je.setState({switchSubscriptionOffers:a})}});p(this,"getSubscriptionOfferIds",()=>this.accountService.svodOfferIds);p(this,"chooseOffer",async t=>{je.setState({selectedOffer:t})});p(this,"initialiseOrder",async t=>{var l,d,u;const{getAccountInfo:e}=M.getState(),{customer:r}=e(),o=(l=(await this.getPaymentMethods())[0])==null?void 0:l.id,i={offer:t,customerId:r.id,country:(r==null?void 0:r.country)||"",paymentMethodId:o},c=await this.checkoutService.createOrder(i);if(((d=c==null?void 0:c.errors)==null?void 0:d.length)>0)throw je.getState().setOrder(null),new Error(c==null?void 0:c.errors[0]);je.getState().setOrder((u=c.responseData)==null?void 0:u.order)});p(this,"updateOrder",async(t,e,r)=>{var a;try{const o=await this.checkoutService.updateOrder({order:t,paymentMethodId:e,couponCode:r});o.responseData.order&&je.getState().setOrder((a=o.responseData)==null?void 0:a.order)}catch(o){if(o instanceof Error)if(o.message==="Order not found")je.getState().setOrder(null);else{if(o.message==="Invalid coupon code")throw new Je({couponCode:[we.t("account:checkout.coupon_not_valid")]});if(o.message==="Invalid coupon code for this offer")throw new Je({couponCode:[we.t("account:checkout.coupon_not_valid_for_offer")]})}throw new Je({form:[we.t("error:unknown_error")]})}});p(this,"getPaymentMethods",async()=>{var r,a;const{paymentMethods:t}=je.getState();if(t)return t;const e=await this.checkoutService.getPaymentMethods();if(e.errors.length>0)throw new Error(e.errors[0]);return je.getState().setPaymentMethods((r=e.responseData)==null?void 0:r.paymentMethods),(a=e.responseData)==null?void 0:a.paymentMethods});p(this,"paymentWithoutDetails",async()=>{const{order:t}=je.getState();if(!t)throw new Error("No order created");const e=await this.checkoutService.paymentWithoutDetails({orderId:t.id});if(e.errors.length>0)throw new Error(e.errors[0]);if(e.responseData.rejectedReason)throw new Error(e.responseData.rejectedReason);return e.responseData});p(this,"directPostCardPayment",async({cardPaymentPayload:t,referrer:e,returnUrl:r})=>{const{order:a}=je.getState();if(!a)throw new Error("No order created");return await this.checkoutService.directPostCardPayment(t,a,e,r)});p(this,"createAdyenPaymentSession",async(t,e=!0)=>{const{order:r}=je.getState(),a=r==null?void 0:r.id;if(e&&!a)throw new Error("There is no order to pay for");Ce(this.checkoutService.createAdyenPaymentSession,"createAdyenPaymentSession is not available in checkout service");const o=await this.checkoutService.createAdyenPaymentSession({orderId:a,returnUrl:t});if(o.errors.length>0)throw new Error(o.errors[0]);return o.responseData});p(this,"initialAdyenPayment",async(t,e)=>{const{order:r}=je.getState();if(!r)throw new Error("No order created");Ce(this.checkoutService.initialAdyenPayment,"initialAdyenPayment is not available in checkout service");const a=await this.checkoutService.initialAdyenPayment({orderId:r.id,returnUrl:e,paymentMethod:t,customerIP:await this.getCustomerIP()});if(a.errors.length>0)throw new Error(a.errors[0]);return a.responseData});p(this,"finalizeAdyenPayment",async(t,e,r)=>{if(!e)throw new Error("No order created");Ce(this.checkoutService.finalizeAdyenPayment,"finalizeAdyenPayment is not available in checkout service");const a=await this.checkoutService.finalizeAdyenPayment({orderId:e,details:t,paymentData:r});if(a.errors.length>0)throw new Error(a.errors[0]);return a.responseData});p(this,"paypalPayment",async({successUrl:t,waitingUrl:e,cancelUrl:r,errorUrl:a,couponCode:o=""})=>{const{order:i}=je.getState();if(!i)throw new Error("No order created");const c=await this.checkoutService.paymentWithPayPal({order:i,successUrl:t,waitingUrl:e,cancelUrl:r,errorUrl:a,couponCode:o});if(c.errors.length>0)throw new Error(c.errors[0]);return{redirectUrl:c.responseData.redirectUrl}});p(this,"getSubscriptionSwitches",async()=>{const{getAccountInfo:t}=M.getState(),{customerId:e}=t(),{subscription:r}=M.getState();if(!r||!this.checkoutService.getSubscriptionSwitches)return null;Ce(this.checkoutService.getOffer,"getOffer is not available in checkout service");const a=await this.checkoutService.getSubscriptionSwitches({customerId:e,offerId:r.offerId});return a.responseData.available.length?a.responseData.available.map(({toOfferId:o})=>o):null});p(this,"switchSubscription",async()=>{const t=je.getState().selectedOffer,e=M.getState().subscription,{getAccountInfo:r}=M.getState(),{customerId:a}=r();if(!t||!e)throw new Error("No offer selected");Ce(this.checkoutService.switchSubscription,"switchSubscription is not available in checkout service");const o=Td(e),i={toOfferId:t.offerId,customerId:a,offerId:e.offerId,switchDirection:o};await this.checkoutService.switchSubscription(i)});p(this,"changeSubscription",async({accessFeeId:t,subscriptionId:e})=>{Ce(this.subscriptionService.changeSubscription,"changeSubscription is not available in subscription service");const{responseData:r}=await this.subscriptionService.changeSubscription({accessFeeId:t,subscriptionId:e});return r});p(this,"updatePayPalPaymentMethod",async(t,e,r,a,o,i)=>{Ce(this.checkoutService.updatePaymentMethodWithPayPal,"updatePaymentMethodWithPayPal is not available in checkout service"),Ce(this.checkoutService.deletePaymentMethod,"deletePaymentMethod is not available in checkout service");const c=await this.checkoutService.updatePaymentMethodWithPayPal({paymentMethodId:o,successUrl:t,waitingUrl:e,cancelUrl:r,errorUrl:a});if(c.errors.length>0)throw new Error(c.errors[0]);return i&&await this.checkoutService.deletePaymentMethod({paymentDetailsId:i}),c.responseData});p(this,"addAdyenPaymentDetails",async(t,e,r)=>{Ce(this.checkoutService.addAdyenPaymentDetails,"addAdyenPaymentDetails is not available in checkout service");const a=await this.checkoutService.addAdyenPaymentDetails({paymentMethodId:e,returnUrl:r,paymentMethod:t,customerIP:await this.getCustomerIP()});if(a.errors.length>0)throw new Error(a.errors[0]);return a.responseData});p(this,"finalizeAdyenPaymentDetails",async(t,e,r)=>{Ce(this.checkoutService.finalizeAdyenPaymentDetails,"finalizeAdyenPaymentDetails is not available in checkout service");const a=await this.checkoutService.finalizeAdyenPaymentDetails({paymentMethodId:e,details:t,paymentData:r});if(a.errors.length>0)throw new Error(a.errors[0]);return a.responseData});p(this,"getOffers",t=>this.checkoutService.getOffers(t));p(this,"getEntitlements",t=>this.checkoutService.getEntitlements(t));this.getCustomerIP=e,this.accountService=gt(yt,t),this.checkoutService=gt(As,t),this.subscriptionService=gt(Ls,t)}})||mt)||mt)||mt)||mt)||mt);const lc="/assets/default_avatar-D3fd0lZl.png",It=ts("AccountStore",()=>({profile:null,selectingProfileAvatar:null,canManageProfiles:!1,setProfile:s=>{It.setState({profile:s?{...s,avatar_url:(s==null?void 0:s.avatar_url)||lc}:null})}}));class zr{}var no,ro,ao,oo,$t;const Yn="profile",$d=ce().shape({id:F().required(),name:F().required(),avatar_url:F(),adult:An().required(),credentials:ce().shape({access_token:F().required(),expires:In().required()})});let Xt=(no=ve(),ro=function(s,t){return nt(Ns)(s,void 0,0)},ao=Reflect.metadata("design:type",Function),oo=Reflect.metadata("design:paramtypes",[typeof IntegrationType>"u"?Object:IntegrationType,typeof $e>"u"?Object:$e]),no($t=ro($t=ao($t=oo($t=class{constructor(t,e){p(this,"profileService");p(this,"storageService");p(this,"isValidProfile",t=>{try{return $d.validateSync(t),!0}catch{return!1}});p(this,"listProfiles",async()=>{var t;return Ce((t=this.profileService)==null?void 0:t.listProfiles,"listProfiles is not available in profile service"),this.profileService.listProfiles(void 0)});p(this,"createProfile",async({name:t,adult:e,avatar_url:r,pin:a})=>{var o;return Ce((o=this.profileService)==null?void 0:o.createProfile,"createProfile is not available in profile service"),this.profileService.createProfile({name:t,adult:e,avatar_url:r,pin:a})});p(this,"updateProfile",async({id:t,name:e,adult:r,avatar_url:a,pin:o})=>{var i;return Ce((i=this.profileService)==null?void 0:i.updateProfile,"updateProfile is not available in profile service"),this.profileService.updateProfile({id:t,name:e,adult:r,avatar_url:a,pin:o})});p(this,"enterProfile",async({id:t,pin:e})=>{var a;Ce((a=this.profileService)==null?void 0:a.enterProfile,"enterProfile is not available in profile service");const r=await this.profileService.enterProfile({id:t,pin:e});if(!r)throw new Error("Unable to enter profile");await this.initializeProfile({profile:r})});p(this,"deleteProfile",async({id:t})=>{var e;return Ce((e=this.profileService)==null?void 0:e.deleteProfile,"deleteProfile is not available in profile service"),this.profileService.deleteProfile({id:t})});p(this,"getProfileDetails",async({id:t})=>{var e;return Ce((e=this.profileService)==null?void 0:e.getProfileDetails,"getProfileDetails is not available in profile service"),this.profileService.getProfileDetails({id:t})});p(this,"persistProfile",({profile:t})=>{this.storageService.setItem(Yn,JSON.stringify(t))});p(this,"unpersistProfile",async()=>{await this.storageService.removeItem(Yn)});p(this,"loadPersistedProfile",async()=>{const t=await this.storageService.getItem(Yn,!0);return this.isValidProfile(t)?(It.getState().setProfile(t),t):(It.getState().setProfile(null),null)});p(this,"initializeProfile",async({profile:t})=>(this.persistProfile({profile:t}),It.getState().setProfile(t),t));this.profileService=gt(zr,t,!1),this.storageService=e}isEnabled(){return!!this.profileService}})||$t)||$t)||$t)||$t);const ot=ts("FavoritesState",(s,t)=>({favorites:[],warning:null,favoritesPlaylistId:lt.Favorites,setWarning:e=>s({warning:e}),clearWarning:()=>s({warning:null}),hasItem:e=>t().favorites.some(r=>r.mediaid===e.mediaid),getPlaylist:()=>({feedid:t().favoritesPlaylistId||lt.Favorites,title:"Favorites",playlist:t().favorites.map(({playlistItem:e})=>e)})}));var io,co,lo,cs;let Cs=(io=ve(),co=Reflect.metadata("design:type",Function),lo=Reflect.metadata("design:paramtypes",[typeof Er>"u"?Object:Er]),io(cs=co(cs=lo(cs=class{constructor(t){p(this,"favoritesService");p(this,"initialize",async()=>{await this.restoreFavorites()});p(this,"restoreFavorites",async()=>{var a;const{user:t}=M.getState(),e=(a=K.getState().config.features)==null?void 0:a.favoritesList;if(!e)return;const r=await this.favoritesService.getFavorites(t,e);ot.setState({favorites:r,favoritesPlaylistId:e})});p(this,"persistFavorites",async()=>{const{favorites:t}=ot.getState(),{user:e}=M.getState();await this.favoritesService.persistFavorites(t,e)});p(this,"saveItem",async t=>{const{favorites:e}=ot.getState();if(!e.some(({mediaid:r})=>r===t.mediaid)){const r=[this.favoritesService.createFavorite(t)].concat(e);ot.setState({favorites:r}),await this.persistFavorites()}});p(this,"removeItem",async t=>{const{favorites:e}=ot.getState(),r=e.filter(({mediaid:a})=>a!==t.mediaid);ot.setState({favorites:r}),await this.persistFavorites()});p(this,"toggleFavorite",async t=>{const{favorites:e,hasItem:r,setWarning:a}=ot.getState();if(!t)return;if(r(t)){await this.removeItem(t);return}if(e.length>this.favoritesService.getMaxFavoritesCount()){a(we.t("video:favorites_warning",{maxCount:this.favoritesService.getMaxFavoritesCount()}));return}await this.saveItem(t)});p(this,"clear",async()=>{ot.setState({favorites:[]}),await this.persistFavorites()});this.favoritesService=t}})||cs)||cs)||cs);var uo,mo,ho,po,Ot;let _e=(uo=ve(),mo=function(s,t){return nt(Ns)(s,void 0,0)},ho=Reflect.metadata("design:type",Function),po=Reflect.metadata("design:paramtypes",[typeof IntegrationType>"u"?Object:IntegrationType,typeof Cs>"u"?Object:Cs,typeof Zs>"u"?Object:Zs,typeof Xt>"u"?Object:Xt]),uo(Ot=mo(Ot=ho(Ot=po(Ot=class{constructor(t,e,r,a){p(this,"checkoutService");p(this,"accountService");p(this,"subscriptionService");p(this,"profileController");p(this,"favoritesController");p(this,"watchHistoryController");p(this,"features");p(this,"refreshEntitlements");p(this,"loadUserData",async()=>{try{await this.accountService.getAuthData()&&await this.getAccount()}catch(t){t instanceof Error&&t.message.includes("Invalid JWT token")&&await this.logout()}});p(this,"initialize",async(t,e)=>{var a;this.refreshEntitlements=e,M.setState({loading:!0});const r=K.getState().config;await((a=this.profileController)==null?void 0:a.loadPersistedProfile()),await this.accountService.initialize(r,t,this.logout),K.setState({accessModel:this.accountService.accessModel}),await this.loadUserData(),M.setState({loading:!1})});p(this,"updateUser",async t=>{M.setState({loading:!0});const{user:e}=M.getState(),{canUpdateEmail:r,canSupportEmptyFullName:a}=this.getFeatures();if(Object.prototype.hasOwnProperty.call(t,"email")&&!r)throw new Error("Email update not supported");if(!e)throw new Error("User not logged in");const o=this.validateInputLength(t);if(o.length)return{errors:o,responseData:{}};let i=t;a||(i={...t,email:e.email});const c=await this.accountService.updateCustomer({...i,id:e.id.toString()});if(!c)throw new Error("Unknown error");return M.setState({user:c}),{errors:[],responseData:c}});p(this,"getAccount",async()=>{const{config:t}=K.getState();try{const e=await this.accountService.getUser({config:t});e&&await this.afterLogin(e.user,e.customerConsents),M.setState({loading:!1})}catch{M.setState({user:null,subscription:null,transactions:null,activePayment:null,customerConsents:null,publisherConsents:null,loading:!1})}});p(this,"login",async(t,e,r)=>{M.setState({loading:!0});try{const a=await this.accountService.login({email:t,password:e,referrer:r});if(a){await this.afterLogin(a.user,a.customerConsents);return}}catch(a){if(a instanceof Error&&a.message.toLowerCase().includes("invalid param email"))throw new Je({email:[we.t("account:login.wrong_email")]})}finally{M.setState({loading:!1})}throw new Je({form:[we.t("account:login.wrong_combination")]})});p(this,"logout",async()=>{var t,e;await((t=this.accountService)==null?void 0:t.logout()),await this.clearLoginState(),await((e=this.refreshEntitlements)==null?void 0:e.call(this))});p(this,"register",async(t,e,r,a)=>{try{const o=await this.accountService.register({email:t,password:e,consents:a,referrer:r});if(o){const{user:i,customerConsents:c}=o;await this.afterLogin(i,c,!0);return}}catch(o){if(o instanceof Error){const i=o.message.toLowerCase();if(i.includes("customer already exists")||i.includes("account already exists"))throw new Je({form:[we.t("account:registration.user_exists")]});if(i.includes("please enter a valid e-mail address"))throw new Je({email:[we.t("account:registration.field_is_not_valid_email")]});if(i.includes("invalid param password"))throw new Je({password:[we.t("account:registration.invalid_password")]})}}throw new Je({form:[we.t("account:registration.failed_to_create")]})});p(this,"updateConsents",async t=>{var a;const{getAccountInfo:e}=M.getState(),{customer:r}=e();M.setState({loading:!0});try{const o=await((a=this.accountService)==null?void 0:a.updateCustomerConsents({customer:r,consents:t}));return o?(M.setState({customerConsents:o}),{responseData:o,errors:[]}):{responseData:[],errors:[]}}finally{M.setState({loading:!1})}});p(this,"getCustomerConsents",async()=>{const{getAccountInfo:t}=M.getState(),{customer:e}=t(),r=await this.accountService.getCustomerConsents({customer:e});return r&&M.setState({customerConsents:r}),r});p(this,"getPublisherConsents",async()=>{const{config:t}=K.getState();M.setState({publisherConsentsLoading:!0});const e=await this.accountService.getPublisherConsents(t);M.setState({publisherConsents:e,publisherConsentsLoading:!1})});p(this,"getCaptureStatus",async()=>{const{getAccountInfo:t}=M.getState(),{customer:e}=t();return this.accountService.getCaptureStatus({customer:e})});p(this,"updateCaptureAnswers",async t=>{const{getAccountInfo:e}=M.getState(),{customer:r,customerConsents:a}=e(),o=await this.accountService.updateCaptureAnswers({customer:r,...t});return M.setState({user:o,customerConsents:a}),o});p(this,"resetPassword",async(t,e)=>{await this.accountService.resetPassword({customerEmail:t,resetUrl:e})});p(this,"changePasswordWithOldPassword",async(t,e,r)=>{await this.accountService.changePasswordWithOldPassword({oldPassword:t,newPassword:e,newPasswordConfirmation:r})});p(this,"changePasswordWithToken",async(t,e,r,a)=>{await this.accountService.changePasswordWithResetToken({customerEmail:t,newPassword:e,resetPasswordToken:r,newPasswordConfirmation:a})});p(this,"updateSubscription",async t=>{var i;const{getAccountInfo:e}=M.getState(),{customerId:r}=e(),{subscription:a}=M.getState();if(!a)throw new Error("user has no active subscription");const o=await((i=this.subscriptionService)==null?void 0:i.updateSubscription({customerId:r,offerId:a.offerId,status:t,unsubscribeUrl:a.unsubscribeUrl}));if(o.errors.length>0)throw new Error(o.errors[0]);return await this.reloadSubscriptions({retry:10}),o==null?void 0:o.responseData});p(this,"updateCardDetails",async({cardName:t,cardNumber:e,cvc:r,expMonth:a,expYear:o,currency:i})=>{const{getAccountInfo:c}=M.getState(),{customerId:l}=c();Ce(this.subscriptionService.updateCardDetails,"updateCardDetails is not available in subscription service");const d=await this.subscriptionService.updateCardDetails({cardName:t,cardNumber:e,cvc:r,expMonth:a,expYear:o,currency:i}),u=await this.subscriptionService.getActivePayment({customerId:l})||null;return M.setState({loading:!1,activePayment:u}),d});p(this,"checkEntitlements",async t=>{if(!t)return!1;const{responseData:e}=await this.checkoutService.getEntitlements({offerId:t});return!!(e!=null&&e.accessGranted)});p(this,"reloadSubscriptions",async({delay:t,retry:e}={delay:0,retry:0})=>{var u,m;M.setState({loading:!0});const{getAccountInfo:r}=M.getState(),{customerId:a}=r(),{accessModel:o}=K.getState();if(t&&t>0)return new Promise(g=>{setTimeout(()=>{this.reloadSubscriptions({retry:e}).finally(g)},t)});if(o!=="SVOD")return await((u=this.refreshEntitlements)==null?void 0:u.call(this)),M.setState({loading:!1});const[i,c,l]=await Promise.all([this.subscriptionService.getActiveSubscription({customerId:a}),this.subscriptionService.getAllTransactions({customerId:a}),this.subscriptionService.getActivePayment({customerId:a})]);let d=null;if(!i&&e&&e>0)return await this.reloadSubscriptions({delay:1500,retry:e-1});try{if(i!=null&&i.pendingSwitchId){Ce(this.checkoutService.getOffer,"getOffer is not available in checkout service"),Ce(this.checkoutService.getSubscriptionSwitch,"getSubscriptionSwitch is not available in checkout service");const g=await this.checkoutService.getSubscriptionSwitch({switchId:i.pendingSwitchId});d=(await this.checkoutService.getOffer({offerId:g.responseData.toOfferId})).responseData}}catch{}await((m=this.refreshEntitlements)==null?void 0:m.call(this)),M.setState({subscription:i,loading:!1,pendingOffer:d,transactions:c,activePayment:l})});p(this,"exportAccountData",async()=>{var e;const{canExportAccountData:t}=this.getFeatures();return Ce(this.accountService.exportAccountData,"exportAccountData is not available in account service"),Jn(t,"Export account"),(e=this.accountService)==null?void 0:e.exportAccountData(void 0)});p(this,"getSocialLoginUrls",t=>{const{hasSocialURLs:e}=this.getFeatures();return Ce(this.accountService.getSocialUrls,"getSocialUrls is not available in account service"),Jn(e,"Social logins"),this.accountService.getSocialUrls({redirectUrl:t})});p(this,"deleteAccountData",async t=>{const{canDeleteAccount:e}=this.getFeatures();Ce(this.accountService.deleteAccount,"deleteAccount is not available in account service"),Jn(e,"Delete account");try{await this.accountService.deleteAccount({password:t})}catch(r){throw(r instanceof Error?r.message.toLowerCase():"").includes("invalid credentials")?new Je({form:[we.t("user:account.delete_account.invalid_credentials")]}):new Je({form:[we.t("user:account.delete_account.error")]})}});p(this,"getReceipt",async t=>{Ce(this.subscriptionService.fetchReceipt,"fetchReceipt is not available in subscription service");const{responseData:e}=await this.subscriptionService.fetchReceipt({transactionId:t});return e});p(this,"getAuthData",async()=>this.accountService.getAuthData());p(this,"subscribeToNotifications",async({uuid:t,onMessage:e})=>this.accountService.subscribeToNotifications({uuid:t,onMessage:e}));p(this,"validateInputLength",t=>{var r,a;const e=[];return Number((r=t==null?void 0:t.firstName)==null?void 0:r.length)>50&&e.push(we.t("account:validation.first_name")),Number((a=t==null?void 0:t.lastName)==null?void 0:a.length)>50&&e.push(we.t("account:validation.last_name")),e});p(this,"clearLoginState",async()=>{M.setState({user:null,subscription:null,transactions:null,activePayment:null,customerConsents:null,publisherConsents:null,loading:!1}),It.setState({profile:null,selectingProfileAvatar:null}),this.profileController.unpersistProfile(),await this.favoritesController.restoreFavorites(),await this.watchHistoryController.restoreWatchHistory()});this.checkoutService=gt(As,t),this.accountService=gt(yt,t),this.subscriptionService=gt(Ls,t),this.favoritesController=e,this.watchHistoryController=r,this.profileController=a,this.features=t?this.accountService.features:ed}getSandbox(){return this.accountService.sandbox}getFeatures(){return this.features}async afterLogin(t,e,r=!1){M.setState({user:t,customerConsents:e}),await Promise.allSettled([this.reloadSubscriptions(),this.getPublisherConsents(),r?this.favoritesController.persistFavorites():this.favoritesController.restoreFavorites(),r?this.watchHistoryController.persistWatchHistory():this.watchHistoryController.restoreWatchHistory()]),M.setState({loading:!1})}})||Ot)||Ot)||Ot)||Ot);var fo,go,_o,yo,vo,xo,Xe;let Gr=(fo=ve(),go=function(s,t){return nt(jn)(s,void 0,0)},_o=function(s,t){return nt(Sn)(s,void 0,1)},yo=function(s,t){return nt($e)(s,void 0,2)},vo=Reflect.metadata("design:type",Function),xo=Reflect.metadata("design:paramtypes",[typeof jn>"u"?Object:jn,typeof Sn>"u"?Object:Sn,typeof $e>"u"?Object:$e]),fo(Xe=go(Xe=_o(Xe=yo(Xe=vo(Xe=xo(Xe=class{constructor(t,e,r){p(this,"configService");p(this,"settingsService");p(this,"storageService");p(this,"loadAndValidateConfig",async t=>{const e=this.configService.formatSourceLocation(t),r=this.configService.getDefaultConfig();e||K.setState({config:r});let a=await this.configService.loadConfig(e);a.id=t,a.assets=a.assets||{},a.assets.banner||(a.assets.banner=r.assets.banner);const o=a.assets.banner;return K.setState(i=>{i.config.assets.banner=o}),a=await this.configService.validateConfig(a),a=yl({},r,a),a});p(this,"initializeApp",async(t,e)=>{var c,l;const r=await this.settingsService.initialize(),a=await this.settingsService.getConfigSource(r,t),o=await this.loadAndValidateConfig(a),i=this.calculateIntegrationType(o);return K.setState({config:o,loaded:!0,integrationType:i}),this.storageService.initialize("jwapp"),K.setState({settings:r}),i&&await V(_e).initialize(t,e),(c=o.features)!=null&&c.continueWatchingList&&o.content.some(d=>d.type===lt.ContinueWatching)&&await V(Zs).initialize(),(l=o.features)!=null&&l.favoritesList&&o.content.some(d=>d.type===lt.Favorites)&&await V(Cs).initialize(),{config:o,settings:r,configSource:a}});p(this,"calculateIntegrationType",t=>{const r=me.getAll(Hr).reduce((a,o)=>{const i=o(t);return i?[...a,i]:a},[]);if(r.length>1)throw new Error(`Failed to initialize app, more than 1 integrations are enabled: ${r.join(", ")}`);return r[0]||null});p(this,"getIntegrationType",()=>{const t=K.getState();if(!t.loaded)throw new Error("A call to `AppController#getIntegrationType()` was made before loading the config");return t.integrationType});this.configService=t,this.settingsService=e,this.storageService=r}})||Xe)||Xe)||Xe)||Xe)||Xe)||Xe);class rn{}var wo,bo;const Od=s=>s.status==="fulfilled"?!0:(Qs("An error occurred resolving a promise: ",s.reason),!1);let dc=(wo=ve(),wo(bo=class{constructor(){p(this,"parseSchedule",async(t,e)=>{const r=!!e.scheduleDemo||!1,a=this.getEpgService(e);if(!Array.isArray(t))return[];const i=(await Promise.allSettled(t.map(c=>a==null?void 0:a.transformProgram(c).catch(l=>{})))).filter(Od).map(c=>c.value).filter(c=>!!c);return r?this.generateDemoPrograms(i):i});p(this,"getSchedule",async t=>{const e=this.getEpgService(t),r=await(e==null?void 0:e.fetchSchedule(t)),a=await this.parseSchedule(r,t),o=t.catchupHours&&parseInt(t.catchupHours);return{id:t.mediaid,title:t.title,description:t.description,catchupHours:o||8,channelLogoImage:t.channelLogoImage,backgroundImage:t.backgroundImage,programs:a}});p(this,"getEpgService",t=>{var a;const e=((a=t==null?void 0:t.scheduleType)==null?void 0:a.toLocaleLowerCase())||Br.jwp,r=gt(rn,e,!1);return r||console.error(`No epg service was added for the ${e} schedule type`),r});p(this,"getSchedules",async t=>Promise.all(t.map(e=>this.getSchedule(e))))}generateDemoPrograms(t){var i;const e=new Date,r=new Date((i=t[0])==null?void 0:i.startTime),a=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate())),o=vl(e,a);return t.map((c,l)=>({...c,id:`${c.id}_${l}`,startTime:Sa(new Date(c.startTime),o).toJSON(),endTime:Sa(new Date(c.endTime),o).toJSON()}))}})||bo);var jo,So;const Dd=ce().shape({"episode-num":ce().shape({"#text":F().required()}),title:ce().shape({"#text":F().required()}),desc:ce().shape({"#text":F()}),icon:ce().shape({src:F()}),start:F().required(),stop:F().required()}),Co=s=>xl(s,"yyyyMdHms xxxx",new Date).toISOString();let Fd=(jo=ve(),jo(So=class extends rn{constructor(){super(...arguments);p(this,"transformProgram",async e=>{var a,o,i;const r=await Dd.validate(e);return{id:r["episode-num"]["#text"],title:r.title["#text"],startTime:Co(r.start),endTime:Co(r.stop),description:(a=r==null?void 0:r.desc)==null?void 0:a["#text"],cardImage:(o=r==null?void 0:r.icon)==null?void 0:o.src,backgroundImage:(i=r==null?void 0:r.icon)==null?void 0:i.src}});p(this,"fetchSchedule",async e=>{var i;const{XMLParser:r}=await Yi(()=>import("./vendor-C6HH6XaD.js").then(c=>c.f),__vite__mapDeps([0,1,2])),a=e.scheduleUrl;if(!a)return;const o={ignoreAttributes:!1,attributeNamePrefix:""};try{const c=await fetch(a).then(u=>u.text()),d=new r(o).parse(c);return((i=d==null?void 0:d.tv)==null?void 0:i.programme)||[]}catch{}})}})||So);var Po,ko;const Md="API-KEY",Bd=ce().shape({id:F().required(),title:F().required(),startTime:F().required().test(s=>s?br(new Date(s)):!1),endTime:F().required().test(s=>s?br(new Date(s)):!1),chapterPointCustomProperties:Ks().of(ce().shape({key:F().required(),value:F().test("required-but-empty","value is required",s=>typeof s=="string")}))});let Rd=(Po=ve(),Po(ko=class extends rn{constructor(){super(...arguments);p(this,"transformProgram",async e=>{var o,i,c,l;const r=await Bd.validate(e),a=((i=(o=r.chapterPointCustomProperties)==null?void 0:o.find(d=>d.key==="image"))==null?void 0:i.value)||void 0;return{id:r.id,title:r.title,startTime:r.startTime,endTime:r.endTime,cardImage:a,backgroundImage:a,description:((l=(c=r.chapterPointCustomProperties)==null?void 0:c.find(d=>d.key==="description"))==null?void 0:l.value)||void 0}});p(this,"fetchSchedule",async e=>{if(!e.scheduleUrl)return;const r=new Headers;e.scheduleToken&&r.set(Md,e.scheduleToken);try{const a=await fetch(e.scheduleUrl,{headers:r});return await pt(a)}catch(a){a instanceof Error&&Qs(`Fetch failed for EPG schedule: '${e.scheduleUrl}'`,a)}})}})||ko);class Hd{constructor(){p(this,"queue",[])}getLength(){return this.queue.length}async enqueue(){return new Promise((t,e)=>{this.queue.push({resolve:t,reject:e})})}async resolve(t){const e=this.queue.map(({resolve:r})=>r(t));this.queue=[],await Promise.allSettled(e)}async reject(t){const e=this.queue.map(({reject:r})=>r(t));this.queue=[],await Promise.allSettled(e)}}var Eo,No,Io,Ao,Dt;const Kn="auth",Ud=ce().shape({accessToken:F().required(),refreshToken:F().required()}),Wd=s=>Ud.isValidSync(s),Lo=s=>{try{const t=Ui(s);if(typeof t.exp=="number")return t.exp*1e3}catch{}return-1};let es=(Eo=ve(),No=function(s,t){return nt(nn)(s,void 0,1)},Io=Reflect.metadata("design:type",Function),Ao=Reflect.metadata("design:paramtypes",[typeof $e>"u"?Object:$e,typeof GetCustomerIP>"u"?Object:GetCustomerIP]),Eo(Dt=No(Dt=Io(Dt=Ao(Dt=class{constructor(t,e){p(this,"storageService");p(this,"getCustomerIP");p(this,"channel");p(this,"queue",new Hd);p(this,"isRefreshing",!1);p(this,"expiration",-1);p(this,"sandbox",!1);p(this,"tokens",null);p(this,"logoutCallback");p(this,"getNewTokens",async({refreshToken:t})=>{var e;try{const{responseData:r}=await this.post("/auths/refresh_token",JSON.stringify({refreshToken:t}));return{accessToken:r.jwt,refreshToken:r.refreshToken}}catch(r){throw r instanceof Error&&(r.message.includes("Refresh token is expired or does not exist")||r.message.includes("Missing or invalid parameter"))&&(this.logoutCallback,await((e=this.logoutCallback)==null?void 0:e.call(this))),r}});p(this,"handleBroadcastMessage",async t=>{this.isRefreshing=t.action==="refreshing",t.tokens&&await this.setTokens(t.tokens),t.action==="resolved"?await this.queue.resolve():t.action==="rejected"&&await this.queue.reject()});p(this,"sendBroadcastMessage",(t,e)=>{const r={action:t,tokens:e};this.channel.postMessage(r)});p(this,"getBaseUrl",()=>this.sandbox?"https://mediastore-sandbox.cleeng.com":"https://mediastore.cleeng.com");p(this,"performRequest",async(t="/",e="GET",r,a={})=>{try{const o=a.authenticate?await this.getAccessTokenOrThrow():void 0;return await(await fetch(`${this.getBaseUrl()}${t}`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:o?`Bearer ${o}`:""},keepalive:a.keepalive,method:e,body:r})).json()}catch(o){return{errors:Array.of(o instanceof Error?o.message:String(o))}}});p(this,"initialize",async(t,e)=>{this.sandbox=t,this.logoutCallback=e,await this.restoreTokensFromStorage(),await this.maybeRefreshAccessToken()});p(this,"setTokens",async t=>{this.tokens=t,this.expiration=Lo(t.accessToken),await this.persistInStorage(this.tokens)});p(this,"clearTokens",async()=>{this.tokens=null,await this.persistInStorage(null)});p(this,"restoreTokensFromStorage",async()=>{const t=await this.storageService.getItem(Kn,!1);let e;if(typeof t!="string")return;try{if(e=JSON.parse(t),!Wd(e))return}catch{return}const r=Lo(e.accessToken);r>this.expiration&&(this.tokens=e,this.expiration=r)});p(this,"accessTokenIsExpired",()=>this.tokens?this.expiration>-1&&Date.now()-this.expiration>0:!1);p(this,"hasTokens",()=>!!this.tokens);p(this,"refreshTokens",async t=>{this.sendBroadcastMessage("refreshing"),this.isRefreshing=!0;try{const e=await this.getNewTokens(t);if(e){await this.setTokens(e),this.isRefreshing=!1,this.sendBroadcastMessage("resolved",e),await this.queue.resolve();return}}catch{}await this.clearTokens(),this.isRefreshing=!1,this.sendBroadcastMessage("rejected"),await this.queue.reject()});p(this,"maybeRefreshAccessToken",async()=>{try{if(this.isRefreshing)return Qs("Token is already refreshing, waiting in queue..."),await this.queue.enqueue();if(!this.accessTokenIsExpired()||!this.tokens)return;await this.refreshTokens(this.tokens)}catch{}});p(this,"getAccessToken",async()=>{var t;return await this.maybeRefreshAccessToken(),await this.restoreTokensFromStorage(),(t=this.tokens)==null?void 0:t.accessToken});p(this,"getAccessTokenOrThrow",async()=>{const t=await this.getAccessToken();if(!t)throw new Error("Access token is missing");return t});p(this,"getLocales",async()=>{const t=await this.getCustomerIP();return this.get(`/locales${t?"?customerIP="+t:""}`)});p(this,"get",(t,e)=>this.performRequest(t,"GET",void 0,e));p(this,"patch",(t,e,r)=>this.performRequest(t,"PATCH",e,r));p(this,"put",(t,e,r)=>this.performRequest(t,"PUT",e,r));p(this,"post",(t,e,r)=>this.performRequest(t,"POST",e,r));p(this,"remove",(t,e)=>this.performRequest(t,"DELETE",void 0,e));this.storageService=t,this.getCustomerIP=e,this.channel=new wl("jwp-refresh-token-channel"),this.channel.addEventListener("message",this.handleBroadcastMessage)}async persistInStorage(t){t?await this.storageService.setItem(Kn,JSON.stringify(t)):await this.storageService.removeItem(Kn)}})||Dt)||Dt)||Dt)||Dt);const To=s=>({id:s.id,email:s.email,country:s.country,firstName:s.firstName,lastName:s.lastName,fullName:`${s.firstName} ${s.lastName}`,metadata:s.externalData||{}}),Vd=s=>({type:"checkbox",name:s.name,label:s.label,defaultValue:"",required:s.required,placeholder:s.placeholder,options:{},enabledByDefault:!1,version:s.version});var $o,Oo,Do,Fo,Ft;let qd=($o=ve(),Oo=function(s,t){return nt(nn)(s,void 0,1)},Do=Reflect.metadata("design:type",Function),Fo=Reflect.metadata("design:paramtypes",[typeof es>"u"?Object:es,typeof GetCustomerIP>"u"?Object:GetCustomerIP]),$o(Ft=Oo(Ft=Do(Ft=Fo(Ft=class extends yt{constructor(e,r){super({canUpdateEmail:!0,canSupportEmptyFullName:!0,canChangePasswordWithOldPassword:!1,canRenewSubscription:!0,canExportAccountData:!1,canDeleteAccount:!1,canUpdatePaymentMethod:!0,canShowReceipts:!1,hasSocialURLs:!1,hasNotifications:!1,watchListSizeLimit:48});p(this,"cleengService");p(this,"getCustomerIP");p(this,"publisherId","");p(this,"externalData",{});p(this,"accessModel",Me.AUTHVOD);p(this,"svodOfferIds",[]);p(this,"sandbox",!1);p(this,"handleErrors",e=>{if(e.length>0)throw new Error(e[0])});p(this,"getCustomerIdFromAuthData",e=>Ui(e.jwt).customerId);p(this,"getCustomer",async({customerId:e})=>{const{responseData:r,errors:a}=await this.cleengService.get(`/customers/${e}`,{authenticate:!0});return this.handleErrors(a),this.externalData=r.externalData||{},To(r)});p(this,"getLocales",async()=>this.cleengService.getLocales());p(this,"initialize",async(e,r,a)=>{var i;const o=(i=e==null?void 0:e.integrations)==null?void 0:i.cleeng;if(!(o!=null&&o.id))throw new Error("Failed to initialize Cleeng integration. The publisherId is missing.");this.publisherId=o.id,this.accessModel=o.monthlyOffer||o.yearlyOffer?Me.SVOD:Me.AUTHVOD,this.svodOfferIds=[o==null?void 0:o.monthlyOffer,o==null?void 0:o.yearlyOffer].filter(Boolean).map(String),this.sandbox=!!o.useSandbox,await this.cleengService.initialize(this.sandbox,a)});p(this,"getAuthData",async()=>this.cleengService.tokens?{jwt:this.cleengService.tokens.accessToken,refreshToken:this.cleengService.tokens.refreshToken}:null);p(this,"getCustomerConsents",async e=>{var o;const{customer:r}=e,a=await this.cleengService.get(`/customers/${r==null?void 0:r.id}/consents`,{authenticate:!0});return this.handleErrors(a.errors),((o=a==null?void 0:a.responseData)==null?void 0:o.consents)||[]});p(this,"updateCustomerConsents",async e=>{const{customer:r}=e,a={id:r.id,consents:e.consents},o=await this.cleengService.put(`/customers/${r==null?void 0:r.id}/consents`,JSON.stringify(a),{authenticate:!0});return this.handleErrors(o.errors),await this.getCustomerConsents(e)});p(this,"login",async({email:e,password:r})=>{const a={email:e,password:r,publisherId:this.publisherId,customerIP:await this.getCustomerIP()},{responseData:o,errors:i}=await this.cleengService.post("/auths",JSON.stringify(a));this.handleErrors(i),await this.cleengService.setTokens({accessToken:o.jwt,refreshToken:o.refreshToken});const{user:c,customerConsents:l}=await this.getUser();return{user:c,auth:o,customerConsents:l}});p(this,"register",async({email:e,password:r,consents:a})=>{const o=await this.getLocales();this.handleErrors(o.errors);const i={email:e,password:r,locale:o.responseData.locale,country:o.responseData.country,currency:o.responseData.currency,publisherId:this.publisherId,customerIP:await this.getCustomerIP()},{responseData:c,errors:l}=await this.cleengService.post("/customers",JSON.stringify(i));this.handleErrors(l),await this.cleengService.setTokens({accessToken:c.jwt,refreshToken:c.refreshToken});const{user:d}=await this.getUser(),u=await this.updateCustomerConsents({consents:a,customer:d}).catch(()=>[]);return{user:d,auth:c,customerConsents:u}});p(this,"logout",async()=>{await this.cleengService.clearTokens()});p(this,"getUser",async()=>{const e=await this.getAuthData();if(!e)throw new Error("Not logged in");const r=this.getCustomerIdFromAuthData(e),a=await this.getCustomer({customerId:r}),o=await this.getCustomerConsents({customer:a});return{user:a,customerConsents:o}});p(this,"getPublisherConsents",async()=>{var r;const e=await this.cleengService.get(`/publishers/${this.publisherId}/consents`);return this.handleErrors(e.errors),(((r=e.responseData)==null?void 0:r.consents)||[]).map(Vd)});p(this,"getCaptureStatus",async({customer:e})=>{const r=await this.cleengService.get(`/customers/${e==null?void 0:e.id}/capture/status`,{authenticate:!0});return this.handleErrors(r.errors),r.responseData});p(this,"updateCaptureAnswers",async({customer:e,...r})=>{const a={customerId:e.id,...r},o=await this.cleengService.put(`/customers/${e.id}/capture`,JSON.stringify(a),{authenticate:!0});return this.handleErrors(o.errors),this.getCustomer({customerId:e.id})});p(this,"resetPassword",async e=>{const r=await this.cleengService.put("/customers/passwords",JSON.stringify({...e,publisherId:this.publisherId}));this.handleErrors(r.errors)});p(this,"changePasswordWithResetToken",async e=>{const r=await this.cleengService.patch("/customers/passwords",JSON.stringify({...e,publisherId:this.publisherId}));this.handleErrors(r.errors)});p(this,"changePasswordWithOldPassword",async()=>{});p(this,"updateCustomer",async e=>{const{id:r,metadata:a,fullName:o,...i}=e,c={id:r,...i},{responseData:l,errors:d}=await this.cleengService.patch(`/customers/${r}`,JSON.stringify(c),{authenticate:!0,keepalive:!0});return this.handleErrors(d),this.externalData=l.externalData||{},To(l)});p(this,"updateWatchHistory",async({user:e,history:r})=>{const a={id:e.id,externalData:{...this.externalData,history:r}},{errors:o,responseData:i}=await this.cleengService.patch(`/customers/${e.id}`,JSON.stringify(a),{authenticate:!0,keepalive:!0});this.handleErrors(o),this.externalData=i.externalData||{}});p(this,"updateFavorites",async({user:e,favorites:r})=>{const a={id:e.id,externalData:{...this.externalData,favorites:r}},{errors:o,responseData:i}=await this.cleengService.patch(`/customers/${e.id}`,JSON.stringify(a),{authenticate:!0,keepalive:!0});this.handleErrors(o),this.externalData=i.externalData||{}});p(this,"getWatchHistory",async()=>this.externalData.history||[]);p(this,"getFavorites",async()=>this.externalData.favorites||[]);p(this,"subscribeToNotifications",async()=>!1);p(this,"getSocialUrls");p(this,"exportAccountData");p(this,"deleteAccount");this.cleengService=e,this.getCustomerIP=r}})||Ft)||Ft)||Ft)||Ft);var Mo,Bo,Ro,Ho,Mt;let zd=(Mo=ve(),Bo=function(s,t){return nt(nn)(s,void 0,1)},Ro=Reflect.metadata("design:type",Function),Ho=Reflect.metadata("design:paramtypes",[typeof es>"u"?Object:es,typeof GetCustomerIP>"u"?Object:GetCustomerIP]),Mo(Mt=Bo(Mt=Ro(Mt=Ho(Mt=class extends As{constructor(e,r){super();p(this,"cleengService");p(this,"getCustomerIP");p(this,"getOffers",async e=>await Promise.all(e.offerIds.map(async r=>{const a=await this.getOffer({offerId:String(r)});if(a.errors.length>0)throw new Error(a.errors[0]);return a.responseData})));p(this,"getOffer",async e=>{const r=await this.getCustomerIP();return this.cleengService.get(`/offers/${e.offerId}${r?"?customerIP="+r:""}`)});p(this,"createOrder",async e=>{var i;const r=await this.cleengService.getLocales();if(r.errors.length>0)throw new Error(r.errors[0]);const a=r.responseData.ipAddress,o={offerId:e.offer.offerId,customerId:e.customerId,country:e.country,currency:((i=r==null?void 0:r.responseData)==null?void 0:i.currency)||"EUR",customerIP:a,paymentMethodId:e.paymentMethodId};return this.cleengService.post("/orders",JSON.stringify(o),{authenticate:!0})});p(this,"getOrder",async({orderId:e})=>this.cleengService.get(`/orders/${e}`,{authenticate:!0}));p(this,"updateOrder",async({order:e,...r})=>{const a=await this.cleengService.patch(`/orders/${e.id}`,JSON.stringify(r),{authenticate:!0});if(a.errors.length){if(a.errors[0].includes(`Order with ${e.id} not found`))throw new Error("Order not found");if(a.errors[0].includes(`Coupon ${r.couponCode} not found`))throw new Error("Invalid coupon code");if(a.errors[0].includes(`Coupon ${r.couponCode} cannot be applied on this offer`))throw new Error("Invalid coupon code for this offer")}return a});p(this,"getPaymentMethods",async()=>this.cleengService.get("/payment-methods",{authenticate:!0}));p(this,"paymentWithoutDetails",async e=>this.cleengService.post("/payments",JSON.stringify(e),{authenticate:!0}));p(this,"paymentWithPayPal",async e=>{const{order:r,successUrl:a,cancelUrl:o,errorUrl:i}=e,c={orderId:r.id,successUrl:a,cancelUrl:o,errorUrl:i};return this.cleengService.post("/connectors/paypal/v1/tokens",JSON.stringify(c),{authenticate:!0})});p(this,"getSubscriptionSwitches",async e=>this.cleengService.get(`/customers/${e.customerId}/subscription_switches/${e.offerId}/availability`,{authenticate:!0}));p(this,"getSubscriptionSwitch",async e=>this.cleengService.get(`/subscription_switches/${e.switchId}`,{authenticate:!0}));p(this,"switchSubscription",async e=>this.cleengService.post(`/customers/${e.customerId}/subscription_switches/${e.offerId}`,JSON.stringify({toOfferId:e.toOfferId,switchDirection:e.switchDirection}),{authenticate:!0}));p(this,"getEntitlements",async e=>this.cleengService.get(`/entitlements/${e.offerId}`,{authenticate:!0}));p(this,"createAdyenPaymentSession",async e=>await this.cleengService.post("/connectors/adyen/sessions",JSON.stringify(e),{authenticate:!0}));p(this,"initialAdyenPayment",async e=>this.cleengService.post("/connectors/adyen/initial-payment",JSON.stringify({...e,attemptAuthentication:this.cleengService.sandbox?"always":void 0}),{authenticate:!0}));p(this,"finalizeAdyenPayment",async e=>this.cleengService.post("/connectors/adyen/initial-payment/finalize",JSON.stringify(e),{authenticate:!0}));p(this,"updatePaymentMethodWithPayPal",async e=>this.cleengService.post("/connectors/paypal/v1/payment_details/tokens",JSON.stringify(e),{authenticate:!0}));p(this,"deletePaymentMethod",async e=>this.cleengService.remove(`/payment_details/${e.paymentDetailsId}`,{authenticate:!0}));p(this,"addAdyenPaymentDetails",async e=>this.cleengService.post("/connectors/adyen/payment-details",JSON.stringify({...e,attemptAuthentication:this.cleengService.sandbox?"always":void 0}),{authenticate:!0}));p(this,"finalizeAdyenPaymentDetails",async e=>this.cleengService.post("/connectors/adyen/payment-details/finalize",JSON.stringify(e),{authenticate:!0}));p(this,"directPostCardPayment",async()=>!1);this.cleengService=e,this.getCustomerIP=r}})||Mt)||Mt)||Mt)||Mt);var Uo,Wo,Vo,ls;let Gd=(Uo=ve(),Wo=Reflect.metadata("design:type",Function),Vo=Reflect.metadata("design:paramtypes",[typeof es>"u"?Object:es]),Uo(ls=Wo(ls=Vo(ls=class extends Ls{constructor(e){super();p(this,"cleengService");p(this,"getActiveSubscription",async({customerId:e})=>{const r=await this.getSubscriptions({customerId:e});return r.errors.length>0?null:r.responseData.items.find(a=>a.status==="active"||a.status==="cancelled")||null});p(this,"getAllTransactions",async({customerId:e})=>{const r=await this.getTransactions({customerId:e});return r.errors.length>0?null:r.responseData.items});p(this,"getActivePayment",async({customerId:e})=>{const r=await this.getPaymentDetails({customerId:e});return r.errors.length>0?null:r.responseData.paymentDetails.find(a=>a.active)||null});p(this,"getSubscriptions",async e=>this.cleengService.get(`/customers/${e.customerId}/subscriptions`,{authenticate:!0}));p(this,"updateSubscription",async e=>this.cleengService.patch(`/customers/${e.customerId}/subscriptions`,JSON.stringify(e),{authenticate:!0}));p(this,"getPaymentDetails",async e=>this.cleengService.get(`/customers/${e.customerId}/payment_details`,{authenticate:!0}));p(this,"getTransactions",async({customerId:e,limit:r,offset:a})=>this.cleengService.get(Ee(`/customers/${e}/transactions`,{limit:r,offset:a}),{authenticate:!0}));p(this,"fetchReceipt",async({transactionId:e})=>this.cleengService.get(`/receipt/${e}`,{authenticate:!0}));p(this,"updateCardDetails");p(this,"changeSubscription");this.cleengService=e}})||ls)||ls)||ls);const Jd=(s,t)=>{var a;const e=s.menu.find(o=>o.contentId===t);return((a=e==null?void 0:e.filterTags)==null?void 0:a.split(",").filter(Boolean))||[]},Yd=(s,t)=>t===""?s:{...s,playlist:s.playlist.filter(({tags:e})=>e?e.split(",").includes(t):!1)},Jr=(s=15)=>({title:"",playlist:new Array(s).fill({}).map((t,e)=>({description:"",duration:0,feedid:"",image:"",images:[],cardImage:"",backgroundImage:"",channelLogoImage:"",link:"",genre:"",mediaid:`placeholder_${e}`,pubdate:0,rating:"",sources:[],tags:"",title:"",tracks:[]}))}),Kd=(s=[],t=[])=>!s||!t?{}:s==null?void 0:s.reduce((r,a)=>{const o=t==null?void 0:t.find(i=>i.name===a.name);if(o){const i=a.isCustomRegisterField?o.value??"":o.state==="accepted";r[a.name]=i}return r},{}),Qd=(s=[],t=[])=>{if(!s||!t)return{};const e={};return s==null||s.forEach(r=>{t!=null&&t.find(a=>a.name===r.name&&a.state==="accepted")&&(e[r.name]=!0)}),e},Zd=s=>{const t={};return s&&(s==null||s.forEach(e=>{t[e.name]=e.type==="checkbox"?e.enabledByDefault===!0:e.defaultValue??""})),t},Cn=(s,t)=>{const e=[];return!s||!t||s.forEach(r=>{e.push({name:r.name,version:r.version,state:t[r.name]?"accepted":"declined",value:t[r.name]??""})}),e},Xd=(s,t)=>{const e=[],r=[];return!s||!t?{customerConsents:e,consentsErrors:r}:(s.forEach(a=>{a.required&&!t[a.name]&&r.push(a.name),e.push({name:a.name,version:a.version,state:t[a.name]?"accepted":"declined",value:t[a.name]??""})}),{customerConsents:e,consentsErrors:r})},eu=s=>s.value!=="",tu=({name:s,value:t=""},e,r)=>{const a=s==="us_state"?r.find(({name:i,value:c})=>i==="country"&&c==="us")?t==="n/a"?"":t:"n/a":(t===!0||t===!1)&&s!=="terms"?t?"on":"off":t;return[s,a]},Nr=s=>Object.fromEntries(s.filter(eu).map(tu)),qo=s=>Array.isArray(s)||typeof s=="object"&&s!==null?JSON.parse(JSON.stringify(s)):s,uc=s=>{if(typeof s=="string"&&Xl.includes(s))return s},mc=s=>{if(!s)return 0;const t=s.split(":");return t.length===2?Math.floor(parseInt(t[1])/parseInt(t[0])):0};var zo,Go,Jo,ds;const su="https://inplayer.com/legal/terms";let nu=(zo=ve(),Go=Reflect.metadata("design:type",Function),Jo=Reflect.metadata("design:paramtypes",[typeof $e>"u"?Object:$e]),zo(ds=Go(ds=Jo(ds=class extends yt{constructor(e){super({canUpdateEmail:!1,canSupportEmptyFullName:!1,canChangePasswordWithOldPassword:!0,canRenewSubscription:!1,canExportAccountData:!0,canUpdatePaymentMethod:!1,canShowReceipts:!0,canDeleteAccount:!0,hasNotifications:!0,hasSocialURLs:!0,watchListSizeLimit:48});p(this,"storageService");p(this,"clientId","");p(this,"accessModel",Me.AUTHVOD);p(this,"assetId",null);p(this,"svodOfferIds",[]);p(this,"sandbox",!1);p(this,"parseJson",(e,r={})=>{try{return JSON.parse(e)}catch{return r}});p(this,"formatFavorite",e=>({mediaid:e.media_id}));p(this,"formatHistoryItem",e=>({mediaid:e.media_id,progress:e.progress}));p(this,"formatAccount",e=>{const{id:r,uuid:a,email:o,full_name:i,metadata:c,created_at:l}=e,d=new Date(l*1e3).toLocaleString(),u=c==null?void 0:c.first_name,m=c==null?void 0:c.surname;return{id:r.toString(),uuid:a,email:o,fullName:i,firstName:u,lastName:m,metadata:c,regDate:d,country:"",lastUserIp:""}});p(this,"initialize",async(e,r,a)=>{var m;const o=(m=e.integrations)==null?void 0:m.jwp;if(!(o!=null&&o.clientId))throw new Error("Failed to initialize JWP integration. The clientId is missing.");this.sandbox=!!o.useSandbox;const i=this.sandbox?"development":"production";Z.setConfig(i),o.clientId&&(this.clientId=o.clientId),o.assetId&&(this.accessModel=Me.SVOD,this.assetId=o.assetId,this.svodOfferIds=o.assetId?[String(o.assetId)]:[]);const c=new URLSearchParams(r.split("#")[1]),l=c.get("token"),d=c.get("refresh_token"),u=c.get("expires");!l||!d||!u||Z.Account.setToken(l,d,parseInt(u))});p(this,"getAuthData",async()=>{if(Z.Account.isAuthenticated()){const e=Z.Account.getToken().toObject();return{jwt:e.token,refreshToken:e.refreshToken}}return null});p(this,"getPublisherConsents",async()=>{try{const{data:e}=await Z.Account.getRegisterFields(this.clientId),r=e==null?void 0:e.collection.find(({name:o})=>o==="terms"),a=e==null?void 0:e.collection.filter(o=>!["email_confirmation","first_name","surname"].includes(o.name)&&![r].includes(o)).map(o=>({type:o.type,isCustomRegisterField:!0,name:o.name,label:o.label,placeholder:o.placeholder,required:o.required,options:o.options,defaultValue:"",version:"1",...o.type==="checkbox"?{enabledByDefault:o.default_value==="true"}:{defaultValue:o.default_value}}));return r?[this.getTermsConsent(r),...a]:a}catch{throw new Error("Failed to fetch publisher consents.")}});p(this,"getCustomerConsents",async e=>{var r;try{if(!(e!=null&&e.customer))return{consents:[]};const{customer:a}=e;return this.parseJson((r=a.metadata)==null?void 0:r.consents,[])}catch{throw new Error("Unable to fetch Customer consents.")}});p(this,"updateCustomerConsents",async e=>{var r;try{const{customer:a,consents:o}=e,i=this.formatUpdateAccount(a),c={...i,metadata:{...i.metadata,...Nr(o),consents:JSON.stringify(o)}},{data:l}=await Z.Account.updateAccount(c);return this.parseJson((r=l==null?void 0:l.metadata)==null?void 0:r.consents,[])}catch{throw new Error("Unable to update Customer consents")}});p(this,"updateCaptureAnswers",async({customer:e,...r})=>this.updateCustomer({...e,...r}));p(this,"changePasswordWithOldPassword",async e=>{const{oldPassword:r,newPassword:a,newPasswordConfirmation:o}=e;try{await Z.Account.changePassword({oldPassword:r,password:a,passwordConfirmation:o})}catch(i){throw xs(i)?new Error(i.response.data.message):new Error("Failed to change password")}});p(this,"resetPassword",async({customerEmail:e})=>{try{await Z.Account.requestNewPassword({email:e,merchantUuid:this.clientId,brandingId:0})}catch{throw new Error("Failed to reset password.")}});p(this,"login",async({email:e,password:r,referrer:a})=>{var o;try{const{data:i}=await Z.Account.signInV2({email:e,password:r,referrer:a,clientId:this.clientId||""}),c=this.formatAccount(i.account);return{auth:this.formatAuth(i),user:c,customerConsents:this.parseJson((o=c==null?void 0:c.metadata)==null?void 0:o.consents,[])}}catch{throw new Error("Failed to authenticate user.")}});p(this,"register",async({email:e,password:r,referrer:a,consents:o})=>{var i;try{const{data:c}=await Z.Account.signUpV2({email:e,password:r,referrer:a,passwordConfirmation:r,fullName:e,metadata:{first_name:" ",surname:" ",...Nr(o),consents:JSON.stringify(o)},type:"consumer",clientId:this.clientId||""}),l=this.formatAccount(c.account);return{auth:this.formatAuth(c),user:l,customerConsents:this.parseJson((i=l==null?void 0:l.metadata)==null?void 0:i.consents,[])}}catch(c){throw xs(c)?new Error(c.response.data.message):new Error("Failed to create account.")}});p(this,"logout",async()=>{try{Z.Notifications.isSubscribed()&&Z.Notifications.unsubscribe(),Z.Account.isAuthenticated()&&await Z.Account.signOut()}catch{throw new Error("Failed to sign out.")}});p(this,"getUser",async()=>{var e;try{const{data:r}=await Z.Account.getAccountInfo(),a=this.formatAccount(r);return{user:a,customerConsents:this.parseJson((e=a==null?void 0:a.metadata)==null?void 0:e.consents,[])}}catch{throw new Error("Failed to fetch user data.")}});p(this,"updateCustomer",async e=>{try{const r=await Z.Account.updateAccount(this.formatUpdateAccount(e));return this.formatAccount(r.data)}catch{throw new Error("Failed to update user data.")}});p(this,"formatUpdateAccount",e=>{var l,d;const r=((l=e.firstName)==null?void 0:l.trim())||"",a=((d=e.lastName)==null?void 0:d.trim())||"",o=`${r} ${a}`.trim()||e.email,i={...e.metadata,first_name:r,surname:a};return{fullName:o,metadata:i}});p(this,"getCaptureStatus",async({customer:{firstName:e,lastName:r}})=>{const a=(e==null?void 0:e.trim())||"",o=(r==null?void 0:r.trim())||"";return{isCaptureEnabled:!0,shouldCaptureBeDisplayed:!a||!o,settings:[{answer:{firstName:a||null,lastName:o||null},enabled:!0,key:"firstNameLastName",required:!0}]}});p(this,"changePasswordWithResetToken",async e=>{const{resetPasswordToken:r="",newPassword:a,newPasswordConfirmation:o=""}=e;try{await Z.Account.setNewPassword({password:a,passwordConfirmation:o,brandingId:0},r)}catch(i){throw xs(i)?new Error(i.response.data.message):new Error("Failed to change password.")}});p(this,"getTermsConsent",({label:e})=>{const r=`<a href="${e||su}" target="_blank">${we.t("account:registration.terms_and_conditions")}</a>`;return{type:"checkbox",isCustomRegisterField:!0,required:!0,name:"terms",defaultValue:"",label:e?we.t("account:registration.terms_consent",{termsLink:r}):we.t("account:registration.terms_consent_jwplayer",{termsLink:r}),enabledByDefault:!1,placeholder:"",options:{},version:"1"}});p(this,"updateWatchHistory",async({history:e})=>{const r=await this.getWatchHistory(),a=r.map(o=>o.mediaid)||[];await Promise.allSettled(e.map(({mediaid:o,progress:i})=>{if(!a.includes(o)||r.some(c=>c.mediaid==o&&c.progress!=i))return Z.Account.updateWatchHistory(o,i)}))});p(this,"updateFavorites",async({favorites:e})=>{const a=(await this.getFavorites()).map(i=>i.mediaid)||[],o=e.map(i=>i.mediaid);await Promise.allSettled(o.map(i=>a.includes(i)?Promise.resolve():Z.Account.addToFavorites(i))),await Promise.allSettled(a.map(i=>o.includes(i)?Promise.resolve():Z.Account.deleteFromFavorites(i)))});p(this,"getFavorites",async()=>{var r,a;return((a=(r=(await Z.Account.getFavorites()).data)==null?void 0:r.collection)==null?void 0:a.map(this.formatFavorite))||[]});p(this,"getWatchHistory",async()=>{var r,a;return((a=(r=(await Z.Account.getWatchHistory({})).data)==null?void 0:r.collection)==null?void 0:a.map(this.formatHistoryItem))||[]});p(this,"subscribeToNotifications",async({uuid:e,onMessage:r})=>{try{return Z.Notifications.isSubscribed()||Z.subscribe(e,{onMessage:r,onOpen:()=>!0}),!0}catch{return!1}});p(this,"exportAccountData",async()=>{try{return(await Z.Account.exportData({password:void 0,brandingId:0})).data}catch{throw new Error("Failed to export account data")}});p(this,"deleteAccount",async({password:e})=>{try{return(await Z.Account.deleteAccount({password:e,brandingId:0})).data}catch(r){throw xs(r)?new Error(r.response.data.message||"Failed to delete account"):new Error("Failed to delete account")}});p(this,"getSocialUrls",async({redirectUrl:e})=>{const r=this.storageService.base64Encode(JSON.stringify({client_id:this.clientId||"",redirect:e})),a=await Z.Account.getSocialLoginUrls(r);if(a.status!==200)throw new Error("Failed to fetch social urls");return a.data.social_urls});this.storageService=e}formatAuth(e){const{access_token:r}=e;return{jwt:r,refreshToken:""}}})||ds)||ds)||ds);const Yr=s=>s?`${Math.ceil(s/60)} min`:"",hc=s=>{if(!s)return"";const t=Math.floor(s/3600),e=Math.round((s-t*3600)/60),r=t?`${t}hrs `:"",a=e?`${e}min `:"";return`${r}${a}`},tt=(s,t,e)=>new Intl.NumberFormat(e||"en-US",{style:"currency",currency:t}).format(s),$n=(s,t)=>!s&&!t?"":s&&s!=="0"?`S${s}:E${t}`:`E${t}`,ru=(s,t,e)=>t?e?`${kn(t,s,"  ")} - ${pc(e,s)}`:kn(t,s,"  "):"",ft=(s,t)=>new Intl.DateTimeFormat(t,{day:"numeric",month:"long",year:"numeric"}).format(s),pc=(s,t)=>new Intl.DateTimeFormat(t,{hour:"numeric",minute:"numeric"}).format(s),kn=(s,t,e=" ")=>`${ft(s,t)}${e}${pc(s,t)}`,au=s=>tt(s.customerPriceInclTax,s.customerCurrency,s.customerCountry),Kr=s=>{var t;return((t=s.offerId)==null?void 0:t[0])==="S"};var Yo,Ko;let ou=(Yo=ve(),Yo(Ko=class extends As{constructor(){super(...arguments);p(this,"cardPaymentProvider","stripe");p(this,"formatPaymentMethod",(e,r)=>({id:e.id,methodName:e.method_name.toLocaleLowerCase(),provider:r,logoUrl:""}));p(this,"formatEntitlements",(e=0,r=!1)=>({errors:[],responseData:{accessGranted:r,expiresAt:e}}));p(this,"formatOffer",e=>({id:e.id,offerId:this.formatOfferId(e),offerCurrency:e.currency,customerPriceInclTax:e.amount,customerCurrency:e.currency,offerTitle:e.description,active:!0,period:e.access_type.period==="month"&&e.access_type.quantity===12?"year":e.access_type.period,freePeriods:e.trial_period?1:0,planSwitchEnabled:e.item.plan_switch_enabled??!1}));p(this,"formatOrder",e=>({id:e.offer.id,customerId:e.customerId,offerId:e.offer.offerId,totalPrice:e.offer.customerPriceInclTax,priceBreakdown:{offerPrice:e.offer.customerPriceInclTax,discountAmount:e.offer.customerPriceInclTax,discountedPrice:e.offer.customerPriceInclTax,paymentMethodFee:0,taxValue:0},taxRate:0,currency:e.offer.offerCurrency||"EUR",requiredPaymentDetails:!0}));p(this,"createOrder",async e=>({errors:[],responseData:{message:"",order:this.formatOrder(e),success:!0}}));p(this,"getOffers",async e=>(await Promise.all(e.offerIds.map(async a=>{try{const{data:o}=await Z.Asset.getAssetAccessFees(this.parseOfferId(a));return o==null?void 0:o.map(i=>this.formatOffer(i))}catch{throw new Error("Failed to get offers")}}))).flat());p(this,"getPaymentMethods",async()=>{try{const e=await Z.Payment.getPaymentMethods(),r=[];return e.data.forEach(a=>{["card","paypal"].includes(a.method_name.toLowerCase())&&r.push(this.formatPaymentMethod(a,this.cardPaymentProvider))}),{errors:[],responseData:{message:"",paymentMethods:r,status:1}}}catch{throw new Error("Failed to get payment methods")}});p(this,"paymentWithPayPal",async e=>{var r;try{const a=await Z.Payment.getPayPalParams({origin:e.waitingUrl,accessFeeId:e.order.id,paymentMethod:2,voucherCode:e.couponCode});return(r=a.data)!=null&&r.id?{errors:["Already have an active access"],responseData:{redirectUrl:e.errorUrl}}:{errors:[],responseData:{redirectUrl:a.data.endpoint}}}catch{throw new Error("Failed to generate PayPal payment url")}});p(this,"iFrameCardPayment",async()=>({errors:[],responseData:{}}));p(this,"paymentWithoutDetails",async()=>({errors:[],responseData:{}}));p(this,"updateOrder",async({order:e,couponCode:r})=>{try{const a=await Z.Voucher.getDiscount({voucherCode:`${r}`,accessFeeId:e.id}),o=e.totalPrice-a.data.amount,i={...e,totalPrice:a.data.amount,priceBreakdown:{...e.priceBreakdown,discountAmount:o,discountedPrice:o},discount:{applied:!0,type:"coupon",periods:a.data.discount_duration}};return{errors:[],responseData:{message:"successfully updated",order:i,success:!0}}}catch(a){throw xs(a)&&a.response.data.message==="Voucher not found"?new Error("Invalid coupon code"):new Error("An unknown error occurred")}});p(this,"getEntitlements",async({offerId:e})=>{try{const r=await Z.Asset.checkAccessForAsset(this.parseOfferId(e));return this.formatEntitlements(r.data.expires_at,!0)}catch{return this.formatEntitlements()}});p(this,"directPostCardPayment",async(e,r,a,o)=>{const i={number:e.cardNumber.replace(/\s/g,""),cardName:e.cardholderName,expMonth:e.cardExpMonth||"",expYear:e.cardExpYear||"",cvv:e.cardCVC,accessFee:r.id,paymentMethod:1,voucherCode:e.couponCode,referrer:a,returnUrl:o};try{return Kr(r)?await Z.Subscription.createSubscription(i):await Z.Payment.createPayment(i),!0}catch{throw new Error("Failed to make payment")}});p(this,"getSubscriptionSwitches");p(this,"getOrder");p(this,"switchSubscription");p(this,"getSubscriptionSwitch");p(this,"createAdyenPaymentSession");p(this,"initialAdyenPayment");p(this,"finalizeAdyenPayment");p(this,"updatePaymentMethodWithPayPal");p(this,"deletePaymentMethod");p(this,"addAdyenPaymentDetails");p(this,"finalizeAdyenPaymentDetails");p(this,"getOffer")}formatOfferId(e){return["ppv","ppv_custom"].includes(e.access_type.name)?`C${e.item_id}_${e.id}`:`S${e.item_id}_${e.id}`}parseOfferId(e){return typeof e=="string"?e.startsWith("C")||e.startsWith("S")?parseInt(e.slice(1).split("_")[0]):parseInt(e):e}})||Ko);var Qo,Zo,Xo,ei,Bt;let iu=(Qo=ve(),Zo=function(s,t){return bl("JWP")(s,void 0,0)},Xo=Reflect.metadata("design:type",Function),ei=Reflect.metadata("design:paramtypes",[typeof yt>"u"?Object:yt]),Qo(Bt=Zo(Bt=Xo(Bt=ei(Bt=class extends Ls{constructor(e){super();p(this,"accountService");p(this,"formatCardDetails",e=>{const{number:r,exp_month:a,exp_year:o,card_name:i,card_type:c,account_id:l,currency:d}=e,u=`0${a}`.slice(-2);return{id:0,paymentMethodId:0,paymentGateway:"card",paymentMethod:"card",customerId:l.toString(),paymentMethodSpecificParams:{holderName:i,variant:c,lastCardFourDigits:String(r),cardExpirationDate:`${u}/${o}`},active:!0,currency:d}});p(this,"formatTransaction",e=>{var a,o,i;const r=((a=e==null?void 0:e.charged_amount)==null?void 0:a.toString())||"0";return{transactionId:e.transaction_token||we.t("user:payment.access_granted"),transactionDate:e.created_at,trxToken:e.trx_token,offerId:((o=e.item_id)==null?void 0:o.toString())||we.t("user:payment.no_transaction"),offerType:e.item_type||"",offerTitle:(e==null?void 0:e.item_title)||"",offerPeriod:"",transactionPriceExclTax:r,transactionCurrency:e.currency_iso||"EUR",discountedOfferPrice:r,offerCurrency:e.currency_iso||"EUR",offerPriceExclTax:r,applicableTax:"0",transactionPriceInclTax:r,customerId:(i=e.consumer_id)==null?void 0:i.toString(),customerEmail:"",customerLocale:"",customerCountry:"en",customerIpCountry:"",customerCurrency:"",paymentMethod:e.payment_method_name||we.t("user:payment.access_granted")}});p(this,"formatActiveSubscription",(e,r)=>{var o,i;let a="";switch(e.action_type){case"free-trial":a="active_trial";break;case"recurrent":a="active";break;case"canceled":a="cancelled";break;case"incomplete_expired":a="expired";break;default:a="terminated"}return{subscriptionId:e.subscription_id,offerId:(o=e.item_id)==null?void 0:o.toString(),accessFeeId:`S${e.access_fee_id}`,status:a,expiresAt:r,nextPaymentAt:e.next_rebill_date,nextPaymentPrice:e.subscription_price,nextPaymentCurrency:e.currency,paymentGateway:"stripe",paymentMethod:e.payment_method_name,offerTitle:e.item_title,period:(i=e.access_type)==null?void 0:i.period,totalPrice:e.charged_amount,unsubscribeUrl:e.unsubscribe_url,pendingSwitchId:null}});p(this,"formatGrantedSubscription",e=>({subscriptionId:"",offerId:e.item.id.toString(),status:"active",expiresAt:e.expires_at,nextPaymentAt:e.expires_at,nextPaymentPrice:0,nextPaymentCurrency:"EUR",paymentGateway:"none",paymentMethod:we.t("user:payment.access_granted"),offerTitle:e.item.title,period:"granted",totalPrice:0,unsubscribeUrl:"",pendingSwitchId:null}));p(this,"getActiveSubscription",async()=>{var r;const e=this.accountService.assetId;if(e===null)throw new Error("Couldn't fetch active subscription, there is no assetId configured");try{const a=await Z.Asset.checkAccessForAsset(e);if(a){const{data:o}=await Z.Subscription.getSubscriptions(),i=o.collection.find(c=>c.item_id===e);return i?this.formatActiveSubscription(i,(r=a==null?void 0:a.data)==null?void 0:r.expires_at):this.formatGrantedSubscription(a.data)}return null}catch(a){if(xs(a)&&a.response.data.code===402)return null;throw new Error("Unable to fetch customer subscriptions.")}});p(this,"getAllTransactions",async()=>{var e;try{const{data:r}=await Z.Payment.getPaymentHistory();return(e=r==null?void 0:r.collection)==null?void 0:e.map(a=>this.formatTransaction(a))}catch{throw new Error("Failed to get transactions")}});p(this,"getActivePayment",async()=>{var e;try{const{data:r}=await Z.Payment.getDefaultCreditCard(),a=[];for(const o in r==null?void 0:r.cards)a.push(this.formatCardDetails({...(e=r.cards)==null?void 0:e[o],currency:o}));return a.find(o=>o.active)||null}catch{return null}});p(this,"getSubscriptions",async()=>({errors:[],responseData:{items:[]}}));p(this,"updateSubscription",async({offerId:e,unsubscribeUrl:r})=>{if(!r)throw new Error("Missing unsubscribe url");try{return await Z.Subscription.cancelSubscription(r),{errors:[],responseData:{offerId:e,status:"cancelled",expiresAt:0}}}catch{throw new Error("Failed to update subscription")}});p(this,"changeSubscription",async({accessFeeId:e,subscriptionId:r})=>{try{const a=await Z.Subscription.changeSubscriptionPlan({access_fee_id:parseInt(e),inplayer_token:r});return{errors:[],responseData:{message:a.data.message}}}catch{throw new Error("Failed to change subscription")}});p(this,"updateCardDetails",async({cardName:e,cardNumber:r,cvc:a,expMonth:o,expYear:i,currency:c})=>{try{const l=await Z.Payment.setDefaultCreditCard({cardName:e,cardNumber:r,cvc:a,expMonth:o,expYear:i,currency:c});return{errors:[],responseData:l.data}}catch{throw new Error("Failed to update card details")}});p(this,"fetchReceipt",async({transactionId:e})=>{try{const{data:r}=await Z.Payment.getBillingReceipt({trxToken:e});return{errors:[],responseData:r}}catch{throw new Error("Failed to get billing receipt")}});p(this,"getPaymentDetails");p(this,"getTransactions");this.accountService=e}})||Bt)||Bt)||Bt)||Bt);var ti,si,ni,us;let cu=(ti=ve(),si=Reflect.metadata("design:type",Function),ni=Reflect.metadata("design:paramtypes",[typeof $e>"u"?Object:$e]),ti(us=si(us=ni(us=class extends zr{constructor(e){super();p(this,"storageService");p(this,"listProfiles",async()=>{try{return{canManageProfiles:!0,collection:(await Z.Account.getProfiles()).data.map(r=>({...r,avatar_url:(r==null?void 0:r.avatar_url)||lc}))??[]}}catch{return console.error("Unable to list profiles."),{canManageProfiles:!1,collection:[]}}});p(this,"createProfile",async e=>(await Z.Account.createProfile(e.name,e.adult,e.avatar_url,e.pin)).data);p(this,"updateProfile",async e=>{if(!e.id)throw new Error("Profile id is required.");return(await Z.Account.updateProfile(e.id,e.name,e.avatar_url,e.adult)).data});p(this,"enterProfile",async({id:e,pin:r})=>{try{const o=(await Z.Account.enterProfile(e,r)).data;if(o){const i=JSON.stringify({expires:o.credentials.expires,token:o.credentials.access_token,refreshToken:""});await this.storageService.setItem("inplayer_token",i,!1)}return o}catch{throw new Error("Unable to enter profile.")}});p(this,"getProfileDetails",async({id:e})=>{try{return(await Z.Account.getProfileDetails(e)).data}catch{throw new Error("Unable to get profile details.")}});p(this,"deleteProfile",async({id:e})=>{try{return await Z.Account.deleteProfile(e),{message:"Profile deleted successfully",code:200}}catch{throw new Error("Unable to delete profile.")}});this.storageService=e}})||us)||us)||us);const lu=s=>s.container.get(Gr).getIntegrationType(),du=s=>{var t,e;return(e=(t=s.integrations)==null?void 0:t.cleeng)!=null&&e.id?At.CLEENG:null},uu=s=>{var t,e;return(e=(t=s.integrations)==null?void 0:t.jwp)!=null&&e.clientId?At.JWP:null};me.bind(jn).toSelf();me.bind(kr).toSelf();me.bind(Er).toSelf();me.bind(ic).toSelf();me.bind(He).toSelf();me.bind(Sn).toSelf();me.bind(Gr).toSelf();me.bind(Zs).toSelf();me.bind(Cs).toSelf();me.bind(dc).toSelf();me.bind(_e).toSelf();me.bind(vt).toSelf();me.bind(Xt).toSelf();me.bind(rn).to(Rd).whenTargetNamed(Br.jwp);me.bind(rn).to(Fd).whenTargetNamed(Br.viewNexa);me.bind(Ns).toDynamicValue(lu);me.bind(Hr).toConstantValue(du);me.bind(es).toSelf();me.bind(yt).to(qd).whenTargetNamed(At.CLEENG);me.bind(As).to(zd).whenTargetNamed(At.CLEENG);me.bind(Ls).to(Gd).whenTargetNamed(At.CLEENG);me.bind(Hr).toConstantValue(uu);me.bind(cc).toSelf();me.bind(yt).to(nu).whenTargetNamed(At.JWP);me.bind(As).to(ou).whenTargetNamed(At.JWP);me.bind(Ls).to(iu).whenTargetNamed(At.JWP);me.bind(zr).to(cu).whenTargetNamed(At.JWP);var ri,ai;let mu=(ri=ve(),ri(ai=class extends $e{constructor(){super(...arguments);p(this,"prefix","jwapp")}initialize(e){this.prefix=e}getStorageKey(e){return`${this.prefix}.${e}`}async getItem(e,r){try{const a=window.localStorage.getItem(this.getStorageKey(e));return a&&r?JSON.parse(a):a}catch(a){console.error(a)}}async setItem(e,r,a=!0){try{window.localStorage.setItem(a?this.getStorageKey(e):e,r)}catch(o){console.error(o)}}async removeItem(e){try{window.localStorage.removeItem(this.getStorageKey(e))}catch(r){console.error(r)}}base64Encode(e){return window.btoa(e)}base64Decode(e){return window.atob(e)}})||ai);me.bind($e).to(mu);me.bind(nn).toConstantValue(async()=>void 0);const fc=new jl({defaultOptions:{queries:{staleTime:60*60*1e3,refetchOnWindowFocus:!1,retryOnMount:!1}}});function hu({children:s}){return n.jsx(Sl,{client:fc,children:s})}const pu="_errorPage_1k9zf_1",fu="_box_1k9zf_17",gu="_title_1k9zf_22",_u="_message_1k9zf_29",yu="_main_1k9zf_33",vu="_logo_1k9zf_47",xu="_links_1k9zf_51",wu="_stack_1k9zf_55",bu="_image_1k9zf_60",ms={errorPage:pu,box:fu,title:gu,message:_u,main:yu,logo:vu,links:xu,stack:wu,image:bu},Ze=({title:s,message:t,learnMoreLabel:e,...r})=>{const{t:a}=A("error");return n.jsx(gc,{title:s||a("generic_error_heading"),message:t||a("generic_error_description"),learnMoreLabel:e||a("learn_more"),...r})},gc=({title:s,children:t,message:e,learnMoreLabel:r,error:a,helpLink:o})=>{const i=K(l=>{var d,u;return(u=(d=l.config)==null?void 0:d.assets)==null?void 0:u.banner});return n.jsx("div",{className:ms.errorPage,children:n.jsxs("div",{className:ms.box,children:[n.jsx("img",{className:ms.image,src:i||"/images/logo.png",alt:""}),n.jsx("h1",{className:ms.title,"aria-live":"polite",children:s||"An error occurred"}),n.jsxs("div",{className:ms.main,children:[n.jsx("p",{className:ms.message,children:e||"Try refreshing this page or come back later."}),t,Rr]})]})})},ju="_buffer_rrxgr_1",Su="_small_rrxgr_20",Cu="_large_rrxgr_30",Qn={buffer:ju,small:Su,large:Cu},ss=({size:s="medium",className:t=""})=>n.jsxs("div",{className:B(Qn.buffer,t,{[Qn.small]:s==="small",[Qn.large]:s==="large"}),children:[n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{})]}),Pu="_loadingOverlay_1vith_1",ku="_fixed_1vith_7",Eu="_transparent_1vith_17",Nu="_inline_1vith_21",Iu="_profile_1vith_30",Bs={loadingOverlay:Pu,fixed:ku,transparent:Eu,inline:Nu,profile:Iu},ye=({transparentBackground:s=!1,inline:t=!1,profileImageUrl:e=""})=>{const r=B(Bs.loadingOverlay,{[Bs.transparent]:s,[Bs.fixed]:!t,[Bs.inline]:t,[Bs.profile]:e});return n.jsxs("div",{className:r,children:[e&&n.jsx("img",{src:e,alt:"Profile Avatar"}),n.jsx(ss,{size:e?"large":"medium"})]})},Au="_formFeedback_1hyv5_1",Lu="_info_1hyv5_11",Tu="_error_1hyv5_16",$u="_warning_1hyv5_21",Ou="_success_1hyv5_26",Rs={formFeedback:Au,info:Lu,error:Tu,warning:$u,success:Ou},Du={info:"polite",success:"assertive",warning:"polite",error:"assertive"},Ae=({children:s,variant:t="error",visible:e=!0})=>{const r=B(Rs.formFeedback,{[Rs.error]:t==="error",[Rs.warning]:t==="warning",[Rs.success]:t==="success",[Rs.info]:t==="info",hidden:!e}),a=Du[t];return n.jsx("div",{"aria-live":a,className:r,children:s})},_c=h.createContext(void 0),Ge=()=>{const s=h.useContext(_c);if(!s)throw new Error("Announcer context is not defined");return s.announce},Fu=({children:s})=>{const[t,e]=h.useState(null),r=h.useCallback((a,o,i=Cl(10))=>{e({message:a,variant:o}),setTimeout(()=>{e(null)},i)},[]);return n.jsxs(_c.Provider,{value:{announce:r},children:[t&&dl.createPortal(n.jsx(Ae,{variant:t.variant,visible:!1,children:t.message}),document.body),s]})};function TS(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const Mu=(s,t)=>t.reduce((e,r)=>{const a=s.find(({code:o})=>o===r);if(a)return[...e,a];throw new Error(`Missing defined language for code: ${r}`)},[]),Bu=["account","common","country","demo","epg","error","menu","search","us_state","user","video"],Ru=[{code:"en",displayName:"English"},{code:"es",displayName:"Espaol"}],Hu=async()=>{const s="en,es".split(",")||[],t="en",e=Mu(Ru,s);if(K.setState({supportedLanguages:e}),!e.some(({code:r})=>r===t))throw new Error(`The default language is not enabled: ${t}`);await we.use(Pl).use(kl).use(El).init({supportedLngs:e.map(({code:r})=>r),fallbackLng:t,returnEmptyString:!1,ns:Bu,defaultNS:"common",fallbackNS:"common",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"jwapp.language"},react:{useSuspense:!1}})},On=(s,t={})=>Ee(`${s.pathname}${s.search||""}`,t),J=(s,t,e)=>Ee(`${s.pathname}${s.search||""}`,{u:t,...e}),Et=(s,t)=>Ee(window.location.href,{u:s,...t}),xe=s=>{const t=h.useRef(()=>{throw new Error("Callback called in render")});return h.useLayoutEffect(()=>{t.current=s},[s]),h.useCallback((...e)=>{if(typeof t.current=="function")return t.current(...e)},[])};function Be(s){const[t]=en();return t.get(s)}const Uu=(s,t=1,e)=>{const r=h.useRef(),[a,o]=h.useState(s);return h.useEffect(()=>{if(window.clearTimeout(r.current),a===0){e&&e();return}return r.current=window.setTimeout(()=>{o(i=>i-t)},t*1e3),()=>{window.clearTimeout(r.current)}},[e,a,t]),a},Wu="_button_1h3d0_1",Vu="_disabled_1h3d0_21",qu="_small_1h3d0_33",zu="_large_1h3d0_36",Gu="_primary_1h3d0_46",Ju="_outlined_1h3d0_53",Yu="_active_1h3d0_56",Ku="_text_1h3d0_62",Qu="_danger_1h3d0_77",Zu="_fullWidth_1h3d0_87",Xu="_startIcon_1h3d0_101",em="_hidden_1h3d0_119",tm="_centerAbsolute_1h3d0_123",at={button:Wu,disabled:Vu,small:qu,large:zu,default:"_default_1h3d0_39",primary:Gu,outlined:Ju,active:Yu,text:Ku,danger:Qu,delete:"_delete_1h3d0_82",fullWidth:Zu,startIcon:Xu,hidden:em,centerAbsolute:tm},D=({label:s,children:t,color:e="default",startIcon:r,fullWidth:a=!1,active:o=!1,variant:i="outlined",size:c="medium",disabled:l,busy:d,type:u="button",to:m,onClick:g,className:_,activeClassname:f="",...y})=>{const w=v=>B(at.button,_,at[e],at[i],{[at.active]:v,[f]:v,[at.fullWidth]:a,[at.large]:c==="large",[at.small]:c==="small",[at.disabled]:l}),x=n.jsxs(n.Fragment,{children:[r&&n.jsx("div",{className:at.startIcon,children:r}),n.jsx("span",{className:B({[at.hidden]:d})||void 0,children:s}),t,d&&n.jsx(ss,{className:at.centerAbsolute,size:"small"})]});return m?n.jsx(Wi,{className:({isActive:v})=>w(v),to:m,...y,end:!0,children:x}):n.jsx("button",{className:w(o),onClick:l?void 0:g,type:u,"aria-disabled":l,...y,children:x})},sm="_welcome_v7d1f_1",nm={welcome:sm},rm=({onCloseButtonClick:s,onCountdownCompleted:t,siteName:e})=>{const{t:r}=A("account"),a=Uu(10,1,t);return n.jsxs("div",{className:nm.welcome,children:[n.jsx("h2",{children:r("checkout.welcome_title",{siteName:e})}),n.jsx("p",{children:r("checkout.welcome_description",{siteName:e})}),n.jsx(D,{variant:"contained",color:"primary",label:r("checkout.start_watching",{countdown:a}),onClick:s,size:"large",fullWidth:!0})]})},am="_title_82pz9_1",om="_message_82pz9_6",oi={title:am,message:om},ii=({type:s,message:t,onCloseButtonClick:e})=>{const{t:r}=A("account");return n.jsxs("div",{children:[n.jsx("h2",{className:oi.title,children:r(s==="cancelled"?"checkout.payment_cancelled":"checkout.payment_error")}),n.jsx("p",{className:oi.message,children:s==="cancelled"?r("checkout.payment_cancelled_message"):t}),n.jsx("div",{children:n.jsx(D,{label:r("checkout.close"),onClick:e,color:"primary",variant:"contained",size:"large",fullWidth:!0})})]})},Qr=({className:s,createStyle:t,open:e=!0,duration:r=250,delay:a=0,onOpenAnimationEnd:o,onCloseAnimationEnd:i,keepMounted:c=!1,children:l})=>{const[d,u]=h.useState("closed"),[m,g]=h.useState(!1),_=h.useRef(),f=h.useRef(),y=xe(()=>{g(!0),_.current=window.setTimeout(()=>u("opening"),a),f.current=window.setTimeout(()=>{u("open"),o&&o()},r+a)}),w=xe(()=>{m&&(_.current=window.setTimeout(()=>u("closing"),a),f.current=window.setTimeout(()=>{u("closed"),i&&i()},r+a))});return h.useEffect(()=>(e?y():w(),()=>{clearTimeout(_.current),clearTimeout(f.current)}),[e,y,w]),!e&&d==="closed"&&!c?null:n.jsx("div",{style:t(d),className:s,children:l})},im=({open:s=!0,duration:t=250,delay:e=0,onOpenAnimationEnd:r,onCloseAnimationEnd:a,children:o,className:i})=>{const l=`transform ${t/1e3}s ease-out`,d=u=>({transition:l,transform:u==="opening"||u==="open"?"scale(1)":"scale(0.7)"});return n.jsx(Qr,{createStyle:u=>d(u),open:s,duration:t,delay:e,onOpenAnimationEnd:r,onCloseAnimationEnd:a,className:i,children:o})},cm=!!(typeof window<"u"&&window.document&&window.document.createElement);let hn;function lm(s){if((!hn&&hn!==0||s)&&cm){const t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),hn=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return hn}const yc=s=>new Promise(t=>{const e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=s,e.onload=()=>t(),e.onerror=r=>{throw console.info("Error loading external script",r),new Error("Error loading external script")},document.body.appendChild(e)}),dm=()=>{document.body.style.marginRight=`${lm(!0)}px`,document.body.style.overflowY="hidden"},ci=()=>{Array.from(document.querySelectorAll("dialog")).filter(e=>e.open).length||(document.body.style.removeProperty("margin-right"),document.body.style.removeProperty("overflow-y"))};let Hs;const um=()=>{const s=h.useCallback(()=>{if(!Hs||document.activeElement!==document.body)return;Array.from(document.querySelectorAll("dialog")).filter(o=>o.open).length===0&&(Hs.focus(),Hs=void 0)},[]);h.useEffect(()=>()=>{ci(),s()},[s]);const t=h.useCallback(()=>{Hs||(Hs=document.activeElement),dm()},[]),e=h.useCallback(()=>{s(),ci()},[s]);return{handleOpen:t,handleClose:e}},mm="_centered_evruy_15",hm="_close_evruy_21",pn={centered:mm,close:hm,"fade-out":"_fade-out_evruy_1","fade-in":"_fade-in_evruy_1"},Dn=({open:s,onClose:t,children:e,className:r,centered:a,role:o,AnimationComponent:i=im,animationContainerClassName:c,...l})=>{const d=h.useRef(),{handleOpen:u,handleClose:m}=um(),g=xe(()=>{var b;const v=()=>{var S,j;(S=d.current)==null||S.classList.remove(pn.close),(j=d.current)==null||j.removeEventListener("animationend",v)};(b=d.current)!=null&&b.open&&(d.current.addEventListener("animationend",v),d.current.classList.add(pn.close))}),_=xe(()=>{var v,b;u(),(v=d.current)==null||v.showModal(),(b=d.current)==null||b.classList.remove(pn.close)}),f=v=>{v.key==="Escape"&&d.current.contains(v.target)&&(v.preventDefault(),t==null||t())},y=v=>{d.current.contains(v.target)&&(t==null||t(),m())},w=()=>{var v;(v=d.current)==null||v.close()};h.useEffect(()=>{s?_():g()},[_,g,s]);const x=v=>{v.target===d.current&&(t==null||t(),m())};return ul.createPortal(n.jsx("dialog",{className:B(r,{[pn.centered]:a}),onKeyDown:f,onClose:y,onClick:x,ref:d,role:o,...l,children:n.jsx(i,{open:s,duration:300,className:c,onCloseAnimationEnd:w,children:e})}),document.querySelector("body"))},Zr=({open:s=!0,duration:t=250,delay:e=0,onOpenAnimationEnd:r,onCloseAnimationEnd:a,children:o,direction:i="top",style:c={}})=>{const l=t/1e3,d=`transform ${l}s ease, opacity ${l}s ease`,u={left:"translate(-15px, 0)",top:"translate(0, -15px)",right:"translate(15px, 0)",bottom:"translate(0, 15px)"},m=g=>({transition:d,transform:g==="opening"||g==="open"?"translate(0, 0)":u[i],opacity:g==="opening"||g==="open"?1:0,zIndex:15,...c});return n.jsx(Qr,{createStyle:g=>m(g),open:s,duration:t,delay:e,onOpenAnimationEnd:r,onCloseAnimationEnd:a,children:o})},Fn=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),pm="_iconButton_12yfl_1",fm={iconButton:pm},We=({children:s,onClick:t,className:e,...r})=>n.jsx("button",{className:B(fm.iconButton,e),type:"button",onClick:t,...r,children:s}),gm="_icon_1t43k_1",_m="_profileIcon_1t43k_7",ym={icon:gm,profileIcon:_m},Y=({icon:s,className:t})=>n.jsx(s,{className:B(ym.icon,t),"aria-hidden":"true"}),vm="_modalCloseButton_1qofm_1",xm="_hidden_1qofm_15",li={modalCloseButton:vm,hidden:xm},vc=({onClick:s,visible:t=!0})=>{const{t:e}=A("common");return n.jsx(We,{onClick:s,"aria-label":e("close_modal"),className:B(li.modalCloseButton,{[li.hidden]:!t}),children:n.jsx(Y,{icon:Fn})})},wm="_dialog_1ha9n_1",bm="_small_1ha9n_16",jm="_large_1ha9n_20",di={dialog:wm,small:bm,large:jm},Mn=({open:s,onClose:t,children:e,size:r="small",role:a,...o})=>n.jsx(Dn,{open:s,onClose:t,AnimationComponent:Zr,role:a,centered:!0,children:n.jsxs("div",{className:B(di.dialog,di[r]),"data-testid":void 0,...o,children:[e,n.jsx(vc,{onClick:t})]})});function ut({initialValues:s,validationSchema:t,validateOnBlur:e=!1,onSubmit:r,onSubmitSuccess:a,onSubmitError:o}){const{t:i}=A("error"),[c,l]=h.useState(Object.fromEntries(Object.keys(s).map(P=>[P,!1]))),[d,u]=h.useState(s),[m,g]=h.useState(!1),[_,f]=h.useState({}),[y,w]=h.useState(!1),x=h.useCallback(()=>{u(s),f({}),w(!1),g(!1),l(Object.fromEntries(Object.keys(s).map(P=>[P,!1])))},[s]),v=(P,k)=>{if(t)try{t.validateSyncAt(P,k),f(N=>({...N,[P]:null}))}catch(N){if(N instanceof Ca){const T=N.errors[0];f(O=>({...O,[P]:T})),w(!0)}}},b=h.useCallback((P,k)=>{u(N=>({...N,[P]:k}))},[]),S=P=>{const k=P.target.name,N=P.target instanceof HTMLInputElement&&P.target.type==="checkbox"?P.target.checked:P.target.value,T={...d,[k]:N};u(T),l(O=>({...O,[k]:N})),_[k]&&v(k,T)},j=P=>{!e||!c[P.target.name]||v(P.target.name,d)},C=P=>{try{return P.validateSync(d,{abortEarly:!1}),!0}catch(k){if(k instanceof Ca){const N={};for(let T=0;T<k.inner.length;T++){const O=k.inner[T].path,H=k.inner[T].errors[0];O&&H&&!N[O]&&(N[O]=H)}k.inner.every(T=>T.type==="required")?N.form=i("validation_form_error.required"):N.form=i("validation_form_error.other"),f(N)}}return!1};return{values:d,errors:_,validationSchemaError:y,handleChange:S,handleBlur:j,handleSubmit:async P=>{if(P.preventDefault(),!(!r||m)){if(f({}),w(!1),t&&!C(t)){w(!0);return}g(!0);try{await r(d,{setValue:b,setErrors:f,setSubmitting:g,setValidationSchemaError:w,validate:C}),a==null||a(d)}catch(k){const N={};k instanceof Je?Object.entries(k.errors).forEach(([T,O])=>{T&&O&&!N[T]&&(N[T]=O.join(","))}):k instanceof Error?N.form=k.message:N.form=i("unknown_error"),f(N),o==null||o({error:k,resetValue:T=>b(T,"")})}g(!1)}},submitting:m,setValue:b,setErrors:f,setSubmitting:g,setValidationSchemaError:w,reset:x}}const Xr=(s=!1)=>{const[t,e]=h.useState(s);return[t,a=>e(o=>typeof a<"u"?a:!o)]},ea=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"})),ta=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"})),ui=(s,t)=>{const e=Math.random()*1e4;return[s,Math.round(e),t].filter(Boolean).join("_").replace(/[\s.]+/g,"_").toLowerCase()},rt=(s,t,e)=>{const[r,a]=h.useState(e||ui(s,t));return h.useEffect(()=>{a(e||ui(s,t))},[e,s,t]),r},Sm="_helperText_1u6a3_1",Cm="_error_1u6a3_6",mi={helperText:Sm,error:Cm},Pm=({children:s,className:t,error:e,id:r})=>{const a=rt("helper_text",void 0,r);return s?n.jsx("div",{id:a,className:B(mi.helperText,{[mi.error]:e},t),children:s}):null},km="_formField_130lt_1",Em="_label_130lt_6",hi={formField:km,label:Em},an=({className:s,renderInput:t,required:e,label:r,error:a,helperText:o,testId:i,editing:c=!0,name:l})=>{const d=B(hi.formField,s),u=rt("text-field",l),m=rt("helper_text",l);return n.jsxs("div",{className:d,"data-testid":i,children:[!!r&&n.jsxs("label",{htmlFor:u,className:hi.label,children:[r,e&&c?n.jsx("span",{"aria-hidden":"true",children:"*"}):null]}),t({helperTextId:m,id:u}),c&&n.jsx(Pm,{id:m,error:a,children:o})]})},Nm="_container_bm5y7_1",Im="_error_bm5y7_10",Am="_disabled_bm5y7_13",Lm="_leftControl_bm5y7_16",Tm="_input_bm5y7_16",$m="_rightControl_bm5y7_19",Om="_control_bm5y7_31",Rt={container:Nm,error:Im,disabled:Am,leftControl:Lm,input:Tm,rightControl:$m,control:Om},Dm=(s,t)=>!!t,Fm=({required:s,className:t,disabled:e,editing:r=!0,value:a,id:o,name:i,multiline:c,error:l,helperTextId:d,type:u,textAreaRef:m,inputRef:g,leftControl:_,rightControl:f,...y})=>{const w=u||"text",x=B(Rt.container,{[Rt.error]:l,[Rt.disabled]:e,[Rt.leftControl]:!!_,[Rt.rightControl]:!!f},t),v={"aria-required":!!s,"aria-invalid":!!(s&&l&&a!==""),"aria-describedby":d},b={id:o,name:i,value:a,disabled:e,rows:c?3:void 0,className:Rt.input,readOnly:!r,required:s,...v,...y},S=Dm(b,c)?n.jsx("textarea",{...b,ref:m}):n.jsx("input",{...b,type:w,ref:g});return r?n.jsxs("div",{className:x,children:[_?n.jsx("div",{className:Rt.control,children:_}):null,S,f?n.jsx("div",{className:Rt.control,children:f}):null]}):S},Mm="_textField_cksfq_1",Bm={textField:Mm},pe=({className:s,helperText:t,label:e,error:r,required:a,editing:o=!0,testId:i,name:c,...l})=>n.jsx(an,{className:B(Bm.textField,s),error:r,helperText:t,label:e,required:a,editing:o,testId:i,name:c,renderInput:d=>n.jsx(Fm,{editing:o,error:r,name:c,required:a,...d,...l})}),Rm="_passwordStrength_1od1i_1",Hm="_passwordStrengthFill_1od1i_9",Um="_label_1od1i_13",Wm="_passwordStrengthBar_1od1i_38",fn={passwordStrength:Rm,passwordStrengthFill:Hm,label:Um,passwordStrengthBar:Wm},Vm=/^(?=.*[a-z])(?=.*[0-9]).{8,}$/,qm=({password:s})=>{const{t}=A("account"),r=(o=>{let i=0;return o.match(Vm)&&(o.match(/[A-Z]+/)&&(i+=1),o.match(/(\d.*\d)/)&&(i+=1),o.match(/[!,@#$%^&*?_~]/)&&(i+=1),o.match(/([!,@#$%^&*?_~].*[!,@#$%^&*?_~])/)&&(i+=1)),i})(s),a=[t("registration.password_strength.invalid"),t("registration.password_strength.weak"),t("registration.password_strength.fair"),t("registration.password_strength.strong"),t("registration.password_strength.very_strong")];return r?n.jsxs("div",{className:fn.passwordStrength,"data-strength":r,children:[n.jsx("div",{className:fn.passwordStrengthBar,children:n.jsx("div",{className:fn.passwordStrengthFill})}),n.jsx("span",{className:"hidden",children:t("registration.password_strength_prefix")})," ",n.jsx("span",{className:fn.label,children:a[r]})]}):null},Ys=({value:s,showToggleView:t=!0,helperText:e,showHelperText:r=!0,...a})=>{const{t:o}=A("account"),[i,c]=Xr();return n.jsx(pe,{...a,helperText:e??(r?n.jsxs(Ne.Fragment,{children:[n.jsx(qm,{password:s||""}),o("reset.password_helper_text")]}):null),type:i?"text":"password",rightControl:t?n.jsx(We,{"aria-label":o("reset.view_password"),onClick:()=>c(),"aria-pressed":i,children:n.jsx(Y,{icon:i?ea:ta})}):null,required:!0})},zm="_heading_1ungm_1",Gm="_paragraph_1ungm_7",Jm="_disclaimer_1ungm_11",Ym="_buttons_1ungm_25",Km="_stacked_1ungm_34",Qm="_warningBox_1ungm_40",Ht={heading:zm,paragraph:Gm,disclaimer:Jm,buttons:Ym,stacked:Km,warningBox:Qm},Zm=()=>{const s=V(_e),{t}=A("user"),e=Ge(),r=Be("u"),[a,o]=h.useState(""),i=le(),c=ue(),{handleSubmit:l,handleChange:d,values:u,errors:m,setErrors:g,reset:_}=ut({initialValues:{password:""},validationSchema:ce().shape({password:F().required(t("login.field_required"))}),onSubmit:w=>{o(w.password),i(J(c,"delete-account-confirmation"),{replace:!0})}}),f=Ye(s.deleteAccountData,{onSuccess:async()=>{i("/"),await s.logout(),e(t("account.delete_account.success"),"success")},onError:w=>{w instanceof Je&&(g(w.errors),i(J(c,"delete-account"),{replace:!0})),o("")}});h.useEffect(()=>{r==="delete-account-confirmation"&&!a&&i(J(c,"delete-account"),{replace:!0})},[c,r,i,a,f,_]);const y=h.useCallback(()=>{i(J(c,null),{replace:!0})},[c,i]);return a?n.jsxs("div",{children:[n.jsx("h2",{className:Ht.heading,children:t("account.delete_account.title")}),n.jsxs("div",{className:Ht.disclaimer,children:[n.jsx("p",{children:t("account.delete_account.modal.text_data_erasure")}),n.jsx("p",{children:t("account.delete_account.modal.text_revoked_access")}),n.jsx("div",{className:Ht.warningBox,children:n.jsx("p",{children:t("account.delete_account.modal.warning")})}),n.jsxs("p",{children:[t("account.delete_account.modal.text_cant_be_undone")," ",n.jsx("br",{}),t("account.delete_account.modal.text_contacts")]})]}),n.jsxs("div",{className:Ht.buttons,children:[n.jsx(D,{disabled:f.isLoading,variant:"text",label:t("account.cancel"),onClick:y}),n.jsx(D,{disabled:f.isLoading,variant:"delete",label:t("account.delete_account.title"),onClick:()=>{f.mutate(a)}})]})]}):n.jsxs("form",{onSubmit:l,children:[n.jsx("h2",{className:Ht.heading,children:t("account.delete_account.title")}),n.jsx("p",{className:Ht.paragraph,children:t("account.delete_account.modal.description")}),m.form&&n.jsx(Ae,{variant:"error",children:m.form}),n.jsx(Ys,{value:u.password,onChange:d,label:t("account.password"),placeholder:t("account.delete_account.modal.placeholder"),error:!!m.password||!!m.form,helperText:m.password,name:"password",showHelperText:!1}),n.jsxs("div",{className:B(Ht.buttons,Ht.stacked),children:[n.jsx(D,{type:"submit",color:"primary",label:t("account.continue"),fullWidth:!0}),n.jsx(D,{type:"button",onClick:y,variant:"text",label:t("account.cancel"),fullWidth:!0})]})]})},Xm="_container_lkpac_1",eh="_title_lkpac_7",pi={container:Xm,title:eh},th=()=>{const s=V(_e),t=V(vt),{t:e}=A("account"),r=Ge(),a=le(),o=ue(),{accessModel:i}=K(({accessModel:f})=>({accessModel:f})),[c]=en(),l=c.get("redirectResult"),d=c.get("orderId"),[u,m]=h.useState(),g=h.useMemo(()=>J(o,i===Me.SVOD?"welcome":null),[i,o]),_=xe(async f=>{const y=d?parseInt(d,10):void 0;try{await t.finalizeAdyenPayment({redirectResult:decodeURI(f)},y),await s.reloadSubscriptions({retry:10}),r(e("checkout.payment_success"),"success"),a(g)}catch(w){w instanceof Error&&m(w.message)}});return h.useEffect(()=>{l&&_(l)},[_,l]),n.jsx("div",{className:pi.container,children:u?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:pi.title,children:u}),n.jsx(D,{label:e("checkout.go_back_to_checkout"),variant:"contained",color:"primary",size:"large",onClick:()=>a(J(o,"checkout")),fullWidth:!0})]}):n.jsx("div",{children:n.jsx(ss,{})})})},sh=()=>{const s=V(_e),t=V(vt),e=h.useRef(),[r,a]=h.useState(null),{t:o}=A("user"),i=t.getSubscriptionOfferIds(),c=h.useCallback(({interval:l=3e3,iterations:d=5,offerId:u=i==null?void 0:i[0],callback:m})=>{if(!u){m==null||m({hasAccess:!1,offerId:""});return}e.current=window.setInterval(async()=>{await s.checkEntitlements(u)?(window.clearInterval(e.current),await s.reloadSubscriptions(),m==null||m({hasAccess:!0,offerId:u||""})):--d===0&&(window.clearInterval(e.current),a(o("payment.longer_than_usual")),m==null||m({hasAccess:!1,offerId:u||""}))},l)},[i,o,s]);return h.useEffect(()=>()=>{window.clearInterval(e.current)},[]),{intervalCheckAccess:c,errorMessage:r}},nh="_center_153q1_1",rh={center:nh},ah=()=>{const{t:s}=A("account"),t=Be("offerId")||void 0,e=ue(),r=le(),a=Ge(),{intervalCheckAccess:o,errorMessage:i}=sh();return h.useEffect(()=>{o({interval:3e3,iterations:5,offerId:t,callback:({hasAccess:c,offerId:l})=>{c&&(a(s("checkout.payment_success"),"success"),l.startsWith("C")||l.startsWith("P")?r(J(e,null)):r(J(e,"welcome")))}})},[]),n.jsx("div",{className:rh.center,children:i?n.jsx("h2",{children:i}):n.jsxs(n.Fragment,{children:[n.jsx(ss,{}),n.jsx("h2",{children:s("checkout.waiting_for_payment")})]})})},oh="_title_1edbn_1",ih="_message_1edbn_8",fi={title:oh,message:ih},Zn=({type:s,onCloseButtonClick:t})=>{const{t:e}=A("account"),r=Ge(),a=e(`checkout.upgrade_${s}`),o=e(`checkout.upgrade_${s}_message`);return h.useEffect(()=>{const i={error:"error",success:"succes",pending:"info"}[s];r(o,i)},[r,o,s]),n.jsxs("div",{children:[n.jsx("h2",{className:fi.title,children:a}),n.jsx("p",{className:fi.message,children:o}),n.jsx("div",{children:n.jsx(D,{label:e("checkout.close"),onClick:t,color:"primary",variant:"contained",size:"large",fullWidth:!0})})]})},ch="_formFeedback_173nk_1",lh="_formContainer_173nk_5",dh="_passwordButtonsContainer_173nk_13",uh="_buttonsContainer_173nk_21",mh="_heading_173nk_30",hh="_paragraph_173nk_40",ph="_button_173nk_21",Yt={formFeedback:ch,formContainer:lh,passwordButtonsContainer:dh,buttonsContainer:uh,heading:mh,paragraph:hh,button:ph},fh=()=>{const s=V(_e),{t}=A("user"),e=M(d=>{var u;return(u=d.user)==null?void 0:u.email}),[r,a]=h.useState(),o=le(),i=ue(),c=h.useCallback(()=>{o(J(i,null),{replace:!0})},[i,o]),l=async()=>{try{e&&(await s.resetPassword(e,""),o(J(i,"add-password")))}catch{a(t("account.add_password_error"))}};return n.jsxs("div",{className:Yt.formContainer,children:[r&&n.jsx("div",{className:Yt.formFeedback,children:n.jsx(Ae,{variant:"error",children:r})}),n.jsx("h2",{className:Yt.heading,children:t("account.delete_account_password_warning.title")}),n.jsx("p",{className:Yt.paragraph,children:t("account.delete_account_password_warning.text")}),n.jsxs("div",{className:Yt.passwordButtonsContainer,children:[n.jsx(D,{type:"submit",onClick:l,className:Yt.button,color:"primary",fullWidth:!0,label:t("account.proceed_to_adding_a_password")}),n.jsx(D,{type:"button",onClick:c,className:Yt.button,variant:"text",fullWidth:!0,label:t("account.cancel")})]})]})},xc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{fill:"currentColor",d:"M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"})),sa=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M7.37083 12.6026c-.70164 0-1.28549-.0571-1.72496-.1142l-1.34375 6.9595H.179688L3.83225.516163C5.08988.201006 7.07827 0 8.97801 0c1.75279 0 3.79949.286619 5.23309 1.28917 1.3172.88839 2.1354 2.23464 2.1354 4.0958 0 2.4344-1.1386 4.26703-2.6901 5.44083-1.6084 1.2333-3.8881 1.7768-6.28557 1.7768zm1.72496-9.30834c-.78902 0-1.34375.05832-1.69457.14393L6.28924 9.13832c.43821.08561.90681.14269 1.60845.14269 2.54311 0 4.20851-1.60433 4.20851-3.52257 0-1.8624-1.3741-2.46418-3.01041-2.46418zm7.22271.21844c.523.18487 1.0195.4169 1.4552.72213 1.3158.88715 2.1353 2.23339 2.1365 4.09456 0 2.43441-1.1398 4.26701-2.69 5.44201-1.6084 1.2321-3.8869 1.7756-6.2856 1.7756-.7016 0-1.28676-.0571-1.72497-.1154l-1.34501 6.9595H3.74219l.31915-1.6577h1.30702l1.34502-6.9582c.4382.057 1.02206.1141 1.72496.1141 2.39746 0 4.67586-.5447 6.28556-1.7755 1.549-1.1738 2.6888-3.00769 2.6888-5.44209 0-1.29909-.4053-2.34258-1.0942-3.15901z"})),gh="_title_1tanv_1",_h="_success_1tanv_8",yh="_paymentMethodsInputs_1tanv_12",vh="_paymentMethod_1tanv_12",xh="_paymentMethodLabel_1tanv_22",wh="_radio_1tanv_30",bt={title:gh,success:_h,paymentMethodsInputs:yh,paymentMethod:vh,paymentMethodLabel:xh,radio:wh},bh=({paymentMethodId:s,paymentMethods:t,onCloseButtonClick:e,onPaymentMethodChange:r,renderPaymentMethod:a,submitting:o,updateSuccess:i})=>{const{t:c}=A("account"),l=Ge(),d=t==null?void 0:t.find(m=>m.methodName==="card"),u=t==null?void 0:t.find(m=>m.methodName==="paypal");return h.useEffect(()=>{i&&l(c("checkout.payment_success"),"success")},[i,l,c]),n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:bt.title,children:c("payment.update_payment_details")}),i?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:bt.success,children:c("payment.update_payment_success")}),n.jsx(D,{label:c("payment.back_to_profile"),onClick:e,color:"primary",fullWidth:!0})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:bt.paymentMethodsInputs,children:[d?n.jsxs("div",{className:bt.paymentMethod,children:[n.jsx("input",{className:bt.radio,type:"radio",name:"paymentMethod",value:d.id,id:"card",checked:s===d.id,onChange:r}),n.jsxs("label",{className:bt.paymentMethodLabel,htmlFor:"card",children:[n.jsx(Y,{icon:xc}),c("payment.credit_card")]})]}):null,u?n.jsxs("div",{className:bt.paymentMethod,children:[n.jsx("input",{className:bt.radio,type:"radio",name:"paymentMethod",value:u.id,id:"paypal",checked:s===u.id,onChange:r}),n.jsxs("label",{className:bt.paymentMethodLabel,htmlFor:"paypal",children:[n.jsx(Y,{icon:sa})," ",c("payment.paypal")]})]}):null]}),n.jsx("div",{children:a?a():null}),o&&n.jsx(ye,{transparentBackground:!0,inline:!0})]})]})},jh="_payPal_17v1t_1",Sh={payPal:jh},wc=({onSubmit:s,error:t})=>{const{t:e}=A("account");return n.jsxs("div",{className:Sh.payPal,children:[t?n.jsx(Ae,{variant:"error",children:t}):null,n.jsx("p",{children:e("checkout.paypal_instructions")}),n.jsx(D,{label:e("checkout.continue"),variant:"contained",color:"primary",size:"large",onClick:s,fullWidth:!0})]})},Ch="_adyen_1wab6_1",Ph="_container_1wab6_5",gi={adyen:Ch,container:Ph},bc=({configuration:s,error:t,type:e})=>{const{t:r}=A("account"),a=h.useRef(null),o=h.useRef();return h.useEffect(()=>!a.current||!s.session?void 0:((async()=>{var l;const c=await Nl(s);a.current&&(o.current=c.create(e),(l=o.current)==null||l.mount(a.current))})(),()=>{var c;(c=o.current)==null||c.unmount()}),[s,e]),n.jsxs("div",{className:gi.adyen,children:[t?n.jsx(Ae,{variant:"error",children:t}):null,n.jsx("div",{className:gi.container,ref:a}),n.jsx(D,{label:r("checkout.continue"),variant:"contained",color:"primary",size:"large",onClick:()=>{o.current&&o.current.submit()},fullWidth:!0})]})};function kh({setProcessing:s,type:t,setPaymentError:e,error:r,paymentMethodId:a}){const o=V(_e),i=V(vt),c=o.getSandbox(),{t:l}=A("account"),d=Ge(),u=le(),m=ue(),[g,_]=h.useState(),f=Be("redirectResult"),y=!!f,w=J(m,"payment-method-success"),x=xe(async S=>{try{s(!0),await i.finalizeAdyenPaymentDetails({redirectResult:decodeURI(S)},a),await o.reloadSubscriptions({retry:10}),s(!1),d(l("checkout.payment_success"),"success"),u(w)}catch(j){s(!1),j instanceof Error&&(e(j.message),u(J(m,"payment-method"),{replace:!0}))}});h.useEffect(()=>{f&&x(f)},[x,f]),h.useEffect(()=>{if(y)return;(async()=>{s(!0);try{const j=await i.createAdyenPaymentSession(window.origin,!1);_(j)}catch(j){j instanceof Error&&e(j.message)}s(!1)})()},[s,e,y,u,m,i]);const v=h.useCallback(async(S,j)=>{if(S.isValid){try{s(!0),e(void 0);const C=Et("payment-method",{paymentMethodId:`${a}`}),I=await i.addAdyenPaymentDetails(S.data.paymentMethod,a,C);"action"in I&&j(I.action),await o.reloadSubscriptions({retry:5}),u(w,{replace:!0})}catch(C){C instanceof Error&&e(C.message)}s(!1)}},[u,a,w,e,s,o,i]),b=h.useMemo(()=>({session:g,showPayButton:!1,environment:c?"test":"live",clientKey:c?Ki:Qi,paymentMethodsConfiguration:{card:{hasHolderName:!0,holderNameRequired:!0}},onAdditionalDetails:async S=>{try{s(!0),await i.finalizeAdyenPayment(S.data.details,a),u(w,{replace:!0})}catch(j){j instanceof Error&&(e(j.message),s(!1))}},onSubmit:(S,j)=>v(S,j.handleAction),onError:S=>e(S.message)}),[g,c,s,a,u,w,e,v,i]);return n.jsx(bc,{configuration:b,type:t,error:r})}const Eh=({onCloseButtonClick:s})=>{const t=V(vt),e=Be("u")==="payment-method-success",r=Be("paymentMethodId"),a=r?parseInt(r):void 0,o=M(x=>x.activePayment),i=o==null?void 0:o.id,[c,l]=h.useState(void 0),[d,u]=h.useState(a),m=je(x=>x.paymentMethods),[g,_]=h.useState(!1);h.useEffect(()=>{t.getPaymentMethods()},[t]);const f=x=>{const v=parseInt(x.target.value);u(v),l(void 0)},y=async()=>{_(!0);try{l(void 0);const x=Et("payment-method-success"),v=Et("waiting-for-payment"),b=Et("payment-cancelled"),S=Et("payment-error"),j=await t.updatePayPalPaymentMethod(x,v,b,S,d,i);j&&(window.location.href=j.redirectUrl)}catch(x){x instanceof Error&&l(x.message)}_(!1)},w=()=>{const x=m==null?void 0:m.find(v=>v.id===d);return(x==null?void 0:x.methodName)==="card"?n.jsx(kh,{paymentMethodId:x.id,setPaymentError:l,setProcessing:_,error:c,type:"card"}):(x==null?void 0:x.methodName)==="paypal"?n.jsx(wc,{onSubmit:y,error:c||null}):null};return m?n.jsx(bh,{onCloseButtonClick:s,paymentMethods:m,paymentMethodId:d,onPaymentMethodChange:f,renderPaymentMethod:w,updateSuccess:e,submitting:g}):n.jsx("div",{style:{height:300},children:n.jsx(ye,{inline:!0})})},Nh="_title_11svw_1",Ih="_cancelButton_11svw_7",_i={title:Nh,cancelButton:Ih},Ah=({renderPaymentMethod:s,submitting:t,onCancel:e})=>{const{t:r}=A(["common","user"]);return n.jsxs("div",{children:[n.jsx("div",{className:_i.title,children:n.jsx("h1",{children:r("user:payment.add_card_details")})}),n.jsx("div",{children:s?s():null}),n.jsx(D,{onClick:e,className:_i.cancelButton,fullWidth:!0,label:r("common:confirmation_dialog.close")}),t&&n.jsx(ye,{transparentBackground:!0,inline:!0})]})},jc=({value:s,onChange:t,error:e,...r})=>{const{t:a}=A("user"),o=i=>{const c=i.target.value.replace(/\D+/g,"");t&&(i.target.value=c.slice(0,4),t(i))};return n.jsx(pe,{label:a("payment.security_code"),"aria-label":a("payment.security_code"),...r,error:!!e,helperText:e||null,name:"cardCVC",className:"directPostSecurityCode",type:"text",value:s,onChange:o,pattern:"\\d*",placeholder:"###",autoComplete:"cc-csc",required:!0})},Sc=({value:s,onChange:t,error:e,...r})=>{const a=o=>{let i=o.target.value.replace(/\D+/g,"");i.length===1?Number(i)>1&&(i="0"+i):i.length===2&&Number(i)>12&&(i="12"),i.length>=3?o.target.value=`${i.slice(0,2)}/${i.slice(2,4)}`:o.target.value=i,t&&t(o)};return n.jsx(pe,{label:"Expiry date",...r,name:"cardExpiry",className:"directPostExpiryDate",value:s,error:!!e,helperText:e||null,onChange:a,type:"text",pattern:"\\d*",placeholder:"MM/YY",autoComplete:"cc-exp",required:!0})},Lh="_cardTypeWrapper_lfmk2_1",Th={cardTypeWrapper:Lh},gn={visa:"/images/payments/visa.svg",mastercard:"/images/payments/mastercard.svg",maestro:"/images/payments/maestro.svg",amex:"/images/payments/amex.svg",discover:"/images/payments/discover.svg",diners:"/images/payments/diners.svg",dinersclub:"/images/payments/diners.svg",unionpay:"/images/payments/unionpay.svg",hiper:"/images/payments/hiper.svg"},Cc=({value:s,error:t,onChange:e,onBlur:r,...a})=>{const[o,i]=h.useState(null),c=l=>{var g,_;const d=it.fns.cardType((g=l.target)==null?void 0:g.value),u=(_=l.target)==null?void 0:_.value.replace(/\D+/g,"");let m;switch(i(gn!=null&&gn[d]?n.jsx("div",{className:Th.cardTypeWrapper,children:n.jsx("img",{src:gn[d],alt:d,height:"25"})}):null),d){case"amex":m=`${u.slice(0,4)} ${u.slice(4,10)} ${u.slice(10,15)}`;break;case"dinersclub":m=`${u.slice(0,4)} ${u.slice(4,10)} ${u.slice(10,14)}`;break;default:m=`${u.slice(0,4)} ${u.slice(4,8)} ${u.slice(8,12)} ${u.slice(12,16)}`;break}e&&(l.target.value=m.trim(),e(l))};return n.jsx(pe,{value:s,name:"cardNumber",label:"Card number",className:"directPostCreditCardNumber",onChange:c,onBlur:r,error:!!t,helperText:t||null,pattern:"\\d*",...a,type:"text",placeholder:"1234 5678 9012 3456",rightControl:o,autoComplete:"cc-number",required:!0})},$h="_paymentForm_g66uf_1",Oh="_columns_g66uf_6",yi={paymentForm:$h,columns:Oh},Dh=({onCancel:s,setUpdatingCardDetails:t})=>{var d,u,m,g,_,f,y,w;const e=V(_e),r=Ge(),{t:a}=A("account"),{mutate:o,isLoading:i}=Ye(e.updateCardDetails),{activePayment:c}=M(({activePayment:x})=>({activePayment:x}),he),l=ut({initialValues:{cardholderName:"",cardNumber:"",cardExpiry:"",cardCVC:"",cardExpMonth:"",cardExpYear:""},validationSchema:ce().shape({cardholderName:F().required(),cardNumber:F().required().test("card number validation",a("checkout.invalid_card_number"),x=>it.fns.validateCardNumber(x)),cardExpiry:F().required().test("card expiry validation",a("checkout.invalid_card_expiry"),x=>it.fns.validateCardExpiry(x)),cardCVC:F().required().test("cvc validation",a("checkout.invalid_cvc_number"),x=>{var b;const v=it.fns.cardType((b=l==null?void 0:l.values)==null?void 0:b.cardNumber);return it.fns.validateCardCVC(x,v)}),cardExpMonth:F().required(),cardExpYear:F().required()}),validateOnBlur:!0,onSubmit:async()=>{t(!0),o({cardName:l.values.cardholderName,cardNumber:l.values.cardNumber.replace(/\s+/g,""),cvc:parseInt(l.values.cardCVC),expMonth:parseInt(l.values.cardExpMonth),expYear:parseInt(l.values.cardExpYear),currency:(c==null?void 0:c.currency)||""},{onSettled:()=>s(),onSuccess:()=>{r(a("checkout.card_details_updated"),"success")}})}});return h.useEffect(()=>{if(l.values.cardExpiry){const x=it.fns.cardExpiryVal(l.values.cardExpiry);x.month&&l.setValue("cardExpMonth",x.month.toString()),x.year&&l.setValue("cardExpYear",x.year.toString())}},[l.values.cardExpiry]),n.jsxs("div",{className:yi.paymentForm,children:[n.jsx("div",{children:n.jsx(pe,{label:a("checkout.card_holder_name"),name:"cardholderName",value:(d=l==null?void 0:l.values)==null?void 0:d.cardholderName,onChange:l==null?void 0:l.handleChange,onBlur:l==null?void 0:l.handleBlur,placeholder:a("checkout.credit_card_name"),autoComplete:"cc-name",required:!0})}),n.jsx("div",{children:n.jsx(Cc,{value:(m=(u=l==null?void 0:l.values)==null?void 0:u.cardNumber)==null?void 0:m.toString(),error:(g=l==null?void 0:l.errors)==null?void 0:g.cardNumber,onBlur:l==null?void 0:l.handleBlur,onChange:l==null?void 0:l.handleChange})}),n.jsxs("div",{className:yi.columns,children:[n.jsx("div",{children:n.jsx(Sc,{value:(_=l==null?void 0:l.values)==null?void 0:_.cardExpiry,onBlur:l==null?void 0:l.handleBlur,onChange:l==null?void 0:l.handleChange,error:(f=l==null?void 0:l.errors)==null?void 0:f.cardExpiry})}),n.jsx("div",{children:n.jsx(jc,{value:(y=l==null?void 0:l.values)==null?void 0:y.cardCVC,onBlur:l==null?void 0:l.handleBlur,onChange:l==null?void 0:l.handleChange,error:(w=l==null?void 0:l.errors)==null?void 0:w.cardCVC})})]}),n.jsx("div",{children:n.jsx(D,{disabled:i,label:a("checkout.save"),variant:"contained",onClick:l.handleSubmit,type:"submit",color:"primary",size:"large",fullWidth:!0})})]})},Fh=()=>{const s=ue(),t=le(),[e,r]=h.useState(!1),a=()=>{t(J(s,null),{replace:!1})},o=()=>n.jsx(Dh,{onCancel:a,setUpdatingCardDetails:r});return n.jsx(Ah,{onCancel:a,renderPaymentMethod:o,submitting:e})},Mh="_title_n9dff_1",Bh="_text_n9dff_7",Rh="_button_n9dff_12",Hh="_link_n9dff_16",Uh="_textField_n9dff_17",Wh="_paragraph_n9dff_21",Vh="_resendLink_n9dff_31",Us={title:Mh,text:Bh,button:Rh,link:Hh,textField:Uh,paragraph:Wh,resendLink:Vh},qh=({onSubmit:s,onChange:t,onBlur:e,showOldPasswordField:r,showResetTokenField:a,value:o,errors:i,submitting:c,validationError:l,email:d,onResendEmailClick:u})=>{const{t:m}=A(["account","user"]);return n.jsxs("form",{onSubmit:s,"data-testid":void 0,noValidate:!0,children:[i.form&&n.jsx(Ae,{variant:"error",visible:!l,children:i.form}),n.jsx("h2",{className:Us.title,children:m(r&&a?"user:account.add_password":"reset.password_reset")}),r&&a&&n.jsxs("p",{className:Us.paragraph,children:[m("user:account.add_password_modal_text",{email:d}),n.jsx("a",{className:Us.resendLink,onClick:u,children:m("user:account.resend_mail")})]}),r&&!a&&n.jsx(Ys,{value:o.oldPassword,onChange:t,onBlur:e,label:m("reset.old_password"),placeholder:m("reset.old_password"),error:!!i.oldPassword,name:"oldPassword",showToggleView:!1,showHelperText:!1,autoComplete:"current-password",required:!0}),a&&n.jsx(pe,{className:Us.textField,value:o.resetPasswordToken||"",onChange:t,onBlur:e,label:m("reset.reset_password_token"),placeholder:m("reset.reset_password_token"),name:"resetPasswordToken",type:"text",autoComplete:"",required:!0}),n.jsx(Ys,{value:o.password,onChange:t,onBlur:e,label:m("reset.new_password"),placeholder:m("reset.password"),error:!!i.password,name:"password",autoComplete:"new-password",required:!0}),n.jsx(Ys,{value:o.passwordConfirmation,onChange:t,onBlur:e,label:m("reset.repeat_new_password"),placeholder:m("reset.repeat_new_password"),error:!!i.passwordConfirmation,name:"passwordConfirmation",autoComplete:"new-password",showHelperText:!1,required:!0}),n.jsx(D,{type:"submit",className:Us.button,fullWidth:!0,color:"primary",disabled:c,label:m("reset.confirm")}),c&&n.jsx(ye,{transparentBackground:!0,inline:!0})]})},vi=({type:s})=>{const t=V(_e),{t:e}=A("account"),r=Ge(),a=ue(),o=le(),i=Be("resetPasswordToken"),c=Be("email"),l=M(_=>{var f;return(f=_.user)==null?void 0:f.email}),d=M.getState().user,u=async(_,{setErrors:f,setSubmitting:y})=>{const{oldPassword:w,password:x,passwordConfirmation:v,resetPasswordToken:b}=_;if(x!==v)return f({form:e("reset.passwords_do_not_match")}),y(!1);let S=i;b&&(S=b);try{if(d&&!S)await t.changePasswordWithOldPassword(w||"",x,v);else{if(!S)return f({form:e("reset.invalid_link")}),y(!1);await t.changePasswordWithToken(c||"",x,S,v)}r(e("reset.password_reset_success"),"success"),await t.logout(),o(J(a,"login"))}catch(j){j instanceof Error&&(j.message.includes("invalid param password")?f({password:e("reset.invalid_password")}):j.message.includes("resetPasswordToken is not valid")?f({form:e("reset.invalid_reset_link")}):j.message.includes("score does not match standards")?f({form:e("reset.password_strength")}):j.message.includes("old password does not match")?f({form:e("reset.old_password_does_not_match")}):j.message.includes("password could not be set")&&f({form:e("reset.invalid_token")}))}y(!1)},m=ut({initialValues:{password:"",passwordConfirmation:""},validationSchema:ce().shape({email:F(),oldPassword:F(),password:F().matches(/^(?=.*[a-z])(?=.*[0-9]).{8,}$/,e("registration.invalid_password")).required(e("login.field_required",{field:e("login.password")})),passwordConfirmation:F().required(),resetPasswordToken:F()}),validateOnBlur:!0,onSubmit:u}),g=async()=>{try{l&&await t.resetPassword(l,"")}catch{m.setErrors({form:e("user:account.resend_mail_error")})}};return n.jsx(qh,{value:m.values,submitting:m.submitting,onChange:m.handleChange,onBlur:m.handleBlur,errors:m.errors,onSubmit:m.handleSubmit,validationError:m.validationSchemaError,showOldPasswordField:!!(d&&!i),showResetTokenField:s==="add"||!d&&!i,email:c||l,onResendEmailClick:g})},zh="_title_ofxac_1",Gh="_infoBox_ofxac_7",Jh="_price_ofxac_23",Yh="_confirmButton_ofxac_32",Ws={title:zh,infoBox:Gh,price:Jh,confirmButton:Yh},Kh=({subscription:s,customer:t,error:e,submitting:r,onConfirm:a,onClose:o})=>{const{t:i,i18n:c}=A("account");return n.jsxs("div",{children:[e?n.jsx(Ae,{variant:"error",children:e}):null,n.jsx("h2",{className:Ws.title,children:i("renew_subscription.renew_your_subscription")}),n.jsx("p",{className:Ws.paragraph,children:i("renew_subscription.explanation")}),n.jsxs("div",{className:Ws.infoBox,children:[n.jsxs("p",{children:[n.jsx("strong",{children:s.offerTitle})," ",n.jsx("br",{}),i("renew_subscription.next_billing_date_on",{date:ft(new Date(s.expiresAt*1e3),c.language)})]}),n.jsxs("p",{className:Ws.price,children:[n.jsx("strong",{children:tt(s.nextPaymentPrice,s.nextPaymentCurrency,t.country)}),n.jsxs("small",{children:["/",i(`periods.${s.period}`)]})]})]}),n.jsx(D,{className:Ws.confirmButton,color:"primary",variant:"contained",label:i("renew_subscription.renew_subscription"),onClick:a,fullWidth:!0,disabled:r,type:"submit"}),n.jsx(D,{label:i("renew_subscription.no_thanks"),onClick:o,fullWidth:!0})]})},Qh="_title_1o843_1",xi={title:Qh},Zh=({onClose:s,customer:t,subscription:e})=>{const{t:r,i18n:a}=A("account"),o=ft(new Date(e.expiresAt*1e3),a.language),i=tt(e.nextPaymentPrice,e.nextPaymentCurrency,t.country);return n.jsxs("div",{children:[n.jsx("h2",{className:xi.title,children:r("subscription_renewed.title")}),n.jsx("p",{className:xi.paragraph,children:r("subscription_renewed.message",{date:o,price:i})}),n.jsx(D,{label:r("subscription_renewed.back_to_profile"),onClick:s,fullWidth:!0})]})},Xh=()=>{const s=V(_e),t=le(),e=ue(),{t:r}=A("account"),a=Ge(),{subscription:o,user:i}=M(({subscription:y,user:w})=>({subscription:y,user:w}),he),[c,l]=h.useState(!1),[d,u]=h.useState(!1),[m,g]=h.useState(null),_=async()=>{u(!0),g(null);try{await s.updateSubscription("active"),a(r("renew_subscription.success"),"success"),l(!0)}catch{g(r("renew_subscription.unknown_error_occurred"))}u(!1)},f=()=>{t(J(e,null),{replace:!0})};return!o||!i?null:n.jsxs(Ne.Fragment,{children:[c?n.jsx(Zh,{onClose:f,subscription:o,customer:i}):n.jsx(Kh,{subscription:o,customer:i,error:m,onConfirm:_,onClose:f,submitting:d}),d?n.jsx(ye,{inline:!0}):null]})},ep="_title_feuiy_1",tp="_confirmButton_feuiy_7",Xn={title:ep,confirmButton:tp},sp=({onConfirm:s,onCancel:t,error:e,submitting:r})=>{const{t:a}=A("account");return n.jsxs("div",{children:[e?n.jsx(Ae,{variant:"error",children:e}):null,n.jsx("h2",{className:Xn.title,children:a("cancel_subscription.title")}),n.jsx("p",{className:Xn.paragraph,children:a("cancel_subscription.explanation")}),n.jsx(D,{className:Xn.confirmButton,label:a("cancel_subscription.unsubscribe"),color:"primary",variant:"contained",onClick:s,fullWidth:!0,disabled:r,type:"submit"}),n.jsx(D,{label:a("cancel_subscription.no_thanks"),variant:"outlined",onClick:t,fullWidth:!0})]})},np="_title_od1i3_1",er={title:np},rp=({expiresDate:s,onClose:t})=>{const{t:e}=A("account");return n.jsxs("div",{className:er.SubscriptionCancelled,children:[n.jsx("h2",{className:er.title,children:e("subscription_cancelled.title")}),n.jsx("p",{className:er.paragraph,children:e("subscription_cancelled.message",{date:s})}),n.jsx(D,{label:e("subscription_cancelled.return_to_profile"),variant:"outlined",onClick:t,fullWidth:!0})]})},ap=()=>{const s=V(_e),{t,i18n:e}=A("account"),r=Ge(),a=le(),o=ue(),i=M(w=>w.subscription),[c,l]=h.useState(!1),[d,u]=h.useState(!1),[m,g]=h.useState(null),_=i!=null&&i.expiresAt?ft(new Date(i.expiresAt*1e3),e.language):"",f=async()=>{u(!0),g(null);try{await s.updateSubscription("cancelled"),_&&r(t("subscription_cancelled.message",{date:_}),"success"),l(!0)}catch{g(t("cancel_subscription.unknown_error_occurred"))}u(!1)},y=()=>{a(J(o,null),{replace:!0})};return i?n.jsxs(Ne.Fragment,{children:[c?n.jsx(rp,{expiresDate:_,onClose:y}):n.jsx(sp,{onConfirm:f,onCancel:y,submitting:d,error:m}),d?n.jsx(ye,{transparentBackground:!0,inline:!0}):null]}):null},op="_title_173ks_1",ip="_text_173ks_7",cp="_button_173ks_12",tr={title:op,text:ip,button:cp},lp=({onCancel:s,onReset:t,submitting:e})=>{const{t:r}=A("account");return n.jsxs("div",{children:[n.jsx("h1",{className:tr.title,children:r("reset.reset_password")}),n.jsx("p",{className:tr.text,children:r("reset.text")}),n.jsx(D,{onClick:t,className:tr.button,fullWidth:!0,color:"primary",label:r("reset.yes"),type:"submit",disabled:e}),n.jsx(D,{onClick:s,fullWidth:!0,label:r("reset.no")})]})},dp="_title_17xro_1",up="_text_17xro_7",mp="_button_17xro_12",sr={title:dp,text:up,button:mp},hp=({onSubmit:s,onChange:t,value:e,errors:r,submitting:a,onBlur:o})=>{const{t:i}=A("account");return n.jsxs("form",{onSubmit:s,"data-testid":void 0,noValidate:!0,children:[n.jsx("h2",{className:sr.title,children:i("reset.forgot_password")}),r.form?n.jsx(Ae,{variant:"error",children:r.form}):null,n.jsx("p",{className:sr.text,children:i("reset.forgot_text")}),n.jsx(pe,{value:e.email,onChange:t,onBlur:o,label:i("reset.email"),placeholder:i("reset.email"),error:!!r.email||!!r.form,helperText:r.email,name:"email",type:"email",autoComplete:"email",required:!0}),n.jsx(D,{type:"submit",className:sr.button,fullWidth:!0,color:"primary",disabled:a,label:i("reset.email_me")})]})},pp="_title_v7vet_1",fp="_text_v7vet_7",gp="_button_v7vet_12",_p="_notSure_v7vet_16",yp="_link_v7vet_20",hs={title:pp,text:fp,button:gp,notSure:_p,link:yp},vp=({email:s,onBackToLogin:t,loggedIn:e})=>{const{t:r}=A("account"),a=ue();return n.jsxs("div",{className:hs.forgotPasswordForm,children:[n.jsx("h2",{className:hs.title,children:r("reset.link_sent")}),n.jsx("p",{className:hs.text,children:r("reset.link_sent_text",{email:s})}),n.jsx(D,{onClick:t,className:hs.button,fullWidth:!0,color:"primary",label:r("reset.back_login")}),!e&&n.jsxs(Ne.Fragment,{children:[n.jsx("span",{className:hs.notSure,children:r("reset.not_sure")}),n.jsx(tn,{className:hs.link,to:J(a,"forgot-password"),children:r("reset.try_again")})]})]})},nr=({type:s})=>{const t=V(_e),{t:e}=A("account"),r=le(),a=ue(),[o,i]=h.useState(!1),{canChangePasswordWithOldPassword:c}=t.getFeatures(),{customer:l}=M(({user:f})=>({customer:f}),he),d=()=>{r(J(a,null))},u=async()=>{r({pathname:"/",search:"u=login"},{replace:!0}),l&&await t.logout()},m=async()=>{const f=`${window.location.origin}/?u=edit-password`;try{if(!(l!=null&&l.email)){Qs("invalid param email");return}i(!0),await t.resetPassword(l.email,f),i(!1),r(J(a,"send-confirmation"))}catch(y){Qs(y instanceof Error?y.message:y)}},g=async(f,{setErrors:y,setSubmitting:w})=>{const x=`${window.location.origin}/?u=edit-password`;try{await t.resetPassword(f.email,x),r(J(a,c?"edit-password":"send-confirmation"))}catch(v){v instanceof Error&&(v.message.toLowerCase().includes("invalid param email")?y({email:e("reset.wrong_email")}):y({form:v.message}))}w(!1)},_=ut({initialValues:{email:""},validationSchema:ce().shape({email:F().email(e("login.field_is_not_valid_email")).required(e("login.field_required",{field:e("login.email")}))}),validateOnBlur:!0,onSubmit:g});return n.jsxs(Ne.Fragment,{children:[s==="reset"&&n.jsx(lp,{submitting:o,onCancel:d,onReset:m}),s==="forgot"&&n.jsx(hp,{value:_.values,submitting:_.submitting,onChange:_.handleChange,errors:_.errors,onSubmit:_.handleSubmit,onBlur:_.handleBlur}),s==="confirmation"&&n.jsx(vp,{loggedIn:!!l,email:(l==null?void 0:l.email)||_.values.email,onBackToLogin:u}),(_.submitting||o)&&n.jsx(ye,{transparentBackground:!0,inline:!0})]})},xp=({onUpdateOrderSuccess:s,onSubmitPaymentWithoutDetailsSuccess:t,onSubmitPaypalPaymentSuccess:e,onSubmitStripePaymentSuccess:r})=>{const a=V(_e),o=V(vt),{order:i,selectedOffer:c,paymentMethods:l,setOrder:d}=je(({order:x,selectedOffer:v,paymentMethods:b,setOrder:S})=>({order:x,selectedOffer:v,paymentMethods:b,setOrder:S})),u=c&&Kr(c)?"svod":"tvod",m=Ye({mutationKey:["initialiseOrder"],mutationFn:async({offer:x})=>!!x&&o.initialiseOrder(x)}),g=Ye({mutationKey:["updateOrder"],mutationFn:async({paymentMethodId:x,couponCode:v})=>{if(!(!i||!x))return await o.updateOrder(i,x,v)},onSuccess:s}),_=Ye({mutationKey:["submitPaymentWithoutDetails"],mutationFn:o.paymentWithoutDetails,onSuccess:async()=>{await a.reloadSubscriptions({retry:10}),t()}}),f=Ye({mutationKey:["submitPaymentPaypal"],mutationFn:o.paypalPayment,onSuccess:e}),y=Ye({mutationKey:["submitPaymentStripe"],mutationFn:o.directPostCardPayment,onSuccess:r});h.useEffect(()=>{c&&!i&&!m.isLoading&&!m.isError&&m.mutate({offer:c})},[c,i,m]),h.useEffect(()=>()=>d(null),[d]);const w=m.isLoading||g.isLoading||_.isLoading||f.isLoading||y.isLoading;return{selectedOffer:c,offerType:u,paymentMethods:l,order:i,isSubmitting:w,updateOrder:g,submitPaymentWithoutDetails:_,submitPaymentPaypal:f,submitPaymentStripe:y}},Pc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})),wp="_dialogBackButton_1pa6f_1",bp={dialogBackButton:wp},kc=({onClick:s})=>{const{t}=A();return n.jsx(We,{onClick:s,className:bp.dialogBackButton,"aria-label":t("common:back"),children:n.jsx(Y,{icon:Pc})})},jp="_backButton_1xlk4_1",Sp="_title_1xlk4_7",Cp="_order_1xlk4_13",Pp="_orderTitle_1xlk4_22",kp="_orderTitleMargin_1xlk4_28",Ep="_orderBillingDate_1xlk4_32",Np="_orderInfo_1xlk4_37",Ip="_orderPrice_1xlk4_41",Ap="_couponForm_1xlk4_54",Lp="_redeemCoupon_1xlk4_59",Tp="_couponInput_1xlk4_66",$p="_orderTotals_1xlk4_84",Op="_couponCell_1xlk4_96",Dp="_divider_1xlk4_113",Fp="_paymentMethods_1xlk4_118",Mp="_paymentMethod_1xlk4_118",Bp="_paymentMethodLabel_1xlk4_127",Rp="_radio_1xlk4_135",Hp="_noPaymentNeeded_1xlk4_170",ke={backButton:jp,title:Sp,order:Cp,orderTitle:Pp,orderTitleMargin:kp,orderBillingDate:Ep,orderInfo:Np,orderPrice:Ip,couponForm:Ap,redeemCoupon:Lp,couponInput:Tp,orderTotals:$p,couponCell:Op,divider:Dp,paymentMethods:Fp,paymentMethod:Mp,paymentMethodLabel:Bp,radio:Rp,noPaymentNeeded:Hp},Up=({paymentMethodId:s,paymentMethods:t,order:e,offer:r,offerType:a,onBackButtonClick:o,onPaymentMethodChange:i,error:c,couponFormOpen:l,couponInputValue:d,couponFormError:u,couponFormApplied:m,couponFormSubmitting:g,onCouponInputChange:_,onCloseCouponFormClick:f,onCouponFormSubmit:y,onRedeemCouponButtonClick:w,children:x,submitting:v})=>{var k,N,T,O,H,U,L;const{t:b}=A("account"),S=()=>r?b(`periods.${r.period}`):"",j=R=>{if(R.freeDays)return b("checkout.days_trial",{count:R.freeDays});if(R.freePeriods){const X=b(`periods.${R.period}`,{count:R.freePeriods});return b("checkout.periods_trial",{count:R.freePeriods,period:X})}return null},C=t==null?void 0:t.find(R=>R.methodName==="card"),I=t==null?void 0:t.find(R=>R.methodName==="paypal"),P=a==="svod"?r.period==="month"?b("checkout.monthly"):b("checkout.yearly"):r.offerTitle;return n.jsxs("div",{children:[c?n.jsx(Ae,{variant:"error",children:c}):null,n.jsx("h1",{className:ke.title,children:b("checkout.payment_method")}),n.jsxs("div",{className:ke.order,children:[n.jsxs("div",{className:ke.orderInfo,children:[n.jsx("p",{className:B(ke.orderTitle,{[ke.orderTitleMargin]:a==="svod"}),children:P}),((k=e.discount)==null?void 0:k.type)==="trial"?n.jsx("p",{className:ke.orderBillingDate,children:j(r)}):null]}),n.jsxs("div",{className:ke.orderPrice,children:[n.jsx("span",{children:tt(r.customerPriceInclTax,e.currency,r.customerCountry)}),a==="svod"&&n.jsxs("small",{children:["/",S()]})]})]}),n.jsx("div",{className:ke.couponForm,children:l?n.jsxs("form",{onSubmit:y,noValidate:!0,children:[n.jsxs("div",{className:ke.redeemCoupon,children:[n.jsx(We,{"aria-label":"Close coupon form",onClick:f,children:n.jsx(Y,{icon:Fn})}),n.jsx("input",{className:ke.couponInput,name:"couponCode",type:"text",placeholder:"Coupon code",value:d,onChange:_}),n.jsx(D,{variant:"outlined",label:"Apply",type:"submit",disabled:g})]}),u?n.jsx(Ae,{variant:"error",children:u}):null,m?n.jsx(Ae,{variant:"success",children:b("checkout.coupon_applied")}):null]}):n.jsx(D,{variant:"outlined",label:b("checkout.redeem_coupon"),onClick:w})}),n.jsx("div",{children:n.jsxs("table",{className:ke.orderTotals,children:[n.jsxs("tbody",{children:[(N=e.discount)!=null&&N.applied&&((T=e.discount)==null?void 0:T.type)==="coupon"?n.jsxs("tr",{children:[n.jsxs("td",{className:ke.couponCell,children:[b("checkout.coupon_discount"),n.jsx("br",{}),!!r.period&&a==="svod"&&n.jsx("small",{children:b("checkout.discount_period",{count:(O=e.discount)==null?void 0:O.periods,period:b(`periods.${r.period}`,{count:(H=e.discount)==null?void 0:H.periods})})})]}),n.jsx("td",{children:tt(-e.priceBreakdown.discountAmount*(1+e.taxRate),e.currency,r.customerCountry)})]}):null,(U=e.discount)!=null&&U.applied&&((L=e.discount)==null?void 0:L.type)==="trial"?n.jsxs("tr",{children:[n.jsx("td",{className:ke.couponCell,children:b("checkout.free_trial_discount")}),n.jsx("td",{children:tt(-r.customerPriceInclTax,e.currency,r.customerCountry)})]}):null,e.priceBreakdown.paymentMethodFee>0&&n.jsxs("tr",{children:[n.jsx("td",{children:b("checkout.payment_method_fee")}),n.jsx("td",{children:tt(e.priceBreakdown.paymentMethodFee,e.currency,r.customerCountry)})]})]}),n.jsxs("tfoot",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:b("checkout.total_price")}),n.jsx("td",{children:tt(e.totalPrice,e.currency,r.customerCountry)})]}),e.priceBreakdown.taxValue>0&&n.jsxs("tr",{children:[n.jsx("td",{children:b("checkout.applicable_tax",{taxRate:Math.round(e.taxRate*100)})}),n.jsx("td",{children:tt(e.priceBreakdown.taxValue,e.currency,r.customerCountry)})]})]})]})}),n.jsx("hr",{className:ke.divider}),e.requiredPaymentDetails?n.jsxs("div",{className:ke.paymentMethods,children:[C?n.jsxs("div",{className:ke.paymentMethod,children:[n.jsx("input",{className:ke.radio,type:"radio",name:"paymentMethodId",value:C.id,id:"card",checked:s===C.id.toString(),onChange:i}),n.jsxs("label",{className:ke.paymentMethodLabel,htmlFor:"card",children:[n.jsx(Y,{icon:xc})," ",b("checkout.credit_card")]})]}):null,I?n.jsxs("div",{className:ke.paymentMethod,children:[n.jsx("input",{className:ke.radio,type:"radio",name:"paymentMethodId",value:I.id,id:"paypal",checked:s===I.id.toString(),onChange:i}),n.jsxs("label",{className:ke.paymentMethodLabel,htmlFor:"paypal",children:[n.jsx(Y,{icon:sa})," ",b("checkout.paypal")]})]}):null]}):null,x?n.jsx("div",{children:x}):null,v&&n.jsx(ye,{transparentBackground:!0,inline:!0}),n.jsx(kc,{onClick:o})]})},Wp="_noPaymentRequired_170kq_1",Vp={noPaymentRequired:Wp},qp=({onSubmit:s,error:t})=>{const{t:e}=A("account");return n.jsxs("div",{className:Vp.noPaymentRequired,children:[t?n.jsx(Ae,{variant:"error",children:t}):null,n.jsx("p",{children:e("checkout.no_payment_needed")}),n.jsx(D,{label:e("checkout.continue"),variant:"contained",color:"primary",size:"large",onClick:s,fullWidth:!0})]})},zp="_paymentForm_1nfvx_1",Gp="_columns_1nfvx_6",Jp="_formError_1nfvx_13",rr={paymentForm:zp,columns:Gp,formError:Jp},Yp=({onPaymentFormSubmit:s})=>{const{t}=A("account"),{values:e,errors:r,setValue:a,handleChange:o,handleBlur:i,handleSubmit:c}=ut({initialValues:{cardholderName:"",cardNumber:"",cardExpiry:"",cardCVC:"",cardExpMonth:"",cardExpYear:""},validationSchema:ce().required().shape({cardholderName:F().required(),cardNumber:F().required().test("card number validation",t("checkout.invalid_card_number"),l=>it.fns.validateCardNumber(l)),cardExpiry:F().required().test("card expiry validation",t("checkout.invalid_card_expiry"),l=>it.fns.validateCardExpiry(l)),cardCVC:F().required().test("cvc validation",t("checkout.invalid_cvc_number"),(l,d)=>{const u=it.fns.cardType(d.parent.cardNumber);return it.fns.validateCardCVC(l,u)}),cardExpMonth:F().required(),cardExpYear:F().required()}),validateOnBlur:!0,onSubmit:s});return h.useEffect(()=>{if(e.cardExpiry){const l=it.fns.cardExpiryVal(e.cardExpiry);l.month&&a("cardExpMonth",l.month.toString()),l.year&&a("cardExpYear",l.year.toString())}},[e.cardExpiry]),n.jsx("div",{className:rr.paymentForm,children:n.jsxs("form",{onSubmit:c,"data-testid":void 0,noValidate:!0,children:[r.form?n.jsx("div",{className:rr.formError,children:n.jsx(Ae,{variant:"error",children:r.form})}):null,n.jsx("div",{children:n.jsx(pe,{label:t("checkout.card_holder_name"),name:"cardholderName",value:e.cardholderName,onChange:o,onBlur:i,placeholder:t("checkout.credit_card_name"),autoComplete:"cc-name",required:!0})}),n.jsx("div",{children:n.jsx(Cc,{value:e.cardNumber.toString(),error:r.cardNumber,onBlur:i,onChange:o})}),n.jsxs("div",{className:rr.columns,children:[n.jsx("div",{children:n.jsx(Sc,{value:e.cardExpiry,onBlur:i,onChange:o,error:r.cardExpiry})}),n.jsx("div",{children:n.jsx(jc,{value:e.cardCVC,onBlur:i,onChange:o,error:r.cardCVC})})]}),n.jsx("div",{children:n.jsx(D,{label:t("checkout.continue"),variant:"contained",color:"primary",type:"submit",size:"large",fullWidth:!0})})]})})};function Kp({setUpdatingOrder:s,type:t,paymentSuccessUrl:e,orderId:r}){const a=V(_e),o=V(vt),{t:i}=A(["account","error"]),c=Ge(),[l,d]=h.useState(),[u,m]=h.useState(),g=a.getSandbox(),_=le();h.useEffect(()=>{(async()=>{s(!0);try{const x=await o.createAdyenPaymentSession(window.origin);m(x)}catch(x){x instanceof Error&&d(x.message)}s(!1)})()},[s,o]);const f=h.useCallback(async(w,x)=>{if(w.isValid){try{if(s(!0),d(void 0),r===void 0){d(i("error:adyen_order_unknown"));return}const v=Ee(window.location.href,{u:"finalize-payment",orderId:r}),b=await o.initialAdyenPayment(w.data.paymentMethod,v);"action"in b&&x(b.action),await a.reloadSubscriptions({retry:10}),c(i("account:checkout.payment_success"),"success"),_(e,{replace:!0})}catch(v){v instanceof Error&&d(v.message)}s(!1)}},[s,r,o,a,c,i,_,e]),y=h.useMemo(()=>({session:u,showPayButton:!1,environment:g?"test":"live",clientKey:g?Ki:Qi,paymentMethodsConfiguration:{card:{hasHolderName:!0,holderNameRequired:!0}},onAdditionalDetails:async w=>{try{s(!0);const x=w.data.details;await o.finalizeAdyenPayment(r,x),c(i("account:checkout.payment_success"),"success"),_(e,{replace:!0})}catch(x){x instanceof Error&&(d(x.message),s(!1))}},onSubmit:(w,x)=>f(w,x.handleAction),onError:w=>d(w.message)}),[u,g,s,o,r,c,i,_,e,f]);return n.jsx(bc,{configuration:y,type:t,error:l})}const Qp=()=>{var ie,Q,W,q;const s=ue(),t=le(),[e,r]=h.useState(!1),[a,o]=h.useState(!1),[i,c]=h.useState(!1),{t:l}=A("account"),d=Ge(),u=J(s,"choose-offer"),m=J(s,"welcome"),g=J(s,null),_=()=>t(u),{selectedOffer:f,offerType:y,paymentMethods:w,order:x,isSubmitting:v,updateOrder:b,submitPaymentWithoutDetails:S,submitPaymentPaypal:j,submitPaymentStripe:C}=xp({onUpdateOrderSuccess:()=>!!I&&c(!0),onSubmitPaymentWithoutDetailsSuccess:()=>(d(l("checkout.payment_success"),"success"),t(y==="svod"?m:g,{replace:!0})),onSubmitPaypalPaymentSuccess:({redirectUrl:se})=>{window.location.href=se},onSubmitStripePaymentSuccess:()=>t(J(s,"waiting-for-payment"),{replace:!0})}),{values:{couponCode:I,paymentMethodId:P},setValue:k,submitting:N,errors:T,handleChange:O,handleSubmit:H}=ut({initialValues:{couponCode:"",paymentMethodId:((Q=(ie=w==null?void 0:w[0])==null?void 0:ie.id)==null?void 0:Q.toString())||""},onSubmit:({couponCode:se,paymentMethodId:ge})=>(c(!1),b.mutateAsync({couponCode:se,paymentMethodId:parseInt(ge)})),onSubmitSuccess:({couponCode:se})=>c(!!se),onSubmitError:({error:se})=>{var ge;se instanceof Je&&((ge=se.errors.order)!=null&&ge.includes(`Order with id ${x==null?void 0:x.id} not found`))&&t(J(s,"choose-offer"),{replace:!0})}}),U=se=>{O(se),b.mutateAsync({couponCode:I,paymentMethodId:parseInt(se.target.value)})};if(h.useEffect(()=>{if(!f)return t(u,{replace:!0})},[t,u,f]),h.useEffect(()=>{w!=null&&w.length&&k("paymentMethodId",w[0].id.toString())},[w,k]),h.useEffect(()=>()=>c(!1),[]),!f||!x||!w||!y)return n.jsx("div",{style:{height:300},children:n.jsx(ye,{inline:!0})});const L=Et("payment-cancelled"),R=Et("waiting-for-payment",{offerId:f==null?void 0:f.offerId}),X=Et("payment-error"),ee=y==="svod"?R:Ee(window.location.href,{u:""}),z=window.location.href,E=w==null?void 0:w.find(se=>se.id===parseInt(P)),$=!(x!=null&&x.requiredPaymentDetails),G=(E==null?void 0:E.methodName)==="card"&&(E==null?void 0:E.provider)==="stripe",te=(E==null?void 0:E.methodName)==="card"&&(E==null?void 0:E.paymentGateway)==="adyen",oe=(E==null?void 0:E.methodName)==="paypal";return n.jsxs(Up,{order:x,offer:f,offerType:y,error:T.form,onBackButtonClick:_,paymentMethods:w,paymentMethodId:P,onPaymentMethodChange:U,onCouponFormSubmit:H,onCouponInputChange:O,onRedeemCouponButtonClick:()=>o(!0),onCloseCouponFormClick:()=>o(!1),couponInputValue:I,couponFormOpen:a,couponFormApplied:i,couponFormSubmitting:N,couponFormError:T.couponCode,submitting:v||e,children:[$&&n.jsx(qp,{onSubmit:S.mutateAsync,error:((W=S.error)==null?void 0:W.message)||null}),G&&n.jsx(Yp,{onPaymentFormSubmit:async se=>await C.mutateAsync({cardPaymentPayload:se,referrer:z,returnUrl:R})}),te&&n.jsx(n.Fragment,{children:n.jsx(Kp,{paymentSuccessUrl:y==="svod"?m:g,setUpdatingOrder:r,orderId:x.id,type:"card"})}),oe&&n.jsx(wc,{onSubmit:()=>j.mutate({successUrl:ee,waitingUrl:R,cancelUrl:L,errorUrl:X,couponCode:I}),error:((q=j.error)==null?void 0:q.message)||null})]})},na=()=>{const s=V(vt),t=V(_e),{mediaOffers:e,subscriptionOffers:r,switchSubscriptionOffers:a,requestedMediaOffers:o}=je(({mediaOffers:f,subscriptionOffers:y,switchSubscriptionOffers:w,requestedMediaOffers:x})=>({mediaOffers:f,subscriptionOffers:y,switchSubscriptionOffers:w,requestedMediaOffers:x}),he),{isLoading:i}=Ue({queryKey:["initialiseOffers",o],queryFn:s.initialiseOffers}),c=Ye({mutationKey:["chooseOffer"],mutationFn:s.chooseOffer}),l=Ye({mutationKey:["switchSubscription"],mutationFn:s.switchSubscription,onSuccess:()=>t.reloadSubscriptions({delay:3e3,retry:10})}),d=e.length>0,u=r.length>0,m=o.some(f=>f.premier),g=(r.length>0||a.length>0)&&d&&!m,_=m||!u?"tvod":"svod";return{isLoading:i||c.isLoading,mediaOffers:e,subscriptionOffers:r,switchSubscriptionOffers:a,chooseOffer:c,switchSubscription:l,hasMultipleOfferTypes:g,defaultOfferType:_}},ar=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"})),Zp="_title_1h3nw_1",Xp="_subtitle_1h3nw_7",ef="_offerGroupSwitch_1h3nw_13",tf="_label_1h3nw_19",sf="_offers_1h3nw_24",nf="_offer_1h3nw_13",rf="_radio_1h3nw_41",af="_offerGroupLabel_1h3nw_68",of="_offerTitle_1h3nw_80",cf="_offerDivider_1h3nw_86",lf="_offerBenefits_1h3nw_93",df="_fill_1h3nw_114",uf="_offerPrice_1h3nw_118",De={title:Zp,subtitle:Xp,offerGroupSwitch:ef,label:tf,offers:sf,offer:nf,radio:rf,offerGroupLabel:af,offerTitle:of,offerDivider:cf,offerBenefits:lf,fill:df,offerPrice:uf},mf=({offer:s,selected:t,onChange:e})=>{const{t:r}=A("account"),a=c=>{if(c.freeDays)return r("choose_offer.benefits.first_days_free",{count:c.freeDays});if(c.freePeriods){const l=r(`periods.${c.period}`,{count:c.freePeriods});return r("choose_offer.benefits.first_periods_free",{count:c.freePeriods,period:l})}return null},o=(c,l)=>n.jsxs("li",{children:[n.jsx(Y,{icon:l}),c,n.jsx("span",{className:"hidden",children:"."})]}),i=({title:c,periodString:l,secondBenefit:d})=>n.jsxs("div",{className:De.offer,"aria-labelledby":`title-${s.offerId}`,children:[n.jsx("input",{className:De.radio,onChange:e,type:"radio",name:"selectedOfferId",value:s.offerId,id:s.offerId,checked:t,"data-testid":(s.offerId,void 0)}),n.jsx("div",{className:De.label,children:n.jsxs("label",{htmlFor:s.offerId,children:[n.jsx("h2",{className:De.offerTitle,id:`title-${s.offerId}`,children:c}),n.jsx("span",{className:"hidden",children:"."}),n.jsx("hr",{className:De.offerDivider,"aria-hidden":!0}),n.jsxs("ul",{className:De.offerBenefits,children:[s.freeDays||s.freePeriods?o(a(s)||"",ar):null,!!d&&o(d,ar),o(r("choose_offer.benefits.watch_on_all_devices"),ar)]}),n.jsx("div",{className:De.fill}),n.jsxs("div",{className:De.offerPrice,children:[au(s)," ",!!l&&n.jsxs("small",{children:["/",l]})]})]})})]});if(Kr(s)){const c=s.period==="month";return i({title:r(c?"choose_offer.monthly":"choose_offer.yearly"),secondBenefit:r("choose_offer.benefits.cancel_anytime"),periodString:r(c?"periods.month":"periods.year")})}return i({title:s.offerTitle,secondBenefit:s.durationPeriod&&s.durationAmount?r("choose_offer.tvod_access",{period:s.durationPeriod,count:s.durationAmount}):void 0})},hf=({values:s,errors:t,submitting:e,offers:r,showOfferTypeSwitch:a,onChange:o,onSubmit:i,onBackButtonClickHandler:c})=>{const l=K(g=>g.config.siteName),{t:d}=A("account"),{selectedOfferType:u,selectedOfferId:m}=s;return n.jsxs("form",{onSubmit:i,"data-testid":void 0,noValidate:!0,children:[c?n.jsx(kc,{onClick:c}):null,n.jsx("h1",{className:De.title,children:d("choose_offer.title")}),n.jsx("p",{className:De.subtitle,children:d("choose_offer.watch_this_on_platform",{siteName:l})}),t.form?n.jsx(Ae,{variant:"error",children:t.form}):null,a&&n.jsxs("div",{className:De.offerGroupSwitch,children:[n.jsx("input",{className:De.radio,onChange:o,type:"radio",name:"selectedOfferType",id:"svod",value:"svod",checked:u==="svod"}),n.jsx("label",{className:B(De.label,De.offerGroupLabel),htmlFor:"svod",children:d("choose_offer.subscription")}),n.jsx("input",{className:De.radio,onChange:o,type:"radio",name:"selectedOfferType",id:"tvod",value:"tvod",checked:u==="tvod"}),n.jsx("label",{className:B(De.label,De.offerGroupLabel),htmlFor:"tvod",children:d("choose_offer.one_time_only")})]}),n.jsx("div",{className:De.offers,children:r.length?r.map(g=>n.jsx(mf,{offer:g,selected:m===g.offerId,onChange:o},g.offerId)):n.jsx("p",{children:d("choose_offer.no_pricing_available")})}),e&&n.jsx(ye,{transparentBackground:!0,inline:!0}),n.jsx(D,{label:d("choose_offer.continue"),disabled:e||!r.length,variant:"contained",color:"primary",type:"submit",fullWidth:!0})]})},wi=()=>{const s=le(),t=ue(),{t:e}=A("account"),r=Be("u")==="upgrade-subscription",a=M(({pendingOffer:P})=>({isPendingOffer:!!P})),{isLoading:o,mediaOffers:i,subscriptionOffers:c,switchSubscriptionOffers:l,defaultOfferType:d,hasMultipleOfferTypes:u,chooseOffer:m,switchSubscription:g}=na(),_=J(t,"checkout"),f=J(t,"upgrade-subscription-pending"),y=J(t,"upgrade-subscription-success"),w=J(t,"upgrade-subscription-error"),{values:x,errors:v,submitting:b,setValue:S,handleSubmit:j,handleChange:C}=ut({initialValues:{selectedOfferType:d,selectedOfferId:void 0},validationSchema:ce().shape({selectedOfferId:Ss().required(e("choose_offer.field_required")),selectedOfferType:Ss().required(e("choose_offer.field_required"))}),onSubmit:async({selectedOfferType:P,selectedOfferId:k})=>{if(!P||!k)return;const N=I.find(T=>T.offerId===k);if(N&&(await m.mutateAsync(N),r))return await g.mutateAsync()},onSubmitSuccess:async()=>{if(r&&a)return s(f);if(r)return s(y);s(_)},onSubmitError:()=>s(w)}),I=x.selectedOfferType==="tvod"?i:r?l:c;return h.useEffect(()=>{var k;if(o||!I.length)return;const P=(k=I[I.length-1])==null?void 0:k.offerId;S("selectedOfferId",P)},[I,x.selectedOfferType,S,o]),h.useEffect(()=>{o||!d||S("selectedOfferType",d)},[o,d,S]),o?n.jsx("div",{style:{height:300},children:n.jsx(ye,{inline:!0})}):n.jsx(hf,{onSubmit:j,onChange:C,values:x,errors:v,submitting:b,offers:I,showOfferTypeSwitch:u})},pf="_container_jvxwc_1",ff="_error_jvxwc_25",gf="_medium_jvxwc_28",_f="_select_jvxwc_31",yf="_disabled_jvxwc_38",vf="_option_jvxwc_69",ps={container:pf,error:ff,medium:gf,select:_f,disabled:yf,option:vf},Ec=({required:s,className:t,disabled:e,defaultLabel:r,options:a,optionsStyle:o,editing:i=!0,value:c,onChange:l,id:d,name:u,error:m,helperTextId:g,type:_,...f})=>{const y=b=>{if(!i)return b.preventDefault();l==null||l(b)},w=B(ps.container,{[ps.error]:m,[ps.disabled]:e},t),x={"aria-required":!!s,"aria-invalid":!!(s&&m&&c!==""),"aria-describedby":g},v={id:d,name:u,value:c,disabled:e,className:ps.select,readOnly:!i,required:s,...x,...f};return n.jsx("div",{className:B({[w]:i}),children:n.jsxs("select",{...v,onChange:y,children:[r&&n.jsx("option",{className:B(ps.option,o),value:"",disabled:s,children:r}),a&&a.map(b=>n.jsx("option",{className:B(ps.option,o),value:typeof b=="string"?b:b.value,children:typeof b=="string"?b:b.label},typeof b=="string"?b:b.value))]})})},ra=({name:s,className:t,label:e,error:r,helperText:a,editing:o=!0,required:i=!1,size:c="medium",testId:l,lang:d,...u})=>n.jsx(an,{className:t,error:r,helperText:a,label:e,required:i,editing:o,testId:l,name:s,size:c,lang:d,renderInput:m=>n.jsx(Ec,{name:s,required:i,editing:o,error:r,size:c,...m,...u})}),xf="_checkbox_13vmv_1",wf="_error_13vmv_17",bf="_row_13vmv_68",or={checkbox:xf,error:wf,row:bf},Bn=({className:s,label:t,checkboxLabel:e,name:r,onChange:a,editing:o=!0,value:i,helperText:c,error:l,required:d,lang:u,size:m,...g})=>{const _=B(or.checkbox,{[or.error]:l},s),f=y=>{if(!o)return y.preventDefault();a==null||a(y)};return n.jsx(an,{className:_,name:r,label:t,editing:o,required:d,error:l,helperText:c,renderInput:({id:y,helperTextId:w})=>n.jsxs("div",{className:or.row,children:[n.jsx("input",{name:r,type:"checkbox",id:y,value:i,"aria-required":d,"aria-describedby":w,...g,onChange:f,readOnly:!o}),n.jsxs("label",{htmlFor:y,lang:u,children:[d?n.jsx("span",{role:"presentation","aria-hidden":"true",children:"*"}):"",e]})]})})},jf="_radio_p1qnp_1",Sf="_error_p1qnp_6",bi={radio:jf,error:Sf},Nc=({name:s,onChange:t,label:e,value:r,editing:a=!0,size:o,values:i,helperText:c,error:l,required:d,disabled:u,lang:m,...g})=>{const _=f=>{if(!a)return f.preventDefault();t==null||t(f)};return n.jsx(an,{name:s,label:e,error:l,helperText:c,required:d,renderInput:({id:f,helperTextId:y})=>n.jsx("div",{id:f,children:i.map(({value:w,label:x},v)=>n.jsxs("div",{className:B(bi.radio,{[bi.error]:l}),lang:m,children:[n.jsx("input",{value:w,name:s,type:"radio",id:f+v,onChange:_,checked:r===w,required:d,disabled:u,"aria-describedby":y,...g}),n.jsx("label",{htmlFor:f+v,children:x})]},v))})})},Cf="_container_n2mrr_1",Pf="_error_n2mrr_10",kf="_disabled_n2mrr_13",Ef="_leftControl_n2mrr_16",Nf="_input_n2mrr_16",If="_rightControl_n2mrr_19",Af="_control_n2mrr_31",Lf="_dateField_n2mrr_62",Tf="_hiddenInput_n2mrr_102",Kt={container:Cf,error:Pf,disabled:kf,leftControl:Ef,input:Nf,rightControl:If,control:Af,dateField:Lf,hiddenInput:Tf},$f=s=>{if(!s)return null;const t=new Date(s);return isNaN(t.getTime())?null:t},Ic=s=>s>0&&s<10?`0${s}`:s.toString(),Ac=(s,t,e)=>Math.min(e,Math.max(t,s)),ir=(s,t,e)=>{const r=Ac(parseInt(s),t,e);return isNaN(r)?"":s.length>0&&r<10?Ic(r):r.toString()},cr=(s,t,e)=>{const r=Ac(parseInt(s),t,e);return isNaN(r)?"":s.length>1&&r<10?Ic(r):r.toString()},Lc=({className:s,label:t,error:e,helperText:r,value:a,onChange:o,format:i="YYYY-MM-DD",name:c,editing:l,lang:d,required:u,onFocus:m,testId:g})=>{const _=$f(a),[f,y]=h.useState({date:(_==null?void 0:_.getDate().toString())||"",month:_?(_.getMonth()+1).toString():"",year:(_==null?void 0:_.getFullYear().toString())||""}),w=rt("text-field",c),x=rt("helper_text",c),v=h.useRef(null),b=B(Kt.dateField,{[Kt.error]:e},s),S=k=>{k.currentTarget.select(),m==null||m(k)},j=k=>{var N;if(k.key==="Backspace"&&f[k.currentTarget.name]==="")return(N=k.currentTarget.previousElementSibling)==null||N.focus(),k.preventDefault();if(!/^[0-9]$/.test(k.key)&&k.key!=="Tab"&&k.key!=="Backspace")return k.preventDefault()},C=k=>{const{name:N,value:T}=k.target;y(O=>{const H=N==="date"?ir(T,1,31):O.date,U=N==="month"?ir(T,1,12):O.month,L=N==="year"?ir(T,1900,2100):O.year;return{date:H,month:U,year:L}})},I=(k,N,T)=>{var L,R;const O=(L=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:L.set,H=k&&N&&T?i.replace("YYYY",T).replace("MM",N).replace("DD",k):"";O==null||O.call(v.current,H);const U=new Event("input",{bubbles:!0});(R=v.current)==null||R.dispatchEvent(U)},P=k=>{var R;const{name:N,value:T}=k.target,O=(R=k.currentTarget)==null?void 0:R.nextElementSibling,H=N==="date"?cr(T,0,31):f.date,U=N==="month"?cr(T,0,12):f.month,L=N==="year"?cr(T,0,2100).slice(0,4):f.year;y({date:H,month:U,year:L}),I(H,U,L),(O&&N==="month"&&U.length===2||N==="date"&&H.length===2)&&setTimeout(()=>O.focus(),1)};return n.jsx(an,{className:b,name:c,helperText:r,error:e,label:t,editing:l,lang:d,required:u,testId:g,renderInput:()=>n.jsxs("div",{className:Kt.container,children:[n.jsx("input",{ref:v,id:`${w}-hidden`,className:Kt.hiddenInput,name:c,onChange:o,"aria-invalid":e,"aria-describedby":x}),n.jsx("input",{className:Kt.input,name:"date",placeholder:"dd",value:f.date,onFocus:S,onBlur:C,onChange:P,onKeyDown:j,maxLength:2,type:"number",id:`${w}-date`,autoComplete:"bday-day"})," / ",n.jsx("input",{className:Kt.input,name:"month",placeholder:"mm",value:f.month,onFocus:S,onBlur:C,onChange:P,onKeyDown:j,maxLength:2,type:"number",id:`${w}-month`,autoComplete:"bday-month"})," / ",n.jsx("input",{className:Kt.input,name:"year",placeholder:"yyyy",value:f.year,onFocus:S,onBlur:C,onChange:P,onKeyDown:j,maxLength:4,type:"number",id:`${w}-year`,autoComplete:"bday-year"})]})})},Of="_title_a6ei2_1",ji={title:Of,continue:"_continue_a6ei2_7"},Df=({initialValues:s,onSubmit:t,fields:e,questions:r,onQuestionChange:a,questionValues:o,questionErrors:i})=>{var w,x,v,b,S;const{t:c}=A("account"),{setValue:l,handleSubmit:d,handleChange:u,values:m,errors:g,validationSchemaError:_,submitting:f}=ut({initialValues:s,onSubmit:t}),y=({value:j,key:C,question:I,required:P,enabled:k})=>{if(!k)return null;const N=j==null?void 0:j.split(";").map(O=>{const[H,U=H]=O.split(":");return{value:H,label:U}}),T={name:C,onChange:a,error:!!i[C],helperText:i[C],required:P,key:C};return N.length===1&&N[0].value===""?n.jsx(pe,{value:o[C],label:I,...T}):N.length===1?n.jsx(Bn,{checked:!!o[C],value:N[0].value,label:I,checkboxLabel:N[0].label,...T}):N.length===2?n.jsx(Nc,{values:N,value:o[C],label:I,...T}):N.length>2?n.jsx(ra,{options:N,value:o[C],label:I,defaultLabel:c("personal_details.select_answer"),...T}):null};return n.jsxs("form",{onSubmit:d,"data-testid":void 0,noValidate:!0,children:[n.jsx("h2",{className:ji.title,children:c("personal_details.title")}),g.form?n.jsx(Ae,{variant:"error",visible:!_,children:g.form}):null,(w=e.firstNameLastName)!=null&&w.enabled?n.jsxs(Ne.Fragment,{children:[n.jsx(pe,{value:m.firstName,onChange:u,label:c("personal_details.fist_name"),placeholder:c("personal_details.fist_name"),error:!!g.firstName,helperText:g.firstName,required:e.firstNameLastName.required,name:"firstName",autoComplete:"given-name"}),n.jsx(pe,{value:m.lastName,onChange:u,label:c("personal_details.last_name"),placeholder:c("personal_details.last_name"),error:!!g.lastName,helperText:g.lastName,required:e.firstNameLastName.required,name:"lastName",autoComplete:"family-name"})]}):null,(x=e.companyName)!=null&&x.enabled?n.jsx(pe,{value:m.companyName,onChange:u,label:c("personal_details.company_name"),placeholder:c("personal_details.company_name"),error:!!g.companyName,helperText:g.companyName,required:e.companyName.required,name:"companyName",autoComplete:"organization"}):null,(v=e.address)!=null&&v.enabled?n.jsxs(Ne.Fragment,{children:[n.jsx(pe,{value:m.address,onChange:u,label:c("personal_details.address"),placeholder:c("personal_details.address"),error:!!g.address,helperText:g.address,required:e.address.required,name:"address",autoComplete:"address-line1"}),n.jsx(pe,{value:m.address2,onChange:u,label:c("personal_details.address2"),placeholder:c("personal_details.address2"),error:!!g.address2,helperText:g.address2,name:"address2",autoComplete:"address-line2"}),n.jsx(pe,{value:m.city,onChange:u,label:c("personal_details.city"),placeholder:c("personal_details.city"),error:!!g.city,helperText:g.city,required:e.address.required,name:"city",autoComplete:"address-level2"}),n.jsx(pe,{value:m.state,onChange:u,label:c("personal_details.state"),placeholder:c("personal_details.state"),error:!!g.state,helperText:g.state,required:e.address.required,name:"state",autoComplete:"address-level1"}),n.jsx(pe,{value:m.postCode,onChange:u,label:c("personal_details.post_code"),placeholder:c("personal_details.post_code"),error:!!g.postCode,helperText:g.postCode,required:e.address.required,name:"postCode",autoComplete:"postal-code"})]}):null,(b=e.phoneNumber)!=null&&b.enabled?n.jsx(pe,{value:m.phoneNumber,onChange:u,label:c("personal_details.phone_number"),placeholder:c("personal_details.phone_number"),error:!!g.phoneNumber,helperText:g.phoneNumber,required:e.phoneNumber.required,name:"phoneNumber"}):null,(S=e.birthDate)!=null&&S.enabled?n.jsx(Lc,{value:m.birthDate,onChange:j=>l("birthDate",j.currentTarget.value),label:c("personal_details.birth_date"),error:!!g.birthDate,helperText:g.birthDate,required:e.birthDate.required,name:"birthDate"}):null,r.map(j=>y(j)),n.jsx(D,{className:ji.continue,type:"submit",label:c("personal_details.continue"),variant:"contained",color:"primary",size:"large",disabled:f,fullWidth:!0}),f&&n.jsx(ye,{transparentBackground:!0,inline:!0})]})},jt=(s,t)=>s?F().required(t):Ss().notRequired(),Ff=()=>{const s=V(_e),t=le(),e=ue(),{t:r}=A("account"),a=K(b=>b.accessModel),{data:o,isLoading:i}=Ue("captureStatus",s.getCaptureStatus),{mediaOffers:c}=na(),l=c.length>0,[d,u]=h.useState({}),[m,g]=h.useState({}),_=h.useMemo(()=>Object.fromEntries((o==null?void 0:o.settings.map(b=>[b.key,b]))||[]),[o]),f=h.useMemo(()=>(o==null?void 0:o.settings.filter(b=>!!b.question))||[],[o]),y=h.useCallback(()=>{const b=a===Me.SVOD||a===Me.AUTHVOD&&l;t(J(e,b?"choose-offer":"welcome"),{replace:!0})},[t,e,a,l]);h.useEffect(()=>{o&&((!o.isCaptureEnabled||!o.shouldCaptureBeDisplayed)&&y(),f&&u(Object.fromEntries(f.map(b=>[b.key,""]))))},[o,y,f]);const w=h.useMemo(()=>{const[b,S]=(()=>{var j,C;if((j=_.firstNameLastName)!=null&&j.enabled){const I=(C=_.firstNameLastName)==null?void 0:C.answer;return[(I==null?void 0:I.firstName)||"",(I==null?void 0:I.lastName)||""]}return["",""]})();return{firstName:b,lastName:S,birthDate:"",companyName:"",phoneNumber:"",address:"",address2:"",city:"",state:"",postCode:"",country:""}},[_]),x=b=>{const S=b.target.type==="checkbox"&&!b.target.checked?"":b.target.value;u(j=>({...j,[b.target.name]:S}))},v=async(b,{setErrors:S,setSubmitting:j,setValidationSchemaError:C,validate:I})=>{var T,O,H,U,L,R,X,ee,z,E;const P=r("personal_details.this_field_is_required"),k=ce().shape({firstName:jt(!!((T=_.firstNameLastName)!=null&&T.required),P),lastName:jt(!!((O=_.firstNameLastName)!=null&&O.required),P),address1:jt(!!((H=_.address)!=null&&H.required),P),address2:jt(!!((U=_.address)!=null&&U.required),P),postCode:jt(!!((L=_.address)!=null&&L.required),P),state:jt(!!((R=_.address)!=null&&R.required),P),city:jt(!!((X=_.address)!=null&&X.required),P),companyName:jt(!!((ee=_.companyName)!=null&&ee.required),P),birthDate:(z=_.birthDate)!=null&&z.required?F().required(P).matches(/\d{4}-\d{2}-\d{2}/,r("personal_details.birth_date_not_valid")):Ss().notRequired(),phoneNumber:jt(!!((E=_.phoneNumber)!=null&&E.required),P)}),N={};if(f.forEach($=>{$.enabled&&$.required&&!d[$.key]&&(N[$.key]=r("personal_details.this_field_is_required"))}),g(N),!I(k)||Object.keys(N).length){j(!1),C(!0);return}try{const $=te=>Object.fromEntries(Object.keys(te).filter(oe=>te[oe]!=="").map(oe=>[oe,te[oe]])),G=f.map(te=>({question:te.question,questionId:te.key,value:d[te.key]}));await s.updateCaptureAnswers($({...b,customAnswers:G})),y()}catch($){$ instanceof Error&&S({form:$.message})}j(!1)};return i?n.jsx("div",{style:{height:400},children:n.jsx(ye,{inline:!0})}):n.jsx(Df,{initialValues:w,fields:_,questions:f,onQuestionChange:x,questionValues:d,questionErrors:m,onSubmit:v})};function Tc(s){const t=V(_e),{data:e,error:r}=Ue(["socialUrls",s],()=>t.getSocialLoginUrls(s),{enabled:t.getFeatures().hasSocialURLs,retry:!1}),a=h.useMemo(()=>e?e.reduce((o,i)=>({...o,...i}),{}):null,[e]);return r||!a?null:a}const $c=({type:s,value:t="",label:e,options:r,editing:a,lang:o,...i})=>{const{t:c,i18n:l}=A(),d=h.useMemo(()=>s&&["country","us_state"].includes(s)?Object.keys(l.getResourceBundle(l.language,s)).map(m=>({value:m,label:c(`${s}:${m}`)})):r?Object.entries(r).map(([u,m])=>({value:u,label:m})):[],[s,r,l,c]);switch(s){case"input":return n.jsx(pe,{...i,value:String(t),label:e,testId:void 0});case"radio":return n.jsx(Nc,{...i,label:e,values:d,value:String(t),"data-testid":void 0,lang:o});case"select":case"country":case"us_state":return n.jsx(ra,{...i,options:d,value:String(t),label:e,defaultLabel:i.placeholder,testId:void 0,lang:o});case"datepicker":return n.jsx(Lc,{...i,value:String(t),label:e,testId:void 0});default:return n.jsx(Bn,{...i,checkboxLabel:e,checked:Gt(t),"data-testid":void 0,lang:o})}},Mf="_link_1nyb9_1",Bf={link:Mf},Xs=({to:s,href:t,children:e,className:r,onClick:a,target:o,...i})=>{const c=B(Bf.link,r);return s?n.jsx(tn,{to:s,className:c,onClick:a,...i,children:e}):n.jsx("a",{href:t,className:c,onClick:a,target:o,rel:o==="_blank"?"noreferrer":void 0,...i,children:e})},Rf="_title_io7pr_1",Hf="_bottom_io7pr_11",Uf="_alreadyAccount_io7pr_16",Wf="_login_io7pr_20",Vf="_customFields_io7pr_27",_n={title:Rf,continue:"_continue_io7pr_7",bottom:Hf,alreadyAccount:Uf,login:Wf,customFields:Vf},qf=({onSubmit:s,onChange:t,onBlur:e,values:r,errors:a,submitting:o,validationError:i,loading:c,publisherConsents:l,consentValues:d,onConsentChange:u,consentErrors:m})=>{const{t:g,i18n:_}=A("account"),f=ue(),y=h.useRef(null),w=_.language!==ne.APP_DEFAULT_LANGUAGE?ne.APP_DEFAULT_LANGUAGE:void 0,x=v=>{const b=Or.sanitize(v),S=/<a(.|\n)*?>/.test(b),j=/<\/a(.|\n)*?>/.test(b);return S&&j?n.jsx("span",{dangerouslySetInnerHTML:{__html:v}}):v};return h.useEffect(()=>{var v;a.form&&((v=y.current)==null||v.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))},[a.form]),n.jsxs("form",{onSubmit:s,"data-testid":void 0,noValidate:!0,children:[n.jsx("div",{ref:y,children:a.form?n.jsx(Ae,{variant:"error",visible:!i,children:a.form}):null}),n.jsx("h2",{className:_n.title,children:g("registration.sign_up")}),n.jsx(pe,{value:r.email,onChange:t,onBlur:e,label:g("registration.email"),placeholder:g("registration.email"),error:!!a.email,helperText:a.email,name:"email",type:"email",autoComplete:"email",required:!0}),n.jsx(Ys,{value:r.password,onChange:t,onBlur:e,label:g("registration.password"),placeholder:g("registration.password"),error:!!a.password,name:"password",autoComplete:"new-password",required:!0}),l&&n.jsx("div",{className:_n.customFields,"data-testid":"custom-reg-fields",children:l.map(v=>{const b=m.find(S=>S===v.name);return n.jsx($c,{type:v.type,name:v.name,options:v.options,label:x(v.label),placeholder:v.placeholder,value:d[v.name]||"",required:v.required,error:!!b,helperText:b?g("registration.field_required"):void 0,onChange:u,lang:w},v.name)})}),n.jsx(D,{className:_n.continue,type:"submit",label:g("registration.continue"),variant:"contained",color:"primary",size:"large",disabled:o,fullWidth:!0}),n.jsxs("p",{className:_n.bottom,children:[g("registration.already_account")," ",n.jsx(Xs,{to:J(f,"login"),children:g("login.sign_in")})]}),(c||o)&&n.jsx(ye,{transparentBackground:!0,inline:!0})]})},zf=()=>{const s=V(_e),t=le(),e=ue(),{t:r}=A("account"),a=Ge(),[o,i]=h.useState({}),[c,l]=h.useState([]),{publisherConsents:d,publisherConsentsLoading:u,loading:m}=M(({publisherConsents:j,publisherConsentsLoading:C,loading:I})=>({publisherConsents:j,publisherConsentsLoading:C,loading:I})),g=({currentTarget:j})=>{if(!j)return;const{name:C,type:I}=j,P=I==="checkbox"?j.checked:j.value;i(k=>({...k,[C]:P})),l(k=>k.filter(N=>N!==C))};h.useEffect(()=>{if(!d){s.getPublisherConsents();return}i(Zd(d))},[s,d]);const _=Tc(Et("personal-details")),{handleSubmit:f,handleChange:y,handleBlur:w,values:x,errors:v,validationSchemaError:b,submitting:S}=ut({initialValues:{email:"",password:""},validationSchema:ce().shape({email:F().email(r("registration.field_is_not_valid_email")).required(r("registration.field_required",{field:r("registration.email")})),password:F().matches(/^(?=.*[a-z])(?=.*[0-9]).{8,}$/,r("registration.invalid_password",{field:r("registration.password")})).required(r("registration.field_required",{field:r("registration.password")}))}),validateOnBlur:!0,onSubmit:async({email:j,password:C})=>{const{consentsErrors:I}=Xd(d||[],o);if(I.length)throw l(I),new Error(r("registration.consents_error"));await s.register(j,C,window.location.href,Cn(d,o))},onSubmitSuccess:()=>{a(r("registration.success"),"success"),t(J(e,"personal-details"))}});return n.jsx(qf,{onSubmit:f,onChange:y,onConsentChange:g,onBlur:w,values:x,errors:v,consentErrors:c,validationError:b,submitting:S,consentValues:o,publisherConsents:d,loading:m||u,socialLoginURLs:_})},Gf="_title_8jji7_1",Jf="_link_8jji7_7",Yf="_bottom_8jji7_11",Kf="_top_8jji7_16",lr={title:Gf,link:Jf,bottom:Yf,top:Kf},Qf=({onSubmit:s,onChange:t,values:e,errors:r,validationError:a,submitting:o,siteName:i})=>{const[c,l]=Xr(),{t:d}=A("account"),u=ue();return n.jsxs("form",{onSubmit:s,"data-testid":void 0,noValidate:!0,children:[r.form?n.jsx(Ae,{variant:"error",visible:!a,children:r.form}):null,n.jsx("h2",{className:lr.title,children:d("login.sign_in")}),n.jsx(pe,{value:e.email,onChange:t,label:d("login.email"),placeholder:d("login.email"),error:!!r.email,helperText:r.email,name:"email",type:"email",required:!0,testId:"login-email-input",autoComplete:"email"}),n.jsx(pe,{value:e.password,onChange:t,label:d("login.password"),placeholder:d("login.password"),error:!!r.password,helperText:r.password,name:"password",type:c?"text":"password",rightControl:n.jsx(We,{"aria-label":d("login.view_password"),onClick:()=>l(),"aria-pressed":c,children:n.jsx(Y,{icon:c?ea:ta})}),required:!0,testId:"login-password-input",autoComplete:"current-password"}),o&&n.jsx(ye,{transparentBackground:!0,inline:!0}),n.jsx(Xs,{className:lr.link,to:J(u,"forgot-password"),children:d("login.forgot_password")}),n.jsx(D,{type:"submit",label:d("login.sign_in"),variant:"contained",color:"primary",size:"large",disabled:o,fullWidth:!0}),n.jsxs("p",{className:lr.bottom,children:[d("login.not_registered",{siteName:i})," ",n.jsx(Xs,{to:J(u,"create-account"),children:d("login.sign_up")})]})]})},Zf=()=>{const s=V(_e),{siteName:t}=K(_=>_.config),e=le(),r=ue(),{t:a}=A("account"),o=Ge(),i=Tc(window.location.href.split("?")[0]),{values:c,errors:l,submitting:d,validationSchemaError:u,handleSubmit:m,handleChange:g}=ut({initialValues:{email:"",password:""},validationSchema:ce().shape({email:F().email(a("login.field_is_not_valid_email")).required(a("login.field_required",{field:a("login.email")})),password:F().required(a("login.field_required",{field:a("login.password")}))}),onSubmit:({email:_,password:f})=>s.login(_,f,window.location.href),onSubmitSuccess:()=>{o(a("login.sign_in_success"),"success"),e(J(r,null))},onSubmitError:({resetValue:_})=>_("password")});return n.jsx(Qf,{values:c,validationError:u,errors:l,submitting:d,siteName:t,socialLoginURLs:i,onSubmit:m,onChange:g})},Xf="_banner_ygdsu_1",eg={banner:Xf},tg=["login","create-account","forgot-password","reset-password","send-confirmation","edit-password"],sg=()=>{const s=le(),t=ue(),e=Be("u"),r=h.useRef(e),a=Be("message"),{loading:o,user:i}=M(({loading:x,user:v})=>({loading:x,user:v}),he),c=K(x=>x.config),{assets:{banner:l},siteName:d}=c,u=e&&tg.includes(e),m=xe(()=>{s(J(t,"login"))}),g=h.useMemo(()=>(e&&(r.current=e),r.current),[e]);h.useEffect(()=>{e&&!o&&!i&&!u&&m()},[e,o,u,i,m]);const _=xe(()=>{s(On(t,{u:null,message:null}))}),f=()=>{if(!i&&o&&!u)return n.jsx("div",{style:{height:300},children:n.jsx(ye,{inline:!0})});switch(g){case"login":return n.jsx(Zf,{});case"create-account":return n.jsx(zf,{});case"personal-details":return n.jsx(Ff,{});case"choose-offer":return n.jsx(wi,{});case"edit-card":return n.jsx(Fh,{});case"upgrade-subscription":return n.jsx(wi,{});case"upgrade-subscription-error":return n.jsx(Zn,{type:"error",onCloseButtonClick:_});case"upgrade-subscription-success":return n.jsx(Zn,{type:"success",onCloseButtonClick:_});case"upgrade-subscription-pending":return n.jsx(Zn,{type:"pending",onCloseButtonClick:_});case"checkout":return n.jsx(Qp,{});case"payment-error":return n.jsx(ii,{type:"error",message:a,onCloseButtonClick:_});case"payment-cancelled":return n.jsx(ii,{type:"cancelled",message:a,onCloseButtonClick:_});case"welcome":return n.jsx(rm,{onCloseButtonClick:_,onCountdownCompleted:_,siteName:d});case"reset-password":return n.jsx(nr,{type:"reset"});case"forgot-password":return n.jsx(nr,{type:"forgot"});case"add-password":return n.jsx(vi,{type:"add"});case"delete-account":case"delete-account-confirmation":return n.jsx(Zm,{});case"warning-account-deletion":return n.jsx(fh,{});case"send-confirmation":return n.jsx(nr,{type:"confirmation"});case"edit-password":return n.jsx(vi,{});case"unsubscribe":return n.jsx(ap,{});case"renew-subscription":return n.jsx(Xh,{});case"payment-method":case"payment-method-success":return n.jsx(Eh,{onCloseButtonClick:_});case"waiting-for-payment":return n.jsx(ah,{});case"finalize-payment":return n.jsx(th,{})}},y=!["delete-account","delete-account-confirmation","edit-card","warning-account-deletion"].includes(g??""),w=["delete-account-confirmation"].includes(g??"")?"large":"small";return n.jsxs(Mn,{size:w,open:!!e,onClose:_,children:[y&&l&&n.jsx("div",{className:eg.banner,children:n.jsx("img",{src:l,alt:""})}),f()]})},ng={jwpAuth:{id:"9qqwmnbx",label:"JWP AUTHVOD"},jwpSvod:{id:"a2kbjdv0",label:"JWP SVOD"},jwpAuthNoWatchlist:{id:"oqrsyxin",label:"JWP Authvod (No WL)"},basicNoAuth:{id:"gnnuzabk",label:"Demo App (No Auth)"},noStyling:{id:"kujzeu1b",label:"No Styling (No Auth)"},inlinePlayer:{id:"ata6ucb8",label:"Inline Player"},cleengAuthvod:{id:"nvqkufhy",label:"Cleeng Authvod"},cleengAuthvodNoWatchlist:{id:"7weyqrua",label:"Cleeng Authvod (No WL)"},svod:{id:"ozylzc5m",label:"Cleeng SVOD"}};const rg=ng;[...Object.values(rg).map(({id:s,label:t})=>({value:s,label:`${s.length>8?"ext-json":s} - ${t}`}))];const ag=V(Gr),og=(s,t)=>{const e=Dr(),r=()=>e.invalidateQueries({queryKey:["entitlements"]}),{data:a,isLoading:o,error:i,isSuccess:c,refetch:l}=Ue("config-init",()=>ag.initializeApp(s,r),{refetchInterval:!1,retry:1,onSettled:d=>t(d==null?void 0:d.config),cacheTime:ks,staleTime:Es});return{data:a,isLoading:o,error:i,isSuccess:c,refetch:l}},ig=s=>{const t=document.querySelector(":root"),{backgroundColor:e,highlightColor:r,headerBackground:a}=s.styling||{},o=ne.APP_BODY_FONT,i=ne.APP_BODY_ALT_FONT;t&&(t.style.setProperty("--highlight-color",r||"#fff"),t.style.setProperty("--highlight-contrast-color",r?Gn(r):"#000"),a&&(t.style.setProperty("--header-background",a),t.style.setProperty("--header-contrast-color",Gn(a))),e&&(t.style.setProperty("--body-background-color",e),t.style.setProperty("--background-contrast-color",Gn(e))),o&&t.style.setProperty("--body-font-family",o),i&&t.style.setProperty("--body-alt-font-family",i))},cg="_title_gkrmh_1",lg="_body_gkrmh_8",dg="_confirmButton_gkrmh_12",dr={title:cg,body:lg,confirmButton:dg},ug=({open:s,title:t,body:e,onConfirm:r,onClose:a,busy:o})=>{const{t:i}=A("common");return n.jsxs(Mn,{open:s,onClose:a,role:"alertdialog",children:[n.jsx("h2",{className:dr.title,children:t}),n.jsx("p",{className:dr.body,children:e}),n.jsx(D,{className:dr.confirmButton,label:i("confirmation_dialog.confirm"),variant:"contained",color:o?"default":"primary",onClick:r,fullWidth:!0,disabled:o,busy:o}),n.jsx(D,{label:i("confirmation_dialog.close"),variant:"outlined",onClick:a,fullWidth:!0,disabled:o})]})};const mg=()=>{const s=Il();return n.jsx(Ze,{error:s})},hg="_markdown_dgrjv_1",pg={markdown:hg},fg={link(s,t,e){const r=/^(https?|www\.|\/\/)/.test(s||""),a=r?'target="_blank"':void 0,o=r?'rel="noopener"':void 0,i=t?`title="${t}"`:void 0,c=[a,o,i].filter(Boolean);return`<a href="${s}" ${c.join(" ")}>${e}</a>`}};jr.use({renderer:fg});const aa=({markdownString:s,className:t,tag:e="div",inline:r=!1})=>{const a=h.useMemo(()=>{const i=(r?jr.parseInline:jr.parse)(s);return Or.sanitize(i,{ADD_ATTR:["target"]})},[r,s]);return Ne.createElement(e,{dangerouslySetInnerHTML:{__html:a},className:B(pg.markdown,t)})},gg="_about_c4gxs_1",_g={about:gg},yg=()=>n.jsx(aa,{className:_g.about,markdownString:`# About JW OTT Webapp
  
JW OTT Webapp is an open-source, dynamically generated video website built around JW Player and JW Platform services. It enables you to easily publish your JW Player-hosted video content with no coding and minimal configuration.

To see an example of JW OTT Webapp in action, see [https://app-preview.jwplayer.com/](https://app-preview.jwplayer.com/).

## Supported Features

- Works with any JW Player edition, from Free to Enterprise (note that usage will count against your monthly JW streaming limits). Only cloud-hosted JW Players are supported.
- It looks great on any device. The responsive UI automatically optimizes itself for desktop, tablet, and mobile screens.
- Populates your site's media content using JSON feeds. If you are using JW Platform, this happens auto-magically based on playlists that you specify. Using feeds from other sources will require you to hack the source code.
- Video titles, descriptions and hero images are populated from JW Platform JSON feed metadata.
- Playback of HLS video content from the JW Platform CDN. You can add external URLs (for example, URLS from your own server or CDN) to your playlists in the Content section of your JW Player account dashboard, but they must be HLS streams (\`.m3u8\` files).
- Support for live video streams (must be registered as external .m3u8 URLs in your JW Dashboard).
- Customize the user interface with your own branding. The default app is configured for JW Player branding and content, but you can easily change this to use your own assets by modifying the \`config.json\` file. Advanced customization is possible (for example, editing the CSS files), but you will need to modify the source code and build from source.
- Site-wide video search and related video recommendations powered by [JW Recommendations](https://docs.jwplayer.com/platform/docs/vdh-learn-about-recommendations).
- Basic playback analytics is reported to your JW Dashboard.
- Ad integrations (VAST, VPAID, GoogleIMA, etc.). These features require a JW Player Ads Edition license. For more information, see the [JW Player pricing page](https://www.jwplayer.com/pricing/).
- A "Favorites" feature for users to save videos for watching later. A separate list for "Continue Watching" is also kept so users can resume watching videos from where they left off. The lists are per-browser at this time (i.e., lists do not sync across user's browsers or devices). The "Continue Watching" list can be disabled in your JW OTT Webapp's \`config.json\` file.
- A grid view for a particular playlist of videos, with the ability to deep-link to the playlist through a static URL.
- Social sharing options using the device native sharing dialog.

## Unsupported Features

- Security-related features (encrypted HLS, DRM, signed URLs)
- Self-hosted JW Players`}),vg=Jr(30),xg=(s,t=void 0)=>{const e=Ql.toString(),r=Dr(),a=V(He),o=ot(d=>d.getPlaylist()),i=ct(d=>d.getPlaylist()),c=Vi(s.map(({contentId:d,type:u},m)=>({enabled:!!d&&(!t||t>m)&&!Kl.some(g=>g===u),queryKey:["playlist",d],queryFn:async()=>{var _;const g=await a.getPlaylistById(d,{page_limit:e});return(_=g==null?void 0:g.playlist)==null||_.forEach(f=>{r.setQueryData(["media",f.mediaid],f)}),g},placeholderData:!!d&&vg,refetchInterval:g=>g&&(Gt(g.refetch)||g.playlist.some(Ur))?1e3*30:!1,retry:!1})));return s.map(({type:d},u)=>{if(d===lt.Favorites)return{data:o,isLoading:!1,isSuccess:!0};if(d===lt.ContinueWatching)return{data:i,isLoading:!1,isSuccess:!0};const{data:m,isSuccess:g,error:_,isPlaceholderData:f}=c[u];return{data:m,isSuccess:g,error:_,isPlaceholderData:f}})},Oc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),oa=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),yn=(s,t)=>{typeof s.addEventListener>"u"?s.addListener(t):s.addEventListener("change",t)},vn=(s,t)=>{typeof s.removeEventListener>"u"?s.removeListener(t):s.removeEventListener("change",t)},Ir=matchMedia("screen and (max-width: 479px)"),Ar=matchMedia("screen and (min-width: 480px) and (max-width: 767px)"),Lr=matchMedia("screen and (min-width: 768px) and (max-width: 1023px)"),Tr=matchMedia("screen and (min-width: 1024px) and (max-width: 1199px)");var ae=(s=>(s[s.xs=0]="xs",s[s.sm=1]="sm",s[s.md=2]="md",s[s.lg=3]="lg",s[s.xl=4]="xl",s))(ae||{});const Si=()=>Ir.matches?0:Ar.matches?1:Lr.matches?2:Tr.matches?3:4,Le=()=>{const[s,t]=h.useState(()=>Si());return h.useEffect(()=>{const e=()=>t(Si());return yn(Ir,e),yn(Ar,e),yn(Lr,e),yn(Tr,e),()=>{vn(Ir,e),vn(Ar,e),vn(Lr,e),vn(Tr,e)}},[]),s},wg="_tileDock_193bv_1",bg="_notInView_193bv_15",jg="_leftControl_193bv_24",Sg="_rightControl_193bv_32",Cg="_emptyTile_193bv_40",Pg="_dots_193bv_48",Qt={tileDock:wg,notInView:bg,leftControl:jg,rightControl:Sg,emptyTile:Cg,dots:Pg},Ci=(s,t)=>{const e=[];return t.map(r=>{let a=`tile_${s.indexOf(r)}`;for(;e.includes(a);)a+="_";return e.push(a),{item:r,key:a}})},kg=(s,t,e,r,a)=>{if(!t)return Ci(s,s);const o=e,i=e+r*3,c=a==="endless"?r:0,l=s.slice(0,r+c+1),m=[...s.slice(0-(r+c+1)),...s,...l].slice(o,i+2);return Ci(s,m)};function Eg({items:s,tilesToShow:t=6,cycleMode:e="endless",spacing:r=12,minimalTouchMovement:a=30,showControls:o=!0,animationModeOverride:i,transitionTime:c="0.6s",wrapWithEmptyTiles:l=!1,showDots:d=!1,renderTile:u,renderLeftControl:m,renderRightControl:g,renderPaginationDots:_,renderPageIndicator:f}){const[y,w]=h.useState(0),[x,v]=h.useState(0),[b,S]=h.useState(-100),[j]=h.useState(i??!window.matchMedia("(prefers-reduced-motion)").matches),[C,I]=h.useState(!1),[P,k]=h.useState(!1),N=h.useRef(),T=100/t,O=(s==null?void 0:s.length)>t,H=O?100-T*(t+1)+b:l?-100:0,U=s.length/t,L=h.useMemo(()=>kg(s,O,y,t,e),[s,O,y,t,e]),R=O&&j&&P?`transform ${c} ease`:"",X=o&&O,ee=X&&!(e==="stop"&&y===0),z=X&&!(e==="stop"&&y===s.length-t),E=h.useCallback(Q=>{if(P)return;const W=Q==="right"?1:-1;let q=y+t*W;q<0&&(e==="stop"&&(q=0),e==="restart"&&(q=y===0?0-t:0)),q>s.length-t&&(e==="stop"&&(q=s.length-t),e==="restart"&&(q=y>=s.length-t?s.length:s.length-t));const ge=Math.abs(y-q)*T*(0-W);v(q),S(-100+ge),j?k(!0):I(!0)},[j,e,y,s.length,T,t,P]),$=h.useCallback(Q=>{const W={x:Q.touches[0].clientX,y:Q.touches[0].clientY};function q(be){const re={x:be.changedTouches[0].clientX,y:be.changedTouches[0].clientY},Oe=Math.abs(re.x-W.x),Ve=Math.abs(re.y-W.y);Oe>Ve&&Oe>10&&(be.preventDefault(),be.stopPropagation())}function se(be){const re={x:be.changedTouches[0].clientX,y:be.changedTouches[0].clientY},Oe=Math.abs(re.x-W.x),Ve=Math.abs(re.y-W.y),wt=re.x<W.x?"right":"left";Oe>a&&Oe>Ve&&E(wt),Te()}function ge(){Te()}function Te(){document.removeEventListener("touchmove",q),document.removeEventListener("touchend",se),document.removeEventListener("touchcancel",ge)}document.addEventListener("touchmove",q,{passive:!1}),document.addEventListener("touchend",se),document.addEventListener("touchcancel",ge)},[a,E]);h.useLayoutEffect(()=>{C&&(()=>{let W=x;W=W>=s.length?x-s.length:W,W=W<0?s.length+x:W,W!==x&&v(W),w(W),S(-100),k(!1),I(!1)})()},[C,y,s.length,x,T,t,R]);const G=Q=>{Q.target===N.current&&I(!0)},te={transform:`translate3d(${H}%, 0, 0)`,WebkitTransform:`translate3d(${H}%, 0, 0)`,transition:R,marginLeft:-r/2,marginRight:-r/2},oe=y-x,ie=()=>{if(d&&O&&_){const Q=U;return n.jsx("div",{"aria-hidden":"true",className:Qt.dots,children:Array.from({length:Q},(W,q)=>_(y,q))})}};return n.jsxs(Ne.Fragment,{children:[n.jsxs("div",{className:Qt.tileDock,children:[ee&&!!m&&n.jsx("div",{className:Qt.leftControl,children:m(()=>E("left"))}),n.jsxs("ul",{ref:N,style:te,onTouchStart:$,onTransitionEnd:G,children:[l?n.jsx("li",{className:Qt.emptyTile,"aria-hidden":"true",style:{width:`${T}%`,paddingLeft:r/2,paddingRight:r/2,boxSizing:"border-box"}}):null,L.map((Q,W)=>{const q=!O||W>t-oe&&W<t*2+1-oe;return n.jsx("li",{"aria-hidden":!q,className:B({[Qt.notInView]:!q}),style:{width:`${T}%`,paddingLeft:r/2,paddingRight:r/2,boxSizing:"border-box",transition:q?"":"opacity .2s ease-in 0s"},children:u(Q.item,q)},Q.key)}),l?n.jsx("li",{className:Qt.emptyTile,"aria-hidden":"true",style:{width:`${T}%`,paddingLeft:r/2,paddingRight:r/2,boxSizing:"border-box"}}):null]}),z&&!!g&&n.jsx("div",{className:Qt.rightControl,children:g(()=>E("right"))})]}),ie(),O&&f&&f(Math.ceil(y/t),Math.ceil(U))]})}const ia=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{fill:"currentColor",d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"})),ca=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),h.createElement("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"})),Ng="_image_f8aiq_1",Ig={image:Ng},Ag=(s,t)=>Ee(s,{width:t}),Lg=({className:s,image:t,onLoad:e,alt:r="",width:a=640})=>{const o=()=>{e&&e()};return t?n.jsx("img",{className:B(s,Ig.image),src:Ag(t,a),onLoad:o,alt:r}):null},Ts=Ne.memo(Lg),Tg="_card_14zgx_1",$g="_poster_14zgx_18",Og="_featured_14zgx_22",Dg="_title_14zgx_22",Fg="_tag_14zgx_37",Mg="_meta_14zgx_46",Bg="_disabled_14zgx_54",Rg="_current_14zgx_74",Hg="_posterImage_14zgx_83",Ug="_visible_14zgx_92",Wg="_currentLabel_14zgx_96",Vg="_aspect11_14zgx_112",qg="_aspect21_14zgx_116",zg="_aspect23_14zgx_120",Gg="_aspect43_14zgx_124",Jg="_aspect53_14zgx_128",Yg="_aspect169_14zgx_132",Kg="_aspect916_14zgx_136",Qg="_aspect913_14zgx_140",Zg="_titleContainer_14zgx_144",Xg="_loading_14zgx_163",e_="_scheduledStart_14zgx_178",t_="_tags_14zgx_200",s_="_lock_14zgx_222",n_="_live_14zgx_231",r_="_scheduled_14zgx_178",a_="_progressContainer_14zgx_241",o_="_progressBar_14zgx_251",fe={card:Tg,poster:$g,featured:Og,title:Dg,tag:Fg,meta:Mg,disabled:Bg,current:Rg,posterImage:Hg,visible:Ug,currentLabel:Wg,aspect11:Vg,aspect21:qg,aspect23:zg,aspect43:Gg,aspect53:Jg,aspect169:Yg,aspect916:Kg,aspect913:Qg,titleContainer:Zg,loading:Xg,scheduledStart:e_,tags:t_,lock:s_,live:n_,scheduled:r_,progressContainer:a_,progressBar:o_};function i_({onHover:s,progress:t,item:e,posterAspect:r="16:9",featured:a=!1,disabled:o=!1,loading:i=!1,isCurrent:c=!1,isLocked:l=!0,currentLabel:d,headingLevel:u=3,url:m,tabIndex:g=0}){const{title:_,duration:f,episodeNumber:y,seasonNumber:w,cardImage:x,mediaStatus:v,scheduledStart:b}=e,{t:S,i18n:{language:j}}=A(["common","video"]),[C,I]=h.useState(!1),P=B(fe.card,{[fe.featured]:a,[fe.disabled]:o}),k=r?fe[`aspect${r.replace(":","")}`]:void 0,N=B(fe.poster,k,{[fe.current]:c}),T=B(fe.posterImage,{[fe.visible]:C}),O=sc(e),H=v===Nt.LIVE||rc(e),U=v===Nt.SCHEDULED,L=()=>{if(i||o||!_)return null;if(O)return n.jsx("div",{className:fe.tag,children:S("video:series")});if(y)return n.jsx("div",{className:fe.tag,children:$n(w,y)});if(f)return n.jsx("div",{className:fe.tag,children:Yr(f)});if(H)return n.jsx("div",{className:B(fe.tag,fe.live),children:S("live")});if(U)return n.jsxs("div",{className:fe.tag,children:[n.jsx(Y,{icon:ca,className:fe.scheduled}),S("scheduled")]})},R=Ne.createElement(`h${u}`,{className:B(fe.title,{[fe.loading]:i})},i?"":_);return n.jsxs(tn,{role:"button",to:m,className:P,onClick:o?X=>X.preventDefault():void 0,onMouseEnter:s,tabIndex:o?-1:g,"data-testid":void 0,children:[!a&&!o&&n.jsxs("div",{className:fe.titleContainer,children:[R,!!b&&Zi(e)&&n.jsx("div",{className:B(fe.scheduledStart,{[fe.loading]:i}),children:kn(b,j)})]}),n.jsxs("div",{className:N,children:[n.jsx(Ts,{className:T,image:x,width:a?640:320,onLoad:()=>I(!0),alt:""}),!i&&n.jsxs("div",{className:fe.meta,children:[a&&!o&&R,n.jsxs("div",{className:fe.tags,children:[l&&n.jsx("div",{className:B(fe.tag,fe.lock),"aria-label":S("card_lock"),role:"img",children:n.jsx(Y,{icon:ia})}),L()]})]}),c&&n.jsx("div",{className:fe.currentLabel,children:d}),t?n.jsx("div",{className:fe.progressContainer,children:n.jsx("div",{className:fe.progressBar,style:{width:`${Math.round(t*100)}%`}})}):null]})]})}const Dc=h.memo(i_),c_="_shelf_faepv_1",l_="_chevron_faepv_6",d_="_disabled_faepv_9",u_="_loadingTitle_faepv_13",m_="_title_faepv_21",h_="_dot_faepv_59",p_="_active_faepv_68",f_="_error_faepv_73",St={shelf:c_,chevron:l_,disabled:d_,loadingTitle:u_,title:m_,dot:h_,active:p_,error:f_},g_={[ae.xs]:1,[ae.sm]:2,[ae.md]:3,[ae.lg]:4,[ae.xl]:5},__={[ae.xs]:1,[ae.sm]:1,[ae.md]:1,[ae.lg]:1,[ae.xl]:1},y_=({playlist:s,type:t,onCardHover:e,title:r,watchHistory:a,featured:o=!1,loading:i=!1,error:c=null,accessModel:l,isLoggedIn:d,hasSubscription:u,posterAspect:m,visibleTilesDelta:g=0})=>{const _=Le(),{t:f}=A("common"),[y,w]=h.useState(!1),x=(o?__[_]:g_[_])+g,v=h.useCallback((P,k)=>{const N=Fe({media:P,playlistId:s.feedid,play:t===lt.ContinueWatching});return n.jsx(Dc,{progress:a?a[P.mediaid]:void 0,onHover:typeof e=="function"?()=>e(P):void 0,featured:o,disabled:!k,loading:i,isLocked:Tn(l,d,u,P),posterAspect:m,item:P,url:N},P.mediaid)},[a,e,o,i,l,d,u,m,s.feedid,t]),b=h.useCallback(P=>n.jsx("div",{className:St.chevron,role:"button",tabIndex:0,"aria-label":f("slide_next"),onKeyDown:k=>(k.key==="Enter"||k.key===" ")&&I(P),onClick:()=>I(P),children:n.jsx(Y,{icon:oa})}),[f]),S=h.useCallback(P=>n.jsx("div",{className:B(St.chevron,{[St.disabled]:!y}),role:"button",tabIndex:y?0:-1,"aria-label":f("slide_previous"),onKeyDown:k=>(k.key==="Enter"||k.key===" ")&&I(P),onClick:()=>I(P),children:n.jsx(Y,{icon:Oc})}),[y,f]),j=(P,k)=>n.jsx("span",{className:B(St.dot,{[St.active]:P===k})},k),C=(P,k)=>n.jsx("div",{"aria-live":"polite",className:"hidden",children:f("slide_indicator",{page:P+1,pages:k})}),I=P=>{w(!0),P()};return c||!(s!=null&&s.playlist)?n.jsx("h2",{className:St.error,children:"Could not load items"}):n.jsxs("div",{className:B(St.shelf),children:[o?null:i?n.jsx("div",{className:St.loadingTitle}):n.jsx("h2",{className:B(St.title),children:r||s.title}),n.jsx(Eg,{items:s.playlist,tilesToShow:x,wrapWithEmptyTiles:o&&s.playlist.length===1,cycleMode:"restart",showControls:!i,showDots:o,transitionTime:"0.3s",spacing:8,renderLeftControl:S,renderRightControl:b,renderPaginationDots:j,renderPageIndicator:C,renderTile:v})]})},v_="_infiniteScrollLoader_6rn4e_1",x_={infiniteScrollLoader:v_},la=()=>n.jsx("div",{className:x_.infiniteScrollLoader,children:n.jsx(ss,{})}),w_="_shelfList_fypeb_1",b_="_shelfContainer_fypeb_6",j_="_featured_fypeb_10",ur={shelfList:w_,shelfContainer:b_,featured:j_},Pi=6,S_=4,Fc=({rows:s})=>{const{accessModel:t}=K(({accessModel:u})=>({accessModel:u}),he),[e,r]=h.useState(Pi),{t:a}=A("error"),o=ct(u=>u.getDictionaryWithSeries()),{user:i,subscription:c}=M(({user:u,subscription:m})=>({user:u,subscription:m}),he),l=xg(s,e);return h.useEffect(()=>()=>r(Pi),[s]),l.every(({data:u,isSuccess:m})=>{var g;return m&&!((g=u==null?void 0:u.playlist)!=null&&g.length)})?n.jsx(Ze,{title:a("empty_shelves_heading"),message:a("empty_shelves_description")}):n.jsx("div",{className:ur.shelfList,children:n.jsx(Fr,{style:{overflow:"hidden"},loadMore:()=>r(u=>u+S_),hasMore:e<s.length,loader:n.jsx(la,{},"loader"),useWindow:!1,children:s.slice(0,e).map(({type:u,featured:m,title:g},_)=>{var b;const{data:f,isPlaceholderData:y,error:w}=l[_];if(!((b=f==null?void 0:f.playlist)!=null&&b.length))return null;const x=uc(f.cardImageAspectRatio||f.shelfImageAspectRatio),v=mc(x);return n.jsx("section",{className:B(ur.shelfContainer,{[ur.featured]:m}),"data-testid":(`${m?"featured":u==="playlist"?qr(g||(f==null?void 0:f.title)):u}`,void 0),"aria-label":g||(f==null?void 0:f.title),children:n.jsx(y_,{loading:y,error:w,type:u,playlist:f,watchHistory:u===lt.ContinueWatching?o:void 0,title:g||(f==null?void 0:f.title),featured:m,accessModel:t,isLoggedIn:!!i,hasSubscription:!!c,posterAspect:x,visibleTilesDelta:v})},`${_}_${f.id}`)})})})},C_=()=>{const{config:s}=K(({config:r,accessModel:a})=>({config:r,accessModel:a}),he),t=s==null?void 0:s.content,{t:e}=A("common");return n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"hideUntilFocus",children:e("home")}),n.jsx(Fc,{rows:t})]})},Re=ts("UIStore",()=>({searchQuery:"",searchActive:!1,userMenuOpen:!1,sideBarOpen:!1,languageMenuOpen:!1})),P_=()=>{const s=h.useRef(!0);return h.useEffect(()=>{s.current=!1},[]),s.current},k_=(s,t)=>{const e=h.useRef(),r=h.useRef(td((...a)=>{e.current&&e.current(...a)},t));return h.useEffect(()=>{e.current=s},[s]),r.current},Mc=()=>{const s=le(),t=k_(a=>{s(`/q/${encodeURIComponent(a)}`)},350),e=h.useCallback(a=>{Re.setState({searchQuery:a}),t(a)},[t]),r=h.useCallback(()=>{const a=Re.getState().preSearchPage;Re.setState({searchQuery:"",preSearchPage:void 0}),s(a||"/")},[s]);return{updateSearchQuery:e,resetSearchQuery:r}},E_=Jr(30);function on(s,t={},e=!0,r=!0){const a=V(He),o=Dr(),i=async(d,u)=>{var g;const m=await a.getPlaylistById(d,{...u});return(g=m==null?void 0:m.playlist)==null||g.forEach(_=>{o.setQueryData(["media",_.mediaid],_)}),m},c=["playlist",s,t],l=!!s&&e;return Ue(c,()=>i(s,t),{enabled:l,placeholderData:r&&l?E_:void 0,refetchInterval:(d,u)=>d&&(Gt(d.refetch)||d.playlist.some(Ur))?1e3*30:!1,retry:!1})}const N_=Jr(30),I_=({siteId:s,enabled:t,query:e})=>{const r=V(He);return Ue(["app-search",e],async()=>await r.getAppContentSearch(s,e),{placeholderData:t?N_:void 0,enabled:t,staleTime:Es,cacheTime:ks})},A_=s=>{var c,l;const{config:t}=K(({config:d})=>({config:d}),he),e=t==null?void 0:t.siteId,r=(c=t==null?void 0:t.features)==null?void 0:c.searchPlaylist,a=Gt((l=t==null?void 0:t.custom)==null?void 0:l.appContentSearch),o=on(r||"",{search:s||""},!a,!!s),i=I_({siteId:e,enabled:a,query:s});return a?{data:i.data,isFetching:i.isFetching,error:i.error}:{isFetching:o.isFetching,error:o.error,data:o.data}},L_="_row_3w89x_1",T_="_cell_3w89x_5",ki={row:L_,cell:T_},$_=sd(function(s){s.scrollIntoView({behavior:"smooth",block:"center"})},300),O_=({className:s,columnCount:t,data:e,renderCell:r})=>{const[a,o]=h.useState(0),[i,c]=h.useState(0),l=h.useRef(null),d=Math.ceil(e.length/t),u=(g,_)=>{const f=document.getElementById(`layout_grid_${g}-${_}`),w=(f==null?void 0:f.querySelector('button, a, input, [tabindex]:not([tabindex="-1"])'))||f;o(g),c(_),w&&(w.focus({preventScroll:!0}),$_(w))},m=xe(g=>{const{key:_,ctrlKey:f}=g;if(!["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(_))return;g.preventDefault();const y=d-1,w=i===0,x=i===t-1,v=a===0,b=a===y,S=(e.length%t||t)-1,j=b?S:t-1,C=Math.min(a+1,y),I=Math.max(a-1,0);switch(_){case"ArrowLeft":return w&&!v?u(I,t-1):u(a,Math.max(i-1,0));case"ArrowRight":return x&&!b?u(C,0):u(a,Math.min(i+1,j));case"ArrowUp":return u(I,i);case"ArrowDown":return u(C,C===y?Math.min(i,S):i);case"Home":return u(f?0:a,0);case"End":return f?u(y,S):u(a,j);case"PageUp":return u(I,i);case"PageDown":return u(C,C===y?Math.min(S,i):i);default:return}});return h.useEffect(()=>{var _;if(!((_=l.current)!=null&&_.contains(document.activeElement)))return;const g=(e.length%t||t)-1;if(i>t-1)return u(a,t-1);if(a===d-1&&i>g)return u(a,g)},[t]),n.jsx("div",{role:"grid",ref:l,"aria-rowcount":d,className:s,onKeyDown:m,children:Array.from({length:d}).map((g,_)=>n.jsx("div",{role:"row","aria-rowindex":_,className:ki.row,children:e.slice(_*t,_*t+t).map((f,y)=>n.jsx("div",{role:"gridcell",id:`layout_grid_${_}-${y}`,"aria-colindex":y,className:ki.cell,style:{width:`${Math.round(100/t)}%`},children:r(f,a===_&&i===y?0:-1)},y))},_))})},D_="_cell_1k7g3_1",F_="_container_1k7g3_6",Ei={cell:D_,container:F_,"cols-1":"_cols-1_1k7g3_10","cols-2":"_cols-2_1k7g3_13","cols-3":"_cols-3_1k7g3_16","cols-4":"_cols-4_1k7g3_19","cols-5":"_cols-5_1k7g3_22","cols-6":"_cols-6_1k7g3_25","cols-7":"_cols-7_1k7g3_28","cols-8":"_cols-8_1k7g3_31","cols-9":"_cols-9_1k7g3_34","cols-10":"_cols-10_1k7g3_37"},Ni=6,M_=4,B_={[ae.xs]:2,[ae.sm]:2,[ae.md]:3,[ae.lg]:4,[ae.xl]:5};function Rn({playlist:s,watchHistory:t,isLoading:e=!1,cols:r=B_,currentCardItem:a,currentCardLabel:o,accessModel:i,isLoggedIn:c,hasSubscription:l,hasMore:d,getUrl:u,loadMore:m,onCardHover:g,headingLevel:_}){const f=Le(),y=uc(s.cardImageAspectRatio||s.shelfImageAspectRatio),w=r[f]+mc(y),[x,v]=h.useState(Ni),b=()=>v(j=>j+M_),S=x*w<s.playlist.length;return h.useEffect(()=>{v(Ni)},[s.feedid]),n.jsx(Fr,{pageStart:0,loadMore:m??b,hasMore:d??S,loader:n.jsx(la,{},"loader"),useWindow:!1,children:n.jsx(O_,{className:B(Ei.container,Ei[`cols-${w}`]),data:m?s.playlist:s.playlist.slice(0,x*w),columnCount:w,renderCell:(j,C)=>n.jsx(Dc,{tabIndex:C,progress:t?t[j.mediaid]:void 0,url:u(j),onHover:typeof g=="function"?()=>g(j):void 0,loading:e,isCurrent:a&&a.mediaid===j.mediaid,currentLabel:o,isLocked:Tn(i,c,l,j),posterAspect:y,item:j,headingLevel:_})})})}const R_="_search_fjwvt_1",H_="_header_fjwvt_26",U_="_error_fjwvt_42",W_="_subHeading_fjwvt_47",xn={search:R_,header:H_,error:U_,subHeading:W_},V_=()=>{const{t:s}=A("search"),{config:t,accessModel:e}=K(({config:v,accessModel:b})=>({config:v,accessModel:b}),he),{siteName:r,features:a}=t,o=rt("search_heading"),i=P_(),c=Re(v=>v.searchQuery),{updateSearchQuery:l}=Mc(),u=zt()["*"],{isFetching:m,error:g,data:_}=A_(u||""),{user:f,subscription:y}=M(({user:v,subscription:b})=>({user:v,subscription:b}),he),w=v=>Fe({media:v,playlistId:a==null?void 0:a.searchPlaylist}),x=h.useMemo(()=>m?s("heading"):u?_!=null&&_.playlist.length?s("title",{count:_.playlist.length,query:u}):s("no_results_heading",{query:u}):s("start_typing"),[m,_==null?void 0:_.playlist.length,u,s]);return h.useEffect(()=>{i&&u&&u!==c&&l(u)},[i,u,c,l]),h.useEffect(()=>()=>{Re.setState({searchQuery:"",searchActive:!1})},[]),(g||!_)&&!m?n.jsxs(Ze,{title:s("error_heading"),children:[n.jsx("h2",{className:xn.subHeading,children:s("error_subheading")}),n.jsx("p",{children:s("error_description")})]}):u?_!=null&&_.playlist.length?n.jsxs("div",{className:xn.search,children:[n.jsx(_t,{children:n.jsxs("title",{children:[x," - ",r]})}),n.jsx("header",{className:xn.header,children:n.jsx("h2",{id:o,"aria-live":m?void 0:"polite",children:x})}),n.jsx(Rn,{"aria-labelledby":o,getUrl:w,playlist:_,isLoading:i,accessModel:e,isLoggedIn:!!f,hasSubscription:!!y})]}):n.jsxs(n.Fragment,{children:[n.jsx(_t,{children:n.jsxs("title",{children:[x," - ",r]})}),n.jsxs(Ze,{title:x,children:[n.jsx("h2",{className:xn.subHeading,children:s("suggestions")}),n.jsxs("ul",{children:[n.jsx("li",{children:s("tip_one")}),n.jsx("li",{children:s("tip_two")}),n.jsx("li",{children:s("tip_three")})]})]})]}):n.jsx(Ze,{title:x})},q_=s=>{const{query:t}=da(),e=V(Xt,!1);return Ye(async r=>e==null?void 0:e.updateProfile(r),{...s,onSettled:(...r)=>{var a;t.refetch(),(a=s==null?void 0:s.onSettled)==null||a.call(s,...r)}})},z_=s=>{const{query:t}=da(),e=V(Xt,!1);return Ye(async r=>e==null?void 0:e.deleteProfile(r),{...s,onSuccess:(...r)=>{var a;t.refetch(),(a=s==null?void 0:s.onSuccess)==null||a.call(s,...r)}})},G_=s=>!!s&&typeof s=="object"&&"message"in s,J_=()=>{const{t:s}=A("user");return(t,e)=>{if(G_(t)&&t.message.includes("409")){e({name:s("profile.validation.name.already_exists")});return}e({form:s("profile.form_error")})}},da=s=>{var d,u;const t=M(m=>m.user),e=K(m=>m.accessModel),{profile:r}=It(),a=!!t,o=V(Xt),i=o.isEnabled(),c=Ue(["listProfiles",(t==null?void 0:t.id)||""],()=>o.listProfiles(),{...s,enabled:a&&i}),l=!!t&&i&&((d=c.data)==null?void 0:d.canManageProfiles)&&!r&&(e==="SVOD"||e==="AUTHVOD");return{query:c,shouldManageProfiles:l,profilesEnabled:!!((u=c.data)!=null&&u.canManageProfiles)}},ua=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"})),Bc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M5,3C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V16.72C21.59,16.37 22,15.74 22,15V9C22,8.26 21.59,7.63 21,7.28V5A2,2 0 0,0 19,3H5M5,5H19V7H13A2,2 0 0,0 11,9V15A2,2 0 0,0 13,17H19V19H5V5M13,9H20V15H13V9M16,10.5A1.5,1.5 0 0,0 14.5,12A1.5,1.5 0 0,0 16,13.5A1.5,1.5 0 0,0 17.5,12A1.5,1.5 0 0,0 16,10.5Z"})),Rc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M19,3H5C3.89,3 3,3.89 3,5V9H5V5H19V19H5V15H3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10.08,15.58L11.5,17L16.5,12L11.5,7L10.08,8.41L12.67,11H3V13H12.67L10.08,15.58Z"})),ma=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})),Y_="_title_gkrmh_1",K_="_body_gkrmh_8",Q_="_confirmButton_gkrmh_12",Ii={title:Y_,body:K_,confirmButton:Q_},ha=({open:s,message:t,onClose:e,isSuccess:r,actionsOverride:a,titleOverride:o})=>{const{t:i}=A("common"),c=rt("alert-heading");return n.jsxs(Mn,{open:s,onClose:e,role:"alertdialog","aria-modal":"true","aria-labelledby":c,children:[n.jsx("h2",{id:c,className:Ii.title,children:o??i(r?"alert.success":"alert.title")}),n.jsx("p",{className:Ii.body,children:t}),a??n.jsx(D,{label:i("alert.close"),variant:"outlined",onClick:e,fullWidth:!0})]})},Z_="_flexBox_17rhj_1",X_="_controls_17rhj_9",ey="_submitConsents_17rhj_16",Ai={flexBox:Z_,controls:X_,submitConsents:ey};function ty({className:s,panelHeaderClassName:t,label:e,editButton:r,saveButton:a,cancelButton:o,onSubmit:i,content:c,readOnly:l=!1}){const d=rt(e),{formState:{values:u,activeSectionId:m,errors:g,isBusy:_},setFormState:f,isLoading:y,onCancel:w}=h.useContext(Hc),x=d===m,v=h.useCallback(({currentTarget:j})=>{if(!j)return;const{name:C,type:I}=j,P=I==="checkbox"?j.checked:j.value;x||w(),f(k=>{const N={...k.values};return C.split(".").reduce((T,O,H,U)=>(H===U.length-1?T[O]=P:T[O]={...T[O]},T[O]),N),{...k,values:N,activeSectionId:d}})},[x,w,d,f]),b=h.useCallback(async function(C){var I;if(C&&C.preventDefault(),i){let P;try{f(k=>({...k,isBusy:!0,errors:[]})),P=await i(u)}catch(k){P={errors:Array.of(k instanceof Error?k.message:k)}}if((I=P==null?void 0:P.errors)!=null&&I.length){f(k=>({...k,errors:P==null?void 0:P.errors,isBusy:!1}));return}}f(P=>({...P,activeSectionId:void 0,isBusy:!1}))},[i,f,u]),S=h.useCallback(function(){x||(w(),f(C=>({...C,activeSectionId:d})))},[x,w,d,f]);return n.jsxs("section",{"aria-labelledby":d,className:s,children:[n.jsx("div",{className:t,children:n.jsx("h2",{id:d,children:e})}),_&&x&&n.jsx(ye,{transparentBackground:!0}),c&&n.jsx("form",{className:Ai.flexBox,noValidate:!0,onSubmit:j=>j.preventDefault(),children:c({values:u,isEditing:x,isBusy:_,onChange:v,...x?{errors:g}:{}})}),(a||r||o)&&n.jsx("div",{className:Ai.controls,children:x?n.jsxs(n.Fragment,{children:[a&&n.jsx(D,{label:a,type:"submit",onClick:b,disabled:y}),o&&n.jsx(D,{label:o,type:"reset",variant:"text",onClick:w})]}):!l&&r&&(typeof r=="object"?r:n.jsx(D,{label:r,type:"button",onClick:S,disabled:y}))})]})}const Hc=h.createContext(void 0);function sy({isLoading:s,initialValues:t,onReset:e,children:r}){const[a,o]=h.useState({values:t,activeSectionId:void 0,isDirty:!1,isBusy:!1}),i=h.useCallback(function(){o(l=>({...l,values:t,isDirty:!1,activeSectionId:void 0,success:!1,errors:void 0})),e&&e()},[t,e]);return h.useEffect(()=>{a.activeSectionId||o(c=>({...c,values:t}))},[t,a.activeSectionId]),n.jsx(Hc.Provider,{value:{isLoading:s,onCancel:i,formState:a,setFormState:o},children:r==null?void 0:r.map((c,l)=>n.jsx(ty,{...c},l))})}const ny="_textWithButtonContainer_1cz0o_1",ry="_customFields_1cz0o_7",mr={textWithButtonContainer:ny,customFields:ry},ay=({panelClassName:s,panelHeaderClassName:t,canUpdateEmail:e=!0})=>{var ee,z;const r=V(_e),{t:a,i18n:o}=A("user"),i=Ge(),c=le(),l=ue(),[d,u]=Xr(),m=Ye(r.exportAccountData),[g,_]=h.useState(!1),f=m.isSuccess?a("account.export_data_success"):a("account.export_data_error"),y=o.language!==ne.APP_DEFAULT_LANGUAGE?ne.APP_DEFAULT_LANGUAGE:void 0;h.useEffect(()=>{(m.isSuccess||m.isError)&&_(!0)},[m.isSuccess,m.isError]);const{customer:w,customerConsents:x,publisherConsents:v}=M(({user:E,customerConsents:$,publisherConsents:G})=>({customer:E,customerConsents:$,publisherConsents:G}),he),{canChangePasswordWithOldPassword:b,canExportAccountData:S,canDeleteAccount:j}=r.getFeatures(),C=(ee=w==null?void 0:w.metadata)==null?void 0:ee.register_source,I=C&&C!=="inplayer"||!1,P=I&&!((z=w==null?void 0:w.metadata)!=null&&z.has_password)||!1;h.useEffect(()=>{if(!v){r.getPublisherConsents();return}},[r,v]);const[k,N]=h.useMemo(()=>{const E=[],$=[];return v==null||v.forEach(G=>{!(G!=null&&G.type)||(G==null?void 0:G.type)==="checkbox"?E.push(G):$.push(G)}),[E,$]},[v]),T=h.useMemo(()=>Qd(v,x),[v,x]),O=h.useMemo(()=>Kd(v,x),[v,x]),H=h.useMemo(()=>({...w,consents:T,consentsValues:O,confirmationPassword:""}),[w,T,O]),U=E=>{const $=Or.sanitize(E),G=/<a(.|\n)*?>/.test($),te=/<\/a(.|\n)*?>/.test($);return G&&te?n.jsx("span",{dangerouslySetInnerHTML:{__html:E}}):E};function L(E){const $={};return E==null||E.flatMap(G=>G.split(",")).forEach(G=>{switch(G.trim()){case"Invalid param email":$.form=a("account.errors.validation_error"),$.email=a("account.errors.invalid_param_email");break;case"Customer email already exists":$.form=a("account.errors.validation_error"),$.email=a("account.errors.email_exists");break;case"Please enter a valid e-mail address.":$.form=a("account.errors.validation_error"),$.email=a("account.errors.please_enter_valid_email");break;case"Invalid confirmationPassword":{$.form=a("account.errors.validation_error"),$.confirmationPassword=a("account.errors.invalid_password");break}case"firstName can have max 50 characters.":{$.form=a("account.errors.validation_error"),$.firstName=a("account.errors.first_name_too_long");break}case"lastName can have max 50 characters.":{$.form=a("account.errors.validation_error"),$.lastName=a("account.errors.last_name_too_long");break}case"Email update not supported":{$.form=a("account.errors.email_update_not_supported");break}case"Wrong email/password combination":{$.form=a("account.errors.wrong_combination");break}default:{$.form=a("account.errors.unknown_error");break}}}),$}function R(E){return{...E,className:s,panelHeaderClassName:t,saveButton:a("account.save"),cancelButton:a("account.cancel"),content:$=>{var te;const G=L($.errors);return n.jsxs(n.Fragment,{children:[G!=null&&G.form?n.jsx(Ae,{variant:"error",children:G.form}):null,(te=E.content)==null?void 0:te.call(E,{...$,errors:G})]})}}}const X=async()=>{if(w){if(I&&P)return await r.resetPassword(w.email,""),c(J(l,"add-password"));c(J(l,b?"edit-password":"reset-password"))}};return n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"hideUntilFocus",children:a("nav.account")}),n.jsx(sy,{initialValues:H,children:[R({label:a("account.about_you"),editButton:a("account.edit_information"),onSubmit:async E=>{const $=Cn(v,{...E.metadata,...E.consentsValues}),G=await r.updateUser({firstName:E.firstName||"",lastName:E.lastName||"",metadata:{...E.metadata,...Nr($),consents:JSON.stringify($)}});return i(a("account.update_success",{section:a("account.about_you")}),"success"),G},content:E=>{var $,G,te,oe;return n.jsxs(n.Fragment,{children:[n.jsx(pe,{name:"firstName",label:a("account.firstname"),value:E.values.firstName||"",onChange:E.onChange,error:!!(($=E.errors)!=null&&$.firstName),helperText:(G=E.errors)==null?void 0:G.firstName,disabled:E.isBusy,editing:E.isEditing,autoComplete:"given-name",lang:y}),n.jsx(pe,{name:"lastName",label:a("account.lastname"),value:E.values.lastName||"",onChange:E.onChange,error:!!((te=E.errors)!=null&&te.lastName),helperText:(oe=E.errors)==null?void 0:oe.lastName,disabled:E.isBusy,editing:E.isEditing,autoComplete:"family-name",lang:y})]})}}),R({label:a("account.email"),onSubmit:async E=>{if(!E.email||!E.confirmationPassword)throw new Error("Wrong email/password combination");const $=await r.updateUser({email:E.email||"",confirmationPassword:E.confirmationPassword});return i(a("account.update_success",{section:a("account.email")}),"success"),$},editButton:a("account.edit_account"),readOnly:!e,content:E=>{var $,G,te,oe;return n.jsxs(n.Fragment,{children:[n.jsx(pe,{name:"email",label:a("account.email"),value:E.values.email||"",onChange:E.onChange,error:!!(($=E.errors)!=null&&$.email),helperText:(G=E.errors)==null?void 0:G.email,disabled:E.isBusy,editing:E.isEditing,autoComplete:"email",required:!0}),E.isEditing&&n.jsx(pe,{name:"confirmationPassword",label:a("account.confirm_password"),value:E.values.confirmationPassword,onChange:E.onChange,error:!!((te=E.errors)!=null&&te.confirmationPassword),helperText:(oe=E.errors)==null?void 0:oe.confirmationPassword,type:d?"text":"password",disabled:E.isBusy,autoComplete:"current-password",rightControl:n.jsx(We,{"aria-label":a("account.view_password"),onClick:()=>u(),"aria-pressed":d,children:n.jsx(Y,{icon:d?ea:ta})}),required:!0})]})}}),R({label:a("account.security"),editButton:n.jsx(D,{label:a(P?"account.add_password":"account.edit_password"),type:"button",onClick:()=>w?X():null})}),R({label:a("account.terms_and_tracking"),saveButton:a("account.update_consents"),onSubmit:async E=>{const $=await r.updateConsents(Cn(v,E.consentsValues));return i(a("account.update_success",{section:a("account.terms_and_tracking")}),"success"),$},content:E=>n.jsx(n.Fragment,{children:k==null?void 0:k.map(($,G)=>{var te;return n.jsx(Bn,{name:`consentsValues.${$.name}`,checked:Gt((te=E.values.consentsValues)==null?void 0:te[$.name]),onChange:E.onChange,checkboxLabel:U($.label),disabled:$.required||E.isBusy,required:$.required,lang:y},G)})})}),(N==null?void 0:N.length)&&R({label:a("account.other_registration_details"),saveButton:a("account.update_consents"),onSubmit:E=>r.updateConsents(Cn(v,E.consentsValues)),content:E=>n.jsx("div",{className:mr.customFields,"data-testid":void 0,children:N.map($=>n.jsx($c,{type:$.type,name:`consentsValues.${$.name}`,options:$.options,label:U($.label),placeholder:$.placeholder,value:E.values.consentsValues[$.name],disabled:$.type==="checkbox"&&$.required||E.isBusy,onChange:E.onChange,required:$.required},$.name))})}),S&&R({label:a("account.export_data_title"),content:E=>n.jsxs("div",{className:mr.textWithButtonContainer,children:[n.jsx("div",{children:n.jsx(Al,{t:a,i18nKey:"account.export_data_body",values:{email:E.values.email}})}),n.jsx("div",{children:n.jsx(D,{label:a("account.export_data_title"),type:"button",disabled:m.isLoading,onClick:async()=>{m.mutate()}})})]})}),j&&R({label:a("account.delete_account.title"),content:()=>n.jsxs("div",{className:mr.textWithButtonContainer,children:[n.jsx("div",{children:a("account.delete_account.body")}),n.jsx("div",{children:n.jsx(D,{label:a("account.delete_account.title"),type:"button",variant:"danger",onClick:()=>{c(J(l,P?"warning-account-deletion":"delete-account"))}})})]})})].filter(id)}),S&&n.jsx(ha,{open:g,message:f,onClose:()=>_(!1),isSuccess:m.isSuccess})]})},oy="_header_1mj0c_1",iy={header:oy},cy={[ae.xs]:2,[ae.sm]:3,[ae.md]:3,[ae.lg]:3,[ae.xl]:3},ly=({playlist:s,accessModel:t,hasSubscription:e,onCardHover:r,onClearFavoritesClick:a})=>{const{t:o}=A("user"),i=c=>Fe({media:c,playlistId:c.feedid});return n.jsxs("div",{children:[n.jsxs("div",{className:iy.header,children:[n.jsx("h1",{children:o("favorites.title")}),s.playlist.length>0?n.jsx(D,{label:o("favorites.clear"),onClick:a}):null]}),s.playlist.length>0?n.jsx(Rn,{getUrl:i,playlist:s,onCardHover:r,cols:cy,isLoading:!1,accessModel:t,isLoggedIn:!0,hasSubscription:e}):n.jsx("p",{children:o("favorites.no_favorites")})]})},dy=(s,t,e,r)=>{const a=V(_e),o=V(vt),i=Ye(a.updateUser,{onSuccess:()=>{M.setState({loading:!1})}});return Ye(o.changeSubscription,{onSuccess:()=>{!s&&t&&i.mutate({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",metadata:{[`${r}_pending_downgrade`]:t}})}})},uy="_user_1l02c_1",my="_leftColumn_1l02c_19",hy="_button_1l02c_30",py="_logoutLi_1l02c_42",fy="_mainColumn_1l02c_51",gy="_panel_1l02c_56",_y="_panelHeader_1l02c_73",yy="_checkbox_1l02c_86",vy="_profileIcon_1l02c_94",Se={user:uy,leftColumn:my,button:hy,logoutLi:py,mainColumn:fy,panel:gy,panelHeader:_y,checkbox:yy,profileIcon:vy},xy=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})),wy="_offerSwitchContainer_booqe_1",by="_activeOfferSwitchContainer_booqe_13",jy="_offerSwitchInfoContainer_booqe_18",Sy="_offerSwitchPlanContainer_booqe_28",Cy="_currentPlanHeading_booqe_36",Py="_activeCurrentPlanHeading_booqe_41",ky="_nextBillingDate_booqe_45",Ey="_price_booqe_51",Ny="_paymentFrequency_booqe_57",Ct={offerSwitchContainer:wy,activeOfferSwitchContainer:by,offerSwitchInfoContainer:jy,offerSwitchPlanContainer:Sy,currentPlanHeading:Cy,activeCurrentPlanHeading:Py,nextBillingDate:ky,price:Ey,paymentFrequency:Ny},Iy=({isCurrentOffer:s,pendingDowngradeOfferId:t,offer:e,selected:r,onChange:a,expiresAt:o})=>{const{t:i,i18n:c}=A(["user","account"]),{customerPriceInclTax:l,customerCurrency:d,period:u}=e,m=t===e.offerId;return n.jsxs("div",{className:B(Ct.offerSwitchContainer,{[Ct.activeOfferSwitchContainer]:r}),children:[n.jsx(Bn,{disabled:m,name:e.offerId,checked:r,onChange:()=>a(e.offerId)}),n.jsxs("div",{className:Ct.offerSwitchInfoContainer,children:[(s||m)&&n.jsxs("div",{className:B(Ct.currentPlanHeading,{[Ct.activeCurrentPlanHeading]:r}),children:[s&&i("user:payment.current_plan").toUpperCase(),m&&i("user:payment.pending_downgrade").toUpperCase()]}),n.jsxs("div",{className:Ct.offerSwitchPlanContainer,children:[n.jsx("div",{children:i(`user:payment.${u==="month"?"monthly":"annual"}_subscription`)}),(s||m)&&o&&n.jsxs("div",{className:Ct.nextBillingDate,children:[s&&!t&&i("user:payment.next_billing_date_on",{date:ft(new Date(o*1e3),c.language)}),m&&i("user:payment.downgrade_on",{date:ft(new Date(o*1e3),c.language)})]})]})]}),n.jsxs("div",{className:Ct.price,children:[tt(l,d,void 0),n.jsxs("span",{className:Ct.paymentFrequency,children:["/",i(`account:periods.${u}_one`)]})]})]})},Ay="_infoBox_18i51_1",Ly="_transactionItem_18i51_22",Ty="_pendingSwitch_18i51_31",$y="_transactionDetails_18i51_36",Oy="_transactionPrice_18i51_56",Dy="_price_18i51_60",Fy="_explanation_18i51_69",My="_cardDetails_18i51_73",By="_paypal_18i51_78",Ry="_upgradeSubscription_18i51_90",Hy="_changePlanContainer_18i51_99",Uy="_changePlanButtons_18i51_105",Wy="_changePlanCancelButton_18i51_112",Vy="_editCard_18i51_116",qe={infoBox:Ay,transactionItem:Ly,pendingSwitch:Ty,transactionDetails:$y,transactionPrice:Oy,price:Dy,explanation:Fy,cardDetails:My,paypal:By,upgradeSubscription:Ry,changePlanContainer:Hy,changePlanButtons:Uy,changePlanCancelButton:Wy,editCard:Vy},Li=4,qy=({accessModel:s,activePaymentDetail:t,activeSubscription:e,pendingOffer:r,transactions:a,customer:o,isLoading:i,panelClassName:c,panelHeaderClassName:l,onShowAllTransactionsClick:d,showAllTransactions:u,onShowReceiptClick:m,canRenewSubscription:g=!1,canShowReceipts:_=!1,canUpdatePaymentMethod:f,onUpgradeSubscriptionClick:y,offerSwitchesAvailable:w,offers:x=[],pendingDowngradeOfferId:v="",changeSubscriptionPlan:b,onChangePlanClick:S,selectedOfferId:j,setSelectedOfferId:C,isUpgradeOffer:I,setIsUpgradeOffer:P,isExternalPaymentProvider:k,paymentProvider:N,paymentProviderLink:T})=>{var be;const O=rt("subscription-details"),H=rt("payment-method"),U=rt("billing-history"),{t:L,i18n:R}=A(["user","account"]),X=a?(a==null?void 0:a.length)-Li:0,ee=X>0,z=le(),E=ue(),$=(e==null?void 0:e.period)==="granted",te=Le()===ae.xs,[oe,ie]=h.useState(!1);h.useEffect(()=>{oe||C((e==null?void 0:e.accessFeeId)??null)},[e,oe,C]),h.useEffect(()=>{ie(!1)},[e==null?void 0:e.status,e==null?void 0:e.pendingSwitchId]),h.useEffect(()=>{var re,Oe;j&&x&&P((((re=x.find(Ve=>Ve.offerId===j))==null?void 0:re.customerPriceInclTax)??0)>(((Oe=x.find(Ve=>Ve.offerId===(e==null?void 0:e.accessFeeId)))==null?void 0:Oe.customerPriceInclTax)??0))},[j,x,e,P]);function Q(){z(J(E,"choose-offer"))}function W(){z(J(E,"edit-card"))}function q(){z(J(E,"unsubscribe"))}function se(){z(J(E,"renew-subscription"))}function ge(re){switch(re){case"month":return L("user:payment.monthly_subscription");case"year":return L("user:payment.annual_subscription");case"day":return L("user:payment.daily_subscription");case"week":return L("user:payment.weekly_subscription");case"granted":return L("user:payment.granted_subscription");default:return L("user:payment.other")}}const Te=!k&&w||!oe&&!g;return n.jsxs(n.Fragment,{children:[n.jsx(ha,{isSuccess:!b.isError,message:b.isError?L("user:payment.change_plan_error"):I?L("user:payment.upgrade_plan_success"):L("user:payment.downgrade_plan_success",{date:(e==null?void 0:e.expiresAt)&&ft(new Date(e.expiresAt*1e3),R.language)}),open:oe&&(b.isSuccess||b.isError),onClose:()=>{b.reset(),ie(!1)}}),n.jsx("h1",{className:"hideUntilFocus",children:L("nav.payments")}),s===Me.SVOD&&n.jsxs("section",{"aria-labelledby":O,className:c,children:[n.jsx("div",{className:l,children:n.jsx("h2",{id:O,children:L(oe?"user:payment.change_plan":"user:payment.subscription_details")})}),e?n.jsxs(Ne.Fragment,{children:[!oe&&n.jsxs("div",{className:qe.infoBox,children:[n.jsxs("p",{children:[n.jsx("strong",{children:ge(e.period)})," ",n.jsx("br",{}),e.status==="active"&&!$&&!v?L("user:payment.next_billing_date_on",{date:ft(new Date(e.expiresAt*1e3),R.language)}):L("user:payment.subscription_expires_on",{date:ft(new Date(e.expiresAt*1e3),R.language)}),(r||v)&&e.status!=="cancelled"&&n.jsx("span",{className:qe.pendingSwitch,children:L("user:payment.pending_offer_switch",{title:ge((r==null?void 0:r.period)||((be=x.find(re=>re.offerId===v))==null?void 0:be.period)||"month")})})]}),!$&&n.jsxs("p",{className:qe.price,children:[n.jsx("strong",{children:tt(e.nextPaymentPrice,e.nextPaymentCurrency,o.country)}),n.jsxs("small",{children:["/",L(`account:periods.${e.period}`)]})]})]},e.subscriptionId),k?n.jsxs("p",{className:qe.explanation,children:[L("account:external_payment.explanation",{paymentProvider:N})," ",n.jsx(Xs,{href:T,target:"_blank",children:L("account:external_payment.manage_subscription")})]}):Te&&n.jsx(D,{className:qe.upgradeSubscription,label:L("user:payment.change_subscription"),disabled:!g&&e.status==="cancelled",onClick:()=>{x.length>1&&!g?ie(!0):y==null||y()},fullWidth:te,color:"primary","data-testid":"change-subscription-button"}),(e.status==="active"||e.status==="active_trial")&&!$&&!oe&&g?n.jsx(D,{label:L("user:payment.cancel_subscription"),onClick:q,fullWidth:te,"data-testid":"cancel-subscription-button"}):g?n.jsx(D,{label:L("user:payment.renew_subscription"),onClick:se}):null]}):i?null:n.jsxs(Ne.Fragment,{children:[n.jsx("p",{children:L("user:payment.no_subscription")}),n.jsx(D,{variant:"contained",color:"primary",label:L("user:payment.complete_subscription"),onClick:Q})]}),oe&&n.jsxs("div",{className:qe.changePlanContainer,children:[x.filter(re=>re.planSwitchEnabled).map(re=>n.jsx(Iy,{isCurrentOffer:re.offerId===(e==null?void 0:e.accessFeeId),pendingDowngradeOfferId:v,offer:re,selected:j===re.offerId,onChange:Oe=>C(Oe),expiresAt:e==null?void 0:e.expiresAt},re.offerId)),n.jsxs("div",{className:qe.changePlanButtons,children:[n.jsx(D,{label:L("user:account.save"),onClick:S,disabled:j===(e==null?void 0:e.accessFeeId)||b.isLoading}),n.jsx(D,{label:L("user:account.cancel"),onClick:()=>ie(!1),variant:"text"}),(e==null?void 0:e.status)!=="cancelled"&&n.jsx(D,{className:qe.changePlanCancelButton,label:L("user:payment.cancel_subscription"),onClick:q,variant:"danger","data-testid":"cancel-subscription-button"})]})]})]}),n.jsxs("section",{"aria-labelledby":H,className:c,children:[n.jsx("div",{className:l,children:n.jsx("h2",{id:H,children:L("user:payment.payment_method")})}),t?t.paymentMethod==="paypal"?n.jsxs("div",{children:[n.jsxs("div",{className:qe.paypal,children:[n.jsx(Y,{icon:sa})," ",L("account:payment.paypal")]}),t.currency]}):n.jsxs("div",{children:[n.jsx(pe,{label:L("user:payment.card_number"),name:"cardNumber",value:`   ${t.paymentMethodSpecificParams.lastCardFourDigits||""}`,"aria-label":L("user:payment.card_number_hidden",{number:t.paymentMethodSpecificParams.lastCardFourDigits}),editing:!1,autoComplete:"cc-number"}),n.jsxs("div",{className:qe.cardDetails,children:[n.jsx(pe,{label:L("user:payment.expiry_date"),name:"cardExpiry",value:t.paymentMethodSpecificParams.cardExpirationDate,editing:!1,autoComplete:"cc-exp"}),n.jsx(pe,{label:L("user:payment.security_code"),name:"cardSecurityCode",value:"******",editing:!1,"aria-label":L("user:payment.security_code_hidden"),autoComplete:"cc-csc"})]}),n.jsx(D,{className:B({[qe.editCard]:f}),label:L("account:payment.edit_card"),variant:"outlined",onClick:W})]},t.id):n.jsx("div",{children:n.jsx("p",{children:!i&&L("user:payment.no_payment_methods")})}),f&&n.jsx(D,{label:L("user:payment.update_payment_details"),type:"button",onClick:()=>z(J(E,"payment-method"))})]}),n.jsxs("section",{"aria-labelledby":U,className:c,children:[n.jsx("div",{className:l,children:n.jsx("h2",{id:U,children:L("user:payment.billing_history")})}),a!=null&&a.length?n.jsxs(Ne.Fragment,{children:[a==null?void 0:a.slice(0,u?9999:Li).map(re=>n.jsxs("div",{className:qe.infoBox,children:[n.jsxs("p",{className:qe.transactionItem,children:[n.jsx("strong",{children:ft(new Date(re.transactionDate*1e3),R.language)}),n.jsx("span",{children:re.offerTitle}),n.jsx("span",{children:re.transactionId})]}),n.jsxs("div",{className:qe.transactionDetails,children:[n.jsx("div",{className:qe.transactionPrice,children:!$&&L("user:payment.price_paid_with",{price:tt(parseFloat(re.transactionPriceInclTax),re.transactionCurrency,re.customerCountry),method:re.paymentMethod})}),_&&n.jsx(We,{"aria-label":L("user:payment.show_receipt"),onClick:()=>!i&&m((re==null?void 0:re.trxToken)??re.transactionId),children:n.jsx(Y,{icon:xy})})]})]},re.transactionId)),!u&&ee?n.jsxs(Ne.Fragment,{children:[n.jsx("p",{children:L("user:payment.hidden_transactions",{count:X})}),n.jsx(D,{label:L("user:payment.show_all"),onClick:d})]}):null]}):n.jsx("div",{children:n.jsx("p",{children:!i&&L("user:payment.no_transactions")})})]}),i&&n.jsx(ye,{inline:!0})]})},zy=(s,t)=>{if(s instanceof Blob){const e=window.URL.createObjectURL(new Blob([s])),r=document.createElement("a");r.href=e,r.setAttribute("download",`receipt_${t}.pdf`),document.body.appendChild(r),r.click()}else{const e=window.open("",`Receipt ${t}`,""),r=window.atob(s);e&&(e.opener=null,e.document.write(r),e.document.close())}},Gy=["Apple In-App","Google In-App","Roku In-App"],Jy={apple:"https://support.apple.com/118428",google:"https://support.google.com/googleplay/answer/7018481",roku:"https://support.roku.com/article/208756478"},Yy=()=>{var L;const s=V(_e),t=le(),{accessModel:e}=K(({accessModel:R})=>({accessModel:R}),he),{user:r,subscription:a,transactions:o,activePayment:i,pendingOffer:c,loading:l}=M(),{canUpdatePaymentMethod:d,canShowReceipts:u,canRenewSubscription:m}=s.getFeatures(),{subscriptionOffers:g,switchSubscriptionOffers:_}=na(),[f,y]=h.useState(!1),[w,x]=h.useState(!1),[v,b]=h.useState((a==null?void 0:a.accessFeeId)??null),[S,j]=h.useState(void 0),C=ue(),I=async()=>t(J(C,"upgrade-subscription")),P=async R=>{x(!0);try{const X=await s.getReceipt(R);X&&zy(X,R)}catch(X){throw new Error("Couldn't parse receipt. "+(X instanceof Error?X.message:""))}x(!1)},k=dy(S??!1,v,r,a==null?void 0:a.subscriptionId),N=async()=>{v&&(a!=null&&a.subscriptionId)&&k.mutate({accessFeeId:v.slice(1),subscriptionId:`${a.subscriptionId}`})};if(!r)return n.jsx(ye,{});const T=((L=r.metadata)==null?void 0:L[`${a==null?void 0:a.subscriptionId}_pending_downgrade`])||"",O=!!a&&Gy.includes(a.paymentMethod),H=(a==null?void 0:a.paymentMethod.split(" ")[0])||"unknown",U=Jy[H.toLowerCase()];return n.jsx(qy,{accessModel:e,activeSubscription:a,activePaymentDetail:i,transactions:o,customer:r,pendingOffer:c,isLoading:l||w,panelClassName:Se.panel,panelHeaderClassName:Se.panelHeader,onShowAllTransactionsClick:()=>y(!0),showAllTransactions:f,canUpdatePaymentMethod:d,canRenewSubscription:m,onUpgradeSubscriptionClick:I,offerSwitchesAvailable:_.length>0,canShowReceipts:u,onShowReceiptClick:P,offers:g,pendingDowngradeOfferId:T,changeSubscriptionPlan:k,onChangePlanClick:N,selectedOfferId:v,setSelectedOfferId:R=>b(R),isUpgradeOffer:S,setIsUpgradeOffer:R=>j(R),isExternalPaymentProvider:O,paymentProvider:H,paymentProviderLink:U})},Ky="_headings_1x48i_1",Qy="_heading_1x48i_1",Zy="_profileInfo_1x48i_14",Xy="_paragraph_1x48i_21",ev="_wrapper_1x48i_26",tv="_flex_1x48i_48",sv="_formFields_1x48i_56",nv="_avatar_1x48i_64",rv="_overlayBox_1x48i_69",av="_deleteModal_1x48i_73",ov="_deleteButtons_1x48i_73",iv="_contained_1x48i_86",cv="_divider_1x48i_90",lv="_noBottomBorder_1x48i_96",dv="_avatarsContainer_1x48i_102",uv="_buttonContainer_1x48i_112",mv="_nameHeading_1x48i_119",hv="_modalActions_1x48i_124",kt={headings:Ky,heading:Qy,profileInfo:Zy,paragraph:Xy,wrapper:ev,flex:tv,formFields:sv,avatar:nv,overlayBox:rv,deleteModal:av,deleteButtons:ov,contained:iv,divider:cv,noBottomBorder:lv,avatarsContainer:dv,buttonContainer:uv,nameHeading:mv,modalActions:hv},pv=()=>{const s=le(),{id:t}=zt(),e=ue(),{t:r}=A("user"),a=Be("action"),[o,i]=h.useState(a),[c,l]=h.useState(!1),d=()=>{s(On(e,{action:null}))},u=z_({onMutate:d,onSuccess:()=>s(Pn),onError:()=>l(!1)}),m=async()=>t&&u.mutate({id:t});return h.useEffect(()=>{a&&i(a)},[a]),t?o!=="delete-profile"?null:n.jsx("div",{children:n.jsxs(Mn,{open:!!a,onClose:d,"aria-labelledby":"delete-profile-heading",children:[c&&n.jsx(ye,{}),n.jsxs("div",{className:kt.deleteModal,children:[n.jsxs("div",{children:[n.jsx("h2",{id:"delete-profile-heading",children:r("profile.delete")}),n.jsx("p",{children:r("profile.delete_confirmation")})]}),n.jsxs("div",{className:kt.deleteButtons,children:[n.jsx(D,{label:r("account.delete"),color:"delete",variant:"contained",onClick:m}),n.jsx(D,{label:r("account.cancel"),variant:"outlined",onClick:d})]})]})]})}):n.jsx(Vt,{to:"/u/profiles"})},fv=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M26.8534 7.33334L11.6401 22.52C11.2299 22.8643 10.7008 23.0335 10.167 22.9911C9.63316 22.9487 9.13741 22.6981 8.78675 22.2933L5.70675 19.2133C5.30202 18.8627 5.05141 18.3669 5.009 17.8331C4.9666 17.2993 5.1358 16.7702 5.48008 16.36L20.6667 1.14667C21.0783 0.80566 21.6066 0.638566 22.1394 0.680891C22.6722 0.723217 23.1675 0.971626 23.5201 1.37334L26.6001 4.45334C27.0135 4.803 27.2721 5.30181 27.3195 5.84119C27.367 6.38058 27.1994 6.91687 26.8534 7.33334ZM1.33341 27.3333H6.40008C6.53057 27.3315 6.65764 27.2914 6.76556 27.218C6.87347 27.1447 6.95748 27.0412 7.00717 26.9206C7.05686 26.7999 7.07004 26.6673 7.04507 26.5392C7.02011 26.4111 6.95811 26.2932 6.86675 26.2L1.80008 21.1333C1.7069 21.042 1.58896 20.98 1.46087 20.955C1.33278 20.93 1.20018 20.9432 1.07952 20.9929C0.958848 21.0426 0.855416 21.1266 0.782043 21.2345C0.708669 21.3424 0.668581 21.4695 0.666748 21.6V26.6667C0.666748 26.8435 0.736986 27.0131 0.86201 27.1381C0.987035 27.2631 1.1566 27.3333 1.33341 27.3333Z",fill:"white"})),Uc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})),gv="_inner_1r3pz_1",_v="_checkmarkContainer_1r3pz_13",yv="_checkmark_1r3pz_13",vv="_selected_1r3pz_32",xv="_wrapper_1r3pz_38",wv="_image_1r3pz_47",bv="_box_1r3pz_53",jv="_kidsLabel_1r3pz_66",Sv="_circle_1r3pz_75",Cv="_overlay_1r3pz_85",Pv="_kids_1r3pz_66",kv="_addProfileContainer_1r3pz_149",Ev="_iconContainer_1r3pz_157",Pt={inner:gv,checkmarkContainer:_v,checkmark:yv,selected:vv,wrapper:xv,image:wv,box:bv,kidsLabel:jv,circle:Sv,overlay:Cv,kids:Pv,addProfileContainer:kv,iconContainer:Ev},Nv=({name:s,image:t,editMode:e=!1,onClick:r,onEdit:a,selected:o=!1})=>{const{t:i}=A("user"),c=l=>(l.key==="Enter"||l.key===" ")&&r();return n.jsxs("div",{className:Pt.wrapper,children:[n.jsxs("div",{className:B(Pt.inner,o&&Pt.selected),children:[n.jsx("div",{onClick:r,className:Pt.box,role:"button",tabIndex:0,onKeyDown:c,children:n.jsx("img",{className:Pt.image,src:t,alt:""})}),e&&n.jsx(We,{"aria-label":i("profile.edit"),onClick:a,className:Pt.overlay,children:n.jsx(Y,{icon:fv})})]}),s&&n.jsx("h2",{className:Pt.title,children:s}),o&&n.jsx("div",{className:Pt.checkmarkContainer,children:n.jsx(Y,{icon:Uc,className:Pt.checkmark})})]})},Iv=["/images/avatars/Alien.svg","/images/avatars/Bear.svg","/images/avatars/Brainy.svg","/images/avatars/Cooool.svg","/images/avatars/Dummy.svg","/images/avatars/Frog.svg","/images/avatars/Goofball.svg","/images/avatars/Marilyn.svg","/images/avatars/Smiley.svg","/images/avatars/ToughGuy.svg","/images/avatars/UhOh.svg","/images/avatars/Vibe.svg"],Av=({initialValues:s,formHandler:t,selectedAvatar:e,showCancelButton:r=!0,showContentRating:a=!1,isMobile:o=!1})=>{var x;const i=le(),{t:c}=A("user"),{profile:l}=It(),d=[{label:c("profile.adult"),value:"true"},{label:c("profile.kids"),value:"false"}],{handleSubmit:u,handleChange:m,values:g,errors:_,submitting:f,setValue:y}=ut({initialValues:s,validationSchema:ce().shape({id:F(),name:F().trim().required(c("profile.validation.name.required")).min(3,c("profile.validation.name.too_short",{charactersCount:3})).max(30,c("profile.validation.name.too_long",{charactersCount:30})).matches(/^[a-zA-Z0-9\s]*$/,c("profile.validation.name.invalid_characters")),adult:F().required(),avatar_url:F(),pin:In()}),onSubmit:t});h.useEffect(()=>{y("avatar_url",(e==null?void 0:e.value)||(l==null?void 0:l.avatar_url)||"")},[l==null?void 0:l.avatar_url,e==null?void 0:e.value,y]);const w=c("profile.info");return n.jsx("form",{onSubmit:u,noValidate:!0,children:n.jsxs("div",{className:Se.panel,children:[n.jsx("div",{className:Se.panelHeader,children:n.jsx("h2",{children:w})}),n.jsx("div",{className:kt.profileInfo,children:c("profile.description")}),n.jsxs("div",{className:kt.formFields,children:[_.form?n.jsx(Ae,{variant:"error",children:_.form}):null,f&&n.jsx(ye,{}),n.jsx(pe,{required:!0,name:"name",label:c("profile.name"),value:g==null?void 0:g.name,onChange:m,error:!!_.name,helperText:_.name}),a&&n.jsx(ra,{required:!0,name:"adult",label:c("profile.content_rating"),options:d,value:((x=g==null?void 0:g.adult)==null?void 0:x.toString())||"true",onChange:m})]}),n.jsx("hr",{className:kt.divider}),n.jsxs("div",{className:B(Se.panelHeader,kt.noBottomBorder),children:[n.jsx("h3",{children:c("profile.avatar")}),n.jsx("div",{className:kt.avatarsContainer,children:Iv.map(v=>n.jsx(Nv,{editMode:!1,onEdit:()=>null,onClick:()=>e==null?void 0:e.set(v),selected:(e==null?void 0:e.value)===v,adult:!0,image:v},v))})]}),n.jsxs(n.Fragment,{children:[n.jsx(D,{type:"submit",label:c("account.save"),variant:"outlined",disabled:f,fullWidth:o}),r&&n.jsx(D,{onClick:()=>i(Pn),label:c("account.cancel"),variant:"text",fullWidth:o})]})]})})},Lv=({contained:s=!1})=>{const t=zt(),{id:e}=t,r=ue(),a=le(),{t:o}=A("user"),i=V(Xt),l=Le()===ae.xs,{data:d,isLoading:u,isFetching:m}=Ue(["getProfileDetails"],()=>i.getProfileDetails({id:e||""}),{staleTime:0}),g=h.useMemo(()=>({id:(d==null?void 0:d.id)||"",name:(d==null?void 0:d.name)||"",adult:d!=null&&d.adult?"true":"false",avatar_url:(d==null?void 0:d.avatar_url)||"",pin:void 0}),[d==null?void 0:d.id,d==null?void 0:d.name,d==null?void 0:d.adult,d==null?void 0:d.avatar_url]),[_,f]=h.useState(g==null?void 0:g.avatar_url);h.useEffect(()=>{f(d==null?void 0:d.avatar_url)},[d==null?void 0:d.avatar_url]),(!e||!m&&!u&&!d)&&a(Pn);const y=q_({onSuccess:()=>a(Pn)}),w=J_(),x=async(v,{setErrors:b,setSubmitting:S})=>y.mutate({id:e,name:v.name,adult:v.adult==="true",avatar_url:v.avatar_url||(d==null?void 0:d.avatar_url)},{onError:j=>w(j,b),onSettled:()=>{S(!1)}});return u||m?n.jsx(ye,{}):n.jsxs("div",{className:B(Se.user,s&&kt.contained),children:[n.jsxs("div",{className:B(Se.mainColumn),children:[n.jsx(Av,{initialValues:g,formHandler:x,selectedAvatar:{set:f,value:_||""},showCancelButton:!s,isMobile:l}),n.jsxs("div",{className:Se.panel,children:[n.jsx("div",{className:Se.panelHeader,children:n.jsx("h2",{children:o("profile.delete")})}),n.jsx("div",{className:kt.profileInfo,children:o(d!=null&&d.default?"profile.delete_main":"profile.delete_description")}),!(d!=null&&d.default)&&n.jsx(D,{onClick:()=>a(On(r,{action:"delete-profile"})),label:o("profile.delete"),variant:"contained",color:"delete",fullWidth:l})]})]}),n.jsx(pv,{})]})},Tv=()=>{var S;const s=V(Cs),t=V(_e),{accessModel:e,favoritesList:r}=K(j=>{var C;return{accessModel:j.accessModel,favoritesList:(C=j.config.features)==null?void 0:C.favoritesList}},he),a=le(),{t:o}=A("user"),i=Le(),[c,l]=h.useState(!1),d=ue(),u=i>ae.md,{user:m,subscription:g,loading:_}=M(),{canUpdateEmail:f}=t.getFeatures(),{profile:y}=It(),w=ot(j=>j.getPlaylist()),{profilesEnabled:x}=da(),v=((S=d.pathname)==null?void 0:S.includes("my-profile"))||d.pathname.includes("favorites"),b=h.useCallback(async()=>{await t.logout()},[t]);return h.useEffect(()=>{!_&&!m&&a("/",{replace:!0})},[a,m,_]),m?n.jsxs("div",{className:Se.user,children:[u&&n.jsx("nav",{className:Se.leftColumn,children:n.jsx("div",{className:Se.panel,children:n.jsxs("ul",{children:[e==="SVOD"&&x&&v&&n.jsx("li",{children:n.jsx(D,{to:y?wd(y.id,!0):void 0,label:(y==null?void 0:y.name)??o("nav.profile"),variant:"text",startIcon:n.jsx("img",{className:Se.profileIcon,src:y==null?void 0:y.avatar_url,alt:y==null?void 0:y.name}),className:Se.button})}),(!x||!v)&&n.jsx("li",{children:n.jsx(D,{to:Js,label:o("nav.account"),variant:"text",startIcon:n.jsx(Y,{icon:ua}),className:Se.button})}),r&&(!x||v)&&n.jsx("li",{children:n.jsx(D,{to:Cr,label:o("nav.favorites"),variant:"text",startIcon:n.jsx(Y,{icon:ma}),className:Se.button})}),e!==Me.AVOD&&(!x||!v)&&n.jsx("li",{children:n.jsx(D,{to:Pr,label:o("nav.payments"),variant:"text",startIcon:n.jsx(Y,{icon:Bc}),className:Se.button})}),(!x||!v)&&n.jsx("li",{className:Se.logoutLi,children:n.jsx(D,{onClick:b,label:o("nav.logout"),variant:"text",startIcon:n.jsx(Y,{icon:Rc}),className:Se.button})})]})})}),n.jsx("div",{className:Se.mainColumn,children:n.jsxs(qi,{children:[n.jsx(ze,{path:Js,element:n.jsx(ay,{panelClassName:Se.panel,panelHeaderClassName:Se.panelHeader,canUpdateEmail:f})}),x&&n.jsx(ze,{path:Vr,element:n.jsx(Lv,{contained:!0})}),r&&n.jsx(ze,{path:Cr,element:n.jsxs(n.Fragment,{children:[n.jsx(ly,{playlist:w,onClearFavoritesClick:()=>l(!0),accessModel:e,hasSubscription:!!g}),n.jsx(ug,{open:c,title:o("favorites.clear_favorites_title"),body:o("favorites.clear_favorites_body"),onConfirm:async()=>{await s.clear(),l(!1)},onClose:()=>l(!1)})]})}),n.jsx(ze,{path:Pr,element:e!==Me.AVOD?n.jsx(Yy,{}):n.jsx(Vt,{to:Js})}),n.jsx(ze,{path:"*",element:n.jsx(Vt,{to:Js})})]})})]}):n.jsx("div",{className:Se.user,children:n.jsx(ye,{inline:!0})})},pa=(s,t)=>{const e=[],r=hc(s.duration);return s.pubdate&&e.push(String(new Date(s.pubdate*1e3).getFullYear())),!t&&r&&e.push(r),t&&e.push(t),s.genre&&e.push(s.genre),s.rating&&e.push(s.rating),e},$v=(s,t)=>{const e=[];return t&&e.push(t),s.genre&&e.push(s.genre),s.rating&&e.push(s.rating),e},Ov=(s,t)=>{const e=[],r=ru(t,s.scheduledStart,s.scheduledEnd),a=hc(s.duration);return r&&e.push(r),a&&e.push(a),s.genre&&e.push(s.genre),s.rating&&e.push(s.rating),e},Dv=["data","isLoading"],$s=s=>{const{accessModel:t}=K(),{user:e,subscription:r}=M(({user:m,subscription:g})=>({user:m,subscription:g}),he),a=V(vt,!1),o=s&&!Tn(t,!!e,!!r,s),i=(s==null?void 0:s.mediaOffers)||[],c=Vi(i.map(({offerId:m})=>({queryKey:["entitlements",m],queryFn:()=>a==null?void 0:a.getEntitlements({offerId:m}),enabled:!!s&&!!e&&!!e.id&&!!m&&!o,refetchOnMount:"always",notifyOnChangeProps:Dv}))),l=!!e&&c.some(m=>{var g,_;return m.isSuccess&&((_=(g=m.data)==null?void 0:g.responseData)==null?void 0:_.accessGranted)}),d=!l&&c.some(m=>m.isLoading);return{isEntitled:!!s&&(o||l),isMediaEntitlementLoading:d,mediaOffers:i}};function qt(s,t=!0){const e=V(He);return Ue(["media",s],()=>e.getMediaById(s),{enabled:!!s&&t,refetchInterval:(r,a)=>r&&Ur(r)?1e3*30:!1,staleTime:60*1e3*10})}const Hn=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10,8V16L15,12L10,8Z"})),Fv="_filterRow_1pd69_1",Mv="_dropDown_1pd69_10",Bv="_filterDropDown_1pd69_17",hr={filterRow:Fv,dropDown:Mv,filterDropDown:Bv},Wc=({name:s,value:t,defaultLabel:e,options:r,setValue:a,forceDropdown:o=!1})=>{const{t:i}=A("common"),c=Le();if(!r.length)return null;const l=u=>a(u.target.value),d=!o&&c>=ae.md&&r.length<6;return n.jsx(h.Fragment,{children:d?n.jsxs("div",{className:hr.filterRow,role:"listbox","aria-label":i("filter_videos_by",{name:s}),children:[r.map(u=>{const m=typeof u=="string"?u:u.label,g=typeof u=="string"?u:u.value,_=t===g;return n.jsx(D,{label:m,onClick:()=>a(g),active:_,role:"option","aria-selected":_},g)}),n.jsx(D,{label:e,onClick:()=>a(""),active:t==="",role:"option","aria-selected":t===""},e)]}):n.jsx("div",{className:hr.filterDropDown,children:n.jsx(Ec,{className:hr.dropDown,size:"small",options:r,defaultLabel:e,name:s,value:t,onChange:l,"aria-label":i("filter_videos_by",{name:s})})})})},Rv="_truncatedText_vuggl_1",Hv={truncatedText:Rv},fa=({text:s,maximumLines:t,className:e})=>n.jsx("div",{className:B(Hv.truncatedText,e),style:{maxHeight:`calc(1.5em * ${t})`,WebkitLineClamp:t},children:s}),Uv="_collapsibleText_1ve3l_1",Wv="_dummyDiv_1ve3l_6",Vv="_textContainer_1ve3l_11",qv="_collapsed_1ve3l_15",zv="_chevron_1ve3l_20",Gv="_expanded_1ve3l_33",Vs={collapsibleText:Uv,dummyDiv:Wv,textContainer:Vv,collapsed:qv,chevron:zv,expanded:Gv},ga=({text:s,className:t})=>{const e=h.useRef(),r=Le(),[a,o]=h.useState(!1),[i,c]=h.useState(!1),l=i?"Collapse":"Expand",d=4,u=60;return h.useEffect(()=>{e.current&&o(e.current.scrollHeight>e.current.offsetHeight+d||u<e.current.offsetHeight)},[u,s,r]),n.jsxs("div",{className:B(Vs.collapsibleText),children:[n.jsx("p",{ref:e,id:"collapsible-content",className:B(Vs.textContainer,t,{[Vs.collapsed]:!i&&a}),style:{maxHeight:i?e.current.scrollHeight:u},children:s}),a&&n.jsx(We,{"aria-label":l,"aria-expanded":i,"aria-controls":"collapsible-content",className:B(Vs.chevron,{[Vs.expanded]:i}),onClick:()=>c(!i),children:n.jsx(Y,{icon:oa})})]})},Jv="_video_1ywad_1",Yv="_mainPadding_1ywad_8",Kv="_main_1ywad_8",Qv="_hidden_1ywad_31",Zv="_info_1ywad_35",Xv="_title_1ywad_60",ex="_metaContainer_1ywad_78",tx="_primaryMetadata_1ywad_83",sx="_secondaryMetadata_1ywad_97",nx="_description_1ywad_112",rx="_buttonBar_1ywad_121",ax="_poster_1ywad_148",ox="_posterFade_1ywad_175",ix="_playIcon_1ywad_185",Ke={video:Jv,mainPadding:Yv,main:Kv,hidden:Qv,info:Zv,title:Xv,metaContainer:ex,primaryMetadata:tx,secondaryMetadata:sx,description:nx,buttonBar:rx,poster:ax,posterFade:ox,playIcon:ix},Vc=({title:s,description:t,primaryMetadata:e,secondaryMetadata:r,image:a,startWatchingButton:o,shareButton:i,favoriteButton:c,trailerButton:l,children:d})=>{const m=Le()===ae.xs;return n.jsxs("div",{"data-testid":void 0,children:[n.jsx("header",{className:Ke.video,"data-testid":void 0,id:"video-details",children:n.jsxs("div",{className:B(Ke.main,Ke.mainPadding),children:[n.jsx(Ts,{className:Ke.poster,image:a,alt:"",width:1280}),n.jsx("div",{className:Ke.posterFade}),n.jsxs("div",{className:Ke.info,children:[n.jsx("h1",{className:Ke.title,children:s}),n.jsxs("div",{className:Ke.metaContainer,children:[n.jsx("div",{className:Ke.primaryMetadata,children:e}),r&&n.jsx("div",{className:Ke.secondaryMetadata,children:r})]}),m?n.jsx(ga,{text:t,className:Ke.description}):n.jsx(fa,{text:t,maximumLines:12,className:Ke.description}),n.jsxs("div",{className:Ke.buttonBar,children:[o,l,c,i]})]})]})}),d]})},cx="_details_whvpm_1",lx="_inlinePlayerMetadata_whvpm_24",dx="_title_whvpm_54",ux="_primaryMetadata_whvpm_81",mx="_secondaryMetadata_whvpm_93",hx="_description_whvpm_107",fs={details:cx,inlinePlayerMetadata:lx,title:dx,primaryMetadata:ux,secondaryMetadata:mx,description:hx},px=({title:s,description:t,primaryMetadata:e,shareButton:r,favoriteButton:a,trailerButton:o})=>{const c=Le()===ae.xs,l=typeof s=="string"?"h1":"div";return n.jsxs("div",{className:fs.details,"data-testid":void 0,children:[n.jsx(l,{className:fs.title,children:s}),n.jsxs("div",{className:fs.inlinePlayerMetadata,children:[n.jsx("div",{className:fs.primaryMetadata,children:e}),o,a,r]}),c?n.jsx(ga,{text:t,className:fs.description}):n.jsx(fa,{text:t,maximumLines:12,className:fs.description})]})},fx="_listItem_6fjkv_1",gx="_poster_6fjkv_20",_x="_posterImage_6fjkv_39",yx="_visible_6fjkv_48",vx="_activeLabel_6fjkv_58",xx="_title_6fjkv_91",wx="_titleContainer_6fjkv_105",bx="_scheduledStart_6fjkv_110",jx="_tags_6fjkv_121",Sx="_lock_6fjkv_128",Cx="_scheduled_6fjkv_110",Px="_tag_6fjkv_121",kx="_live_6fjkv_156",Ex="_progressContainer_6fjkv_160",Nx="_progressBar_6fjkv_170",Ie={listItem:fx,poster:gx,posterImage:_x,visible:yx,activeLabel:vx,title:xx,titleContainer:wx,scheduledStart:bx,tags:jx,lock:Sx,scheduled:Cx,tag:Px,live:kx,progressContainer:Ex,progressBar:Nx};function Ix({onHover:s,progress:t,activeLabel:e,item:r,url:a,loading:o=!1,isActive:i=!1,isLocked:c=!0}){const{title:l,duration:d,seasonNumber:u,episodeNumber:m,cardImage:g,mediaStatus:_,scheduledStart:f}=r,{t:y,i18n:{language:w}}=A("common"),[x,v]=h.useState(!1),b=B(Ie.posterImage,{[Ie.visible]:x}),S=sc(r),j=_===Nt.LIVE||rc(r),C=_===Nt.SCHEDULED,I=()=>{if(o||!l)return null;if(S)return n.jsx("div",{className:Ie.tag,children:y("video:series")});if(m)return n.jsx("div",{className:Ie.tag,children:$n(u,m)});if(d)return n.jsx("div",{className:Ie.tag,children:Yr(d)});if(j)return n.jsx("div",{className:B(Ie.tag,Ie.live),children:y("live")});if(C)return n.jsxs("div",{className:Ie.tag,children:[n.jsx(Y,{icon:ca,className:Ie.scheduled}),y("scheduled")]})};return n.jsxs(tn,{role:"button",to:a,className:Ie.listItem,onMouseEnter:s,tabIndex:0,"data-testid":void 0,children:[n.jsxs("div",{className:Ie.titleContainer,children:[n.jsx("h3",{className:Ie.title,children:l}),!!f&&n.jsx("div",{className:Ie.scheduledStart,children:kn(f,w)})]}),n.jsxs("div",{className:Ie.poster,children:[n.jsx(Ts,{className:b,image:g,onLoad:()=>v(!0),width:320,alt:""}),n.jsxs("div",{className:Ie.tags,children:[c&&n.jsx("div",{className:B(Ie.tag,Ie.lock),"aria-label":y("card_lock"),children:n.jsx(Y,{icon:ia})}),I()]}),i&&n.jsx("div",{className:Ie.activeLabel,children:e}),t?n.jsx("div",{className:Ie.progressContainer,children:n.jsx("div",{className:Ie.progressBar,style:{width:`${Math.round(t*100)}%`}})}):null]})]})}const Ax=h.memo(Ix),Lx="_container_co6q3_1",Tx="_content_co6q3_6",$x="_list_co6q3_13",pr={container:Lx,content:Tx,list:$x},Ti=()=>{};function Ox({playlist:s,header:t,onListItemHover:e,isLoading:r=!1,watchHistory:a,activeMediaId:o,activeLabel:i,className:c,accessModel:l,isLoggedIn:d,hasSubscription:u,hasMore:m,loadMore:g=Ti,getUrl:_}){var f;return n.jsxs("div",{className:B(pr.container,!!c&&c),"data-testid":void 0,children:[!!t&&t,n.jsx("div",{className:pr.content,children:n.jsx(Fr,{element:"ul",pageStart:0,loadMore:g??Ti,hasMore:m??!1,className:pr.list,loader:n.jsx(la,{},"loader"),useWindow:!1,children:(f=s==null?void 0:s.playlist)==null?void 0:f.map(y=>n.jsx("li",{children:n.jsx(Ax,{url:_(y),progress:a?a[y.mediaid]:void 0,onHover:()=>e&&e(y),loading:r,isActive:o===y.mediaid,activeLabel:i,isLocked:Tn(l,d,u,y),item:y})},y.mediaid))})})]})}const Dx="_videoInlineLayout_mojbs_1",Fx="_player_mojbs_34",Mx="_videoDetailsInline_mojbs_58",Bx="_relatedVideosList_mojbs_63",Rx="_relatedVideosListHeader_mojbs_67",Hx="_relatedVideos_mojbs_63",Ux="_relatedVideosGrid_mojbs_99",Wx="_inlineLayout_mojbs_106",Vx="_relatedVideosGridTitle_mojbs_122",qx="_relatedVideosListTitle_mojbs_131",zx="_filters_mojbs_139",Gx="_filtersInline_mojbs_145",Jx="_filterMetadata_mojbs_150",Qe={videoInlineLayout:Dx,player:Fx,videoDetailsInline:Mx,relatedVideosList:Bx,relatedVideosListHeader:Rx,relatedVideos:Hx,relatedVideosGrid:Ux,inlineLayout:Wx,relatedVideosGridTitle:Vx,relatedVideosListTitle:qx,filters:zx,filtersInline:Gx,filterMetadata:Jx},Un=({inlineLayout:s,player:t,playlist:e,accessModel:r,isLoading:a,isLoggedIn:o,item:i,hasSubscription:c,title:l,description:d,image:u,primaryMetadata:m,secondaryMetadata:g,shareButton:_,favoriteButton:f,startWatchingButton:y,trailerButton:w,relatedTitle:x,watchHistory:v,activeLabel:b,filters:S,setFilter:j,filterMetadata:C,currentFilter:I="",defaultFilterLabel:P="",children:k,hasMore:N,loadMore:T,getURL:O})=>{const H=Le(),U=H===ae.sm||H===ae.md,L=S&&S.length>1,R=L&&j,X=z=>n.jsxs("div",{className:B(Qe.filters,{[Qe.filtersInline]:s}),children:[!!C&&s&&n.jsx("span",{className:Qe.filterMetadata,children:C}),R&&n.jsx(Wc,{name:"season",value:I,defaultLabel:P,options:S,setValue:j,forceDropdown:z})]}),ee=(z=!0)=>e?z?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:B(Qe.relatedVideosGrid,{[Qe.inlineLayout]:s}),children:[n.jsx("h2",{className:Qe.relatedVideosGridTitle,children:x||""}),L&&X(s)]}),n.jsx(Rn,{playlist:e,isLoading:a,watchHistory:v,accessModel:r,isLoggedIn:o,currentCardItem:i,currentCardLabel:b,hasSubscription:c,hasMore:N,loadMore:T,getUrl:O})]}):n.jsx("div",{className:Qe.relatedVideosList,children:n.jsx(Ox,{header:n.jsxs("div",{className:Qe.relatedVideosListHeader,children:[l&&n.jsx("h2",{className:Qe.relatedVideosListTitle,children:x}),L&&X(!0)]}),activeMediaId:i==null?void 0:i.mediaid,activeLabel:b,playlist:e,watchHistory:v,isLoading:a,accessModel:r,isLoggedIn:o,hasSubscription:c,hasMore:N,loadMore:T,getUrl:O})}):null;return s?n.jsxs("div",{className:Qe.videoInlineLayout,"data-testid":void 0,children:[n.jsx("div",{className:Qe.player,children:t}),n.jsx("div",{className:Qe.videoDetailsInline,children:n.jsx(px,{title:g||l,live:(i==null?void 0:i.duration)===0,description:d,primaryMetadata:m,shareButton:_,favoriteButton:f,trailerButton:w})}),ee(U),k]}):n.jsxs(Vc,{title:l,description:d,image:u,startWatchingButton:y,favoriteButton:f,trailerButton:w,shareButton:_,primaryMetadata:m,secondaryMetadata:g,children:[e&&n.jsx("section",{className:Qe.relatedVideos,children:ee(!0)}),k,t]})},_a=({className:s,open:t=!0,duration:e=250,delay:r=0,onOpenAnimationEnd:a,onCloseAnimationEnd:o,keepMounted:i,children:c})=>{const d=`opacity ${e/1e3}s ease-in-out`,u=m=>({transition:d,opacity:m==="opening"||m==="open"?1:0,willChange:"opacity"});return n.jsx(Qr,{className:s,createStyle:m=>u(m),open:t,duration:e,delay:r,onOpenAnimationEnd:a,onCloseAnimationEnd:o,keepMounted:i,children:c})},Yx=3e5,Kx=(s,t,e)=>{const r=h.useRef(null),a=V(Zs),{features:o}=K(u=>u.config),c=!!(o==null?void 0:o.continueWatchingList),l=h.useCallback(()=>{if(!c||!r.current)return;const{item:u,seriesItem:m,progress:g}=r.current;a.saveItem(u,m,g),r.current=null},[c,a]),d=xe(u=>{var g;if(u.duration<0)return;const m=Number((u.position/u.duration).toFixed(5));!isNaN(m)&&isFinite(m)&&(r.current={item:t,seriesItem:e,progress:m,timestamp:((g=r.current)==null?void 0:g.timestamp)||Date.now()},Date.now()-r.current.timestamp>Yx&&l())});h.useEffect(()=>{if(!(!s||!c))return s.on("time",d),s.on("pause",l),s.on("complete",l),s.on("remove",l),()=>{s.off("time",d),s.off("pause",l),s.off("complete",l),s.off("remove",l)}},[s,c,l,d]),h.useEffect(()=>()=>{l()},[t==null?void 0:t.mediaid,l]),h.useLayoutEffect(()=>{const u=()=>document.visibilityState==="hidden"&&l();return window.addEventListener("pagehide",l),window.addEventListener("visibilitychange",u),()=>{window.removeEventListener("pagehide",l),window.removeEventListener("visibilitychange",u)}},[l])},Qx=(s,t,e)=>{const{features:r}=K(c=>c.config),o=!!(r==null?void 0:r.continueWatchingList);Kx(s,t,e);const i=ct(c=>t&&o?c.getItem(t):void 0);return h.useMemo(()=>{const c=i==null?void 0:i.progress;return c&&c>Wt.Min&&c<Wt.Max?c*t.duration:0},[t.duration,i==null?void 0:i.progress])},Zx=(s,t)=>{const e=r=>{if(!s)return r;const a=[s,t].filter(Boolean).join("-");return{...r,allSources:void 0,sources:r.sources.map(o=>({...o,file:Ee(o.file,{t:a})}))}};return xe(async r=>e(r))},$i=60*1e3*20,Xx=({adScheduleId:s,enabled:t})=>{const e=V(He),{isLoading:r,data:a}=Ue(["ad-schedule",s],async()=>e.getAdSchedule(s),{enabled:t&&!!s,cacheTime:$i,staleTime:$i});return{isLoading:r,data:a}},e1=({mediaId:s})=>{const{adSchedule:t,adScheduleUrls:e}=K(c=>c.config),r=!!(e!=null&&e.xml),{data:a,isLoading:o}=Xx({adScheduleId:t,enabled:!r}),i={client:"vast",schedule:Ee((e==null?void 0:e.xml)||"",{media_id:s})};return{isLoading:r?!1:o,data:r?i:a}},t1=(s,t,e,r={},a=!0,o)=>{var b;const i=V(ic),c=V(cc),{configId:l,signingConfig:d,contentProtection:u,jwp:m,urlSigning:g}=K(({config:S})=>{var j;return{configId:S.id,signingConfig:S.contentSigningService,contentProtection:S.contentProtection,jwp:S.integrations.jwp,urlSigning:Gt((j=S==null?void 0:S.custom)==null?void 0:j.urlSigning)}}),_=d==null?void 0:d.host,f=((b=u==null?void 0:u.drm)==null?void 0:b.defaultPolicyId)??(d==null?void 0:d.drmPolicyId),y=!!g||!!_||!!f&&!_,{data:w,isLoading:x}=Ue(["token",s,t,r],async()=>{if(t&&_){const j=await V(_e).getAuthData(),{host:C,drmPolicyId:I}=d;return i.getMediaToken(C,t,j==null?void 0:j.jwt,r,I)}if(m&&l&&t&&y)return c.getJWPMediaToken(l,t)},{enabled:y&&a&&!!t,keepPreviousData:!1,staleTime:15*60*1e3}),v=Ue([s,t,r,w],async()=>e(w,f),{enabled:!!t&&a&&(!y||!!w),placeholderData:t?o:void 0,retry:2,retryDelay:1e3,keepPreviousData:!1});return{...v,isLoading:x||v.isLoading}};function s1(s){const t=V(He),[e,r]=h.useState(!1),a=t1("media",s.mediaid,(o,i)=>t.getMediaById(s.mediaid,o,i));return h.useEffect(()=>{var i;const o=(i=a.data)==null?void 0:i.sources.find(c=>c.file.indexOf(".m3u8")!==-1);o&&fetch(o.file,{method:"HEAD"}).then(c=>{c.status===403&&r(!0)})},[a.data]),{...a,isGeoBlocked:e}}const n1=(s,t="")=>{const e=K(u=>u.config.analyticsToken),r=M(u=>u.user),{config:a}=K(u=>u),o=r!=null&&r.id?Number(r.id):void 0,i=a==null?void 0:a.id,c=ne.APP_VERSION,[l,d]=h.useState(null);return h.useEffect(()=>{const u="jwpltx"in window?window.jwpltx:void 0;if(!u||!e||!l||!s)return;const m=({position:x,duration:v})=>{u.time(x,v)},g=({offset:x})=>{u.seek(x,l.getDuration())},_=()=>{u.seeked()},f=()=>{e&&s&&u.ready(e,window.location.hostname,t,s.mediaid,s.title,o,i,c)},y=()=>{u.complete()},w=()=>{u.adImpression()};return l.on("playlistItem",f),l.on("complete",y),l.on("time",m),l.on("seek",g),l.on("seeked",_),l.on("adImpression",w),()=>{u.remove(),l.off("playlistItem",f),l.off("complete",y),l.off("time",m),l.off("seek",g),l.off("seeked",_),l.off("adImpression",w)}},[l,s,e,t,o,i,c]),d},r1=s=>{var d;const{config:t}=K.getState(),{user:e}=M.getState(),{profile:r}=It.getState(),{sources:a,mediaid:o}=s,i=e==null?void 0:e.id,c=r==null?void 0:r.id,l=!!((d=t==null?void 0:t.integrations)!=null&&d.jwp);a.map(u=>{const m=new URL(u.file),g=o.toLowerCase(),_=m.href.toLowerCase(),f=_===`https://cdn.jwplayer.com/manifests/${g}.m3u8`,y=_===`https://content.jwplatform.com/live/broadcast/${g}.m3u8`;(f||y)&&i&&(m.searchParams.set("user_id",i),l&&c&&m.searchParams.set("profile_id",c)),u.file=m.toString()})},a1="_container_79xjy_1",o1={container:a1},qc=({item:s,adsData:t,onReady:e,onPlay:r,onPause:a,onComplete:o,onUserActive:i,onUserInActive:c,onBeforePlay:l,onFirstFrame:d,onRemove:u,onPlaylistItem:m,onPlaylistItemCallback:g,onNext:_,feedId:f,startTime:y=0,autostart:w})=>{const x=h.useRef(null),v=h.useRef(),b=h.useRef(!1),[S,j]=h.useState(!!window.jwplayer),C=h.useRef(y),I=n1(s,f),{settings:P}=K(ie=>ie),k=P.playerId,N=P.playerLicenseKey,T=xe(l),O=xe(r),H=xe(a),U=xe(o),L=xe(i),R=xe(c),X=xe(()=>{var W;const ie=(W=v.current)==null?void 0:W.getContainer(),Q=ie==null?void 0:ie.querySelector('.jw-controlbar [aria-label="Play"], .jw-button-container [aria-label="Pause"]');Q==null||Q.focus(),d==null||d()}),ee=xe(u),z=xe(m),E=xe(g),$=xe(_),G=xe(()=>e&&e(v.current)),te=h.useCallback(()=>{var ie,Q,W,q,se,ge,Te,be,re,Oe,Ve,wt;(ie=v.current)==null||ie.on("ready",G),(Q=v.current)==null||Q.on("beforePlay",T),(W=v.current)==null||W.on("complete",U),(q=v.current)==null||q.on("play",O),(se=v.current)==null||se.on("pause",H),(ge=v.current)==null||ge.on("userActive",L),(Te=v.current)==null||Te.on("userInactive",R),(be=v.current)==null||be.on("firstFrame",X),(re=v.current)==null||re.on("remove",ee),(Oe=v.current)==null||Oe.on("playlistItem",z),(Ve=v.current)==null||Ve.on("nextClick",$),(wt=v.current)==null||wt.setPlaylistItemCallback(E)},[G,T,U,O,H,L,R,X,ee,z,$,E]),oe=h.useCallback(()=>{var ie,Q,W,q,se,ge,Te,be;(ie=v.current)==null||ie.off("ready"),(Q=v.current)==null||Q.off("beforePlay"),(W=v.current)==null||W.off("complete"),(q=v.current)==null||q.off("play"),(se=v.current)==null||se.off("pause"),(ge=v.current)==null||ge.off("userActive"),(Te=v.current)==null||Te.off("userInactive"),(be=v.current)==null||be.off("firstFrame")},[]);return h.useEffect(()=>{if(!window.jwplayer&&!b.current){b.current=!0;const ie=`${ne.APP_API_BASE_URL}/libraries/${k}.js`;yc(ie).then(()=>{j(!0),b.current=!1})}},[k]),h.useEffect(()=>{C.current=y},[y]),h.useEffect(()=>{const ie=()=>{var q,se;if(!s||!v.current)return;const W=(q=v.current)==null?void 0:q.getPlaylistItem();W&&W.mediaid===s.mediaid||(typeof w<"u"&&((se=v.current)==null||se.setConfig({autostart:w})),v.current.load([qo({...s,starttime:C.current,feedid:f})]))},Q=()=>{if(!window.jwplayer||!x.current)return;v.current=window.jwplayer(x.current),r1(s);const W={advertising:{...t,showCountdown:!0},timeSlider:{showAdMarkers:!1},aspectratio:!1,controls:!0,displaytitle:!1,displayHeading:!1,displaydescription:!1,floating:{mode:"never"},height:"100%",mute:!1,playbackRateControls:!0,pipIcon:"disabled",playlist:[qo({...s,starttime:C.current,feedid:f})],repeat:!1,cast:{},stretching:"uniform",width:"100%"};typeof w<"u"&&(W.autostart=w),N&&(W.key=N),v.current.setup(W),I(v.current),te()};if(v.current)return ie();S&&Q()},[S,s,oe,te,k,I,w,t,N,f]),h.useEffect(()=>()=>{v.current&&(oe(),v.current.remove())},[oe]),n.jsx("div",{className:o1.container,"data-testid":void 0,children:n.jsx("div",{ref:x})})},i1="_error_4iaxi_1",c1="_title_4iaxi_11",Oi={error:i1,title:c1};var zc=(s=>(s.GEO_BLOCKED="GEO_BLOCKED",s))(zc||{});const l1=()=>{const{t:s}=A("video");return n.jsxs("div",{className:Oi.error,children:[n.jsx("h2",{className:Oi.title,children:s("player_error.geo_blocked_title")}),n.jsx("p",{children:s("player_error.geo_blocked_description")})]})},Gc=({item:s,seriesItem:t,feedId:e,onPlay:r,onPause:a,onComplete:o,onUserActive:i,onUserInActive:c,onNext:l,liveEndDateTime:d,liveFromBeginning:u,liveStartDateTime:m,autostart:g})=>{const{data:_,isLoading:f}=e1({mediaId:s==null?void 0:s.mediaid}),{data:y,isLoading:w,isGeoBlocked:x}=s1(s),[v,b]=h.useState(),S=Qx(v,s,t),j=h.useCallback(P=>{b(P)},[]),C=h.useCallback(()=>{u&&(v==null||v.seek(0))},[u,v]),I=Zx(m,d);return!y||w||f?n.jsx(ye,{inline:!0}):x?n.jsx(l1,{error:zc.GEO_BLOCKED}):n.jsx(qc,{feedId:e,item:y,adsData:_,onReady:j,onFirstFrame:C,onPlay:r,onPause:a,onComplete:o,onUserActive:i,onUserInActive:c,onNext:l,onPlaylistItemCallback:I,startTime:S,autostart:g})},d1="_inlinePlayer_ytzkx_1",u1="_paywall_ytzkx_10",m1="_poster_ytzkx_26",h1="_lock_ytzkx_47",p1="_title_ytzkx_62",f1="_text_ytzkx_89",gs={inlinePlayer:d1,paywall:u1,poster:m1,lock:h1,title:p1,text:f1},Wn=({item:s,seriesItem:t,onPlay:e,onPause:r,onComplete:a,feedId:o,liveStartDateTime:i,liveEndDateTime:c,liveFromBeginning:l,startWatchingButton:d,isLoggedIn:u,isEntitled:m,autostart:g,playable:_=!0,hasMediaOffers:f})=>{const y=K(j=>j.config.siteName),{t:w}=A(),x=le(),v=ue(),b=()=>{x(J(v,"login"))},S=w(f?"video:buy_to_start_watching":"video:sign_up_to_start_watching");return n.jsxs("div",{className:gs.inlinePlayer,children:[n.jsx(_a,{open:!_||!m,children:n.jsxs("div",{className:gs.paywall,children:[n.jsx(Ts,{className:gs.poster,image:s.backgroundImage,alt:s.title,width:1280}),!m&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{icon:ia,className:gs.lock}),n.jsx("h2",{className:gs.title,children:S}),n.jsx("span",{className:gs.text,children:w("account:choose_offer.watch_this_on_platform",{siteName:y})}),d,!u&&n.jsx(D,{onClick:b,label:w("common:sign_in")})]})]})}),m&&_&&n.jsx(Gc,{item:s,seriesItem:t,feedId:o,autostart:g,onPlay:e,onPause:r,onComplete:a,liveEndDateTime:c,liveFromBeginning:l,liveStartDateTime:i})]})},Jc=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M8,5.14V19.14L19,12.14L8,5.14Z"})),g1="_progressRail_14udi_1",_1="_progress_14udi_1",Di={progressRail:g1,progress:_1},cn=({item:s,playUrl:t,disabled:e=!1,onClick:r})=>{const{t:a}=A("video"),o=le(),i=ue(),c=Le(),l=K(b=>b.accessModel),u=!!M(b=>b.user),m=ct(b=>s&&b.getItem(s)),g=m==null?void 0:m.progress,_=je(b=>b.setRequestedMediaOffers),{isEntitled:f,mediaOffers:y}=$s(s),w=!!y.length,x=h.useMemo(()=>a(f?typeof g=="number"?"continue_watching":"start_watching":w?"buy":u?"complete_your_subscription":"sign_up_to_start_watching"),[f,u,w,g,a]),v=h.useCallback(()=>{if(f){if(r){r();return}return t&&o(t)}return o(u?w?J(i,"choose-offer"):"/u/payments":J(i,"create-account"))},[f,t,o,u,i,w,r]);return h.useEffect(()=>(_(y),()=>_([])),[y,_]),l===Me.AVOD&&!f?null:n.jsx(D,{color:"primary",variant:"contained",size:"large",label:x,startIcon:f?n.jsx(Y,{icon:Jc}):void 0,onClick:v,fullWidth:c<ae.md,disabled:e,children:g?n.jsx("div",{className:Di.progressRail,children:n.jsx("div",{className:Di.progress,style:{width:`${g*100}%`}})}):null})},y1="_cinemaContainer_mksdu_1",v1="_cinema_mksdu_1",x1="_overlayFade_mksdu_13",w1="_playerOverlay_mksdu_18",b1="_playerContent_mksdu_35",j1="_backButton_mksdu_45",S1="_title_mksdu_57",C1="_metaContainer_mksdu_74",P1="_primaryMetadata_mksdu_79",k1="_secondaryMetadata_mksdu_93",ht={cinemaContainer:y1,cinema:v1,overlayFade:x1,playerOverlay:w1,playerContent:b1,backButton:j1,title:S1,metaContainer:C1,primaryMetadata:P1,secondaryMetadata:k1},ln=({open:s,item:t,seriesItem:e,title:r,primaryMetadata:a,secondaryMetadata:o,onPlay:i,onPause:c,onComplete:l,onClose:d,onNext:u,feedId:m,liveStartDateTime:g,liveEndDateTime:_,liveFromBeginning:f})=>{const{t:y}=A(),[w,x]=h.useState(!1),[v,b]=h.useState(!1),[S,j]=h.useState(!0),C=h.useCallback(()=>{x(!0),i&&i()},[i]),I=h.useCallback(()=>{x(!1),c&&c()},[c]),P=h.useCallback(()=>{l&&l()},[l]),k=h.useCallback(()=>{u&&u()},[u]),N=h.useCallback(()=>j(!0),[]),T=h.useCallback(()=>j(!1),[]);return h.useEffect(()=>{s&&j(!0)},[s]),n.jsx(Dn,{open:s,animationContainerClassName:ht.cinemaContainer,onClose:d,"aria-label":y("videoplayer"),children:n.jsxs("div",{className:ht.cinema,children:[n.jsx(_a,{className:ht.overlayFade,open:!w||S||v,keepMounted:!0,children:n.jsx("div",{className:ht.playerOverlay,onFocus:()=>b(!0),onBlur:()=>b(!1),children:n.jsxs("div",{className:ht.playerContent,children:[n.jsx(We,{"aria-label":y("common:back"),onClick:d,className:ht.backButton,children:n.jsx(Y,{icon:Pc})}),n.jsxs("div",{children:[n.jsx("h1",{className:ht.title,children:r}),n.jsxs("div",{className:ht.metaContainer,children:[o&&n.jsx("div",{className:ht.secondaryMetadata,children:o}),n.jsx("div",{className:ht.primaryMetadata,children:a})]})]})]})})}),n.jsx(Gc,{item:t,seriesItem:e,feedId:m,autostart:!0,onPlay:C,onPause:I,onComplete:P,onUserActive:N,onUserInActive:T,onNext:k,liveEndDateTime:_,liveFromBeginning:f,liveStartDateTime:g})]})})},E1="_container_1tbgz_1",N1="_playerOverlay_1tbgz_13",I1="_title_1tbgz_24",fr={container:E1,playerOverlay:N1,title:I1},Vn=({item:s,open:t,title:e,onClose:r})=>{const[a,o]=h.useState(!1),[i,c]=h.useState(!0),l=h.useCallback(()=>o(!0),[]),d=h.useCallback(()=>o(!1),[]),u=h.useCallback(()=>c(!0),[]),m=h.useCallback(()=>c(!1),[]);return s?n.jsx(Dn,{open:t,onClose:r,"aria-labelledby":"trailer-modal-title",centered:!0,children:n.jsxs("div",{className:fr.container,children:[n.jsx(qc,{item:s,onPlay:l,onPause:d,onComplete:r,onUserActive:u,onUserInActive:m,autostart:!0}),n.jsxs(_a,{open:!a||i,keepMounted:!0,children:[n.jsx("div",{className:fr.playerOverlay,children:n.jsx("h1",{id:"trailer-modal-title",className:fr.title,children:e})}),n.jsx(vc,{onClick:r})]})]})}):null},A1=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z"})),L1=s=>{const t=document.activeElement,e=document.createElement("input");e.style.zIndex="-10",e.style.position="absolute",e.style.left="-1000",e.value=s,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.blur(),document.body.removeChild(e),t==null||t.focus()},dn=({title:s,description:t,url:e})=>{const{t:r}=A(),a=Le(),[o,i]=h.useState(!1),c=async()=>{if(typeof navigator.share=="function"){await navigator.share({title:s,text:t,url:e});return}L1(window.location.href),i(!0),setTimeout(()=>i(!1),2e3)};return n.jsx(D,{label:r(o?"video:copied_url":"video:share"),startIcon:o?n.jsx(Y,{icon:Uc}):n.jsx(Y,{icon:A1}),onClick:c,active:o,fullWidth:a<ae.md})},T1=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C9.04,5 10.54,6 11.07,7.36H12.93C13.46,6 14.96,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.36 10.55,20.03L12,21.35L13.45,20.03C18.6,15.36 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z"})),qn=({item:s})=>{const{t}=A(),e=Le(),r=V(Cs),{isFavorite:a,clearWarning:o,warning:i}=ot(l=>({isFavorite:!!s&&l.hasItem(s),clearWarning:l.clearWarning,warning:l.warning})),c=h.useCallback(async()=>{await r.toggleFavorite(s)},[s,r]);return h.useEffect(()=>()=>o(),[o]),n.jsxs(n.Fragment,{children:[n.jsx(D,{label:t("video:favorite"),"aria-label":t("video:favorite"),startIcon:a?n.jsx(Y,{icon:ma}):n.jsx(Y,{icon:T1}),onClick:c,"aria-pressed":a,color:a?"primary":"default",fullWidth:e<ae.md}),n.jsx(ha,{open:i!==null,message:i,onClose:o})]})},$1="_loading_1bc17_1",O1={loading:$1},ns=()=>n.jsx("div",{className:O1.loading,children:n.jsx(ss,{})}),D1="_separator_14n07_1",F1={separator:D1},Ps=({attributes:s,separator:t=""})=>n.jsx("div",{children:s.map((e,r)=>n.jsxs(Ne.Fragment,{children:[n.jsx("span",{children:e}),r<s.length-1&&n.jsx("span",{className:F1.separator,"aria-hidden":"true",children:t})]},e))});function En(s,t=!1){if(!s)return"";const e=new Date(s?s*1e3:0),r=e.getUTCHours(),a=e.getUTCMinutes(),o=e.getUTCSeconds();if(!t)return e.toISOString();let i="PT";return r>0&&(i+=r+"H"),a>0&&(i+=a+"M"),o>0&&(i+=o+"S"),i}const M1=()=>{const s=new Date(Date.UTC(2022,6,20,18,0,0));return/am|pm/.test(s.toLocaleTimeString())},B1=s=>((s==null?void 0:s.playlist)||[]).reduce((t,e)=>t.some(r=>(r==null?void 0:r.value)===(e==null?void 0:e.seasonNumber))?t:t.concat(e.seasonNumber?[{label:we.t("video:season_number_filter_template",{seasonNumber:e.seasonNumber}),value:e.seasonNumber}]:[]),[]).slice().sort(),R1=(s,t)=>{if(s)return t===""?s:{...s,playlist:s.playlist.filter(({seasonNumber:e})=>e===t)}},H1=(s,t)=>{var r,a;if(!s||!t)return;const e=(r=t==null?void 0:t.playlist)==null?void 0:r.findIndex(({mediaid:o})=>o===s.mediaid);return(a=t==null?void 0:t.playlist)==null?void 0:a[e+1]},U1=(s,t)=>{var e;if(t)return(e=t.playlist.filter(r=>r.seasonNumber===(s==null?void 0:s.seasonNumber)))==null?void 0:e.length},W1=(s,t)=>({"@type":"TVSeries","@id":`${window.location.origin}/s/${t}`,name:s.title,numberOfEpisodes:String(s.playlist.length),numberOfSeasons:String(s.playlist.reduce(function(r,a){return!a.seasonNumber||r.includes(a.seasonNumber)?r:r.concat(a.seasonNumber)},[]).length)}),V1=(s,t,e,r)=>{const a=`${window.location.origin}${Zt({episodeId:t==null?void 0:t.mediaid,seriesId:r})}`,o=W1(s,r);return JSON.stringify(t?{"@context":"http://schema.org/","@type":"TVEpisode","@id":a,episodeNumber:e==null?void 0:e.episodeNumber,seasonNumber:e==null?void 0:e.seasonNumber,name:t.title,uploadDate:En(t.pubdate),partOfSeries:o}:o)},q1=()=>{var Jt,Fs;const s=Le(),{t}=A("video"),[e,r]=h.useState(!1),a=le(),i=zt().id||"",c=Be("play")==="1",l=Be("r"),d=Be("e"),{isLoading:u,data:m,isError:g}=on(i,{},!0,!1),{isLoading:_,data:f}=qt(d||""),{isLoading:y,data:w}=qt((f==null?void 0:f.trailerId)||""),x=h.useMemo(()=>({episodeNumber:(f==null?void 0:f.episodeNumber)||"0",seasonNumber:(f==null?void 0:f.seasonNumber)||"0"}),[f]),v=f||m,b=(v==null?void 0:v.image)||"",{config:S,accessModel:j}=K(({config:Pe,accessModel:Ms})=>({config:Pe,accessModel:Ms}),he),{features:C,siteName:I,custom:P}=S,k=!!(C!=null&&C.favoritesList),N=!!(P!=null&&P.inlinePlayer),T=h.useMemo(()=>B1(m),[m]),[O,H]=h.useState(void 0),U=h.useMemo(()=>{var Pe;return(Pe=m==null?void 0:m.playlist)==null?void 0:Pe[0]},[m]),L=h.useMemo(()=>R1(m,O),[m,O]),R=U1(f,m),X=h.useMemo(()=>H1(f,m),[f,m]),ee=ct(Pe=>Pe.getDictionaryWithEpisodes()),{user:z,subscription:E}=M(({user:Pe,subscription:Ms})=>({user:Pe,subscription:Ms}),he),{isEntitled:$,mediaOffers:G}=$s(f||U),te=!!G.length,oe=!!z,ie=!!E,Q=()=>f&&a(Zt({episodeId:f.mediaid,seriesId:i,play:!1,playlistId:l})),W=Pe=>m?Zt({episodeId:Pe.mediaid,seriesId:i,play:!1,playlistId:l}):"",q=h.useCallback(async()=>{a(Zt({episodeId:X==null?void 0:X.mediaid,seriesId:i,play:!!X,playlistId:l}))},[a,X,i,l]);h.useEffect(()=>{var Pe;(document.scrollingElement||document.body).scroll({top:0}),(Pe=document.querySelector("#video-details button"))==null||Pe.focus()},[f]),h.useEffect(()=>{var Pe;u||_||O===void 0&&H(parseInt(x==null?void 0:x.seasonNumber,10)?x==null?void 0:x.seasonNumber:((Pe=T==null?void 0:T[0])==null?void 0:Pe.value)||"")},[x,O,u,_,T]);const se=u||_;if(se)return n.jsx(ns,{});if(g||!m||!v||!U)return n.jsx(Ze,{title:t("series_error")});const ge=`${v.title} - ${I}`,Te=(v==null?void 0:v.description)||"",be=`${window.location.origin}${Zt({episodeId:f==null?void 0:f.mediaid,seriesId:i})}`,re=v.backgroundImage||void 0,Oe=f?n.jsx(Ps,{attributes:pa(f,t("video:total_episodes",{count:(Jt=m==null?void 0:m.playlist)==null?void 0:Jt.length}))}):n.jsx(Ps,{attributes:$v(m,t("video:total_episodes",{count:(Fs=m==null?void 0:m.playlist)==null?void 0:Fs.length}))}),Ve=x&&f&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:$n(x.seasonNumber,x.episodeNumber)})," - ",f.title]}),wt=x&&` ${t("video:season")} ${x.seasonNumber}/${T==null?void 0:T.length} - ${t("video:episode")} ${x.episodeNumber}/${R}`,zn=n.jsx(dn,{title:v==null?void 0:v.title,description:Te,url:be}),Os=n.jsx(cn,{item:f||U,playUrl:Zt({episodeId:(f==null?void 0:f.mediaid)||(U==null?void 0:U.mediaid),seriesId:i,play:!0,playlistId:l})},d),un=k&&n.jsx(qn,{item:f||U}),Ds=(!!w||y)&&n.jsx(D,{label:t("video:trailer"),"aria-label":t("video:watch_trailer"),startIcon:n.jsx(Y,{icon:Hn}),onClick:()=>r(!0),active:e,fullWidth:s<ae.md,disabled:!w});return n.jsxs(Ne.Fragment,{children:[n.jsxs(_t,{children:[n.jsx("title",{children:ge}),n.jsx("link",{rel:"canonical",href:be}),n.jsx("meta",{name:"description",content:Te}),n.jsx("meta",{property:"og:description",content:Te}),n.jsx("meta",{property:"og:title",content:ge}),n.jsx("meta",{property:"og:type",content:f?"video.episode":"video.series"}),b&&n.jsx("meta",{property:"og:image",content:b==null?void 0:b.replace(/^https:/,"http:")}),b&&n.jsx("meta",{property:"og:image:secure_url",content:b==null?void 0:b.replace(/^http:/,"https:")}),b&&n.jsx("meta",{property:"og:image:width",content:b?"720":""}),b&&n.jsx("meta",{property:"og:image:height",content:b?"406":""}),n.jsx("meta",{name:"twitter:title",content:ge}),n.jsx("meta",{name:"twitter:description",content:Te}),b&&n.jsx("meta",{name:"twitter:image",content:b}),n.jsx("meta",{property:"og:video",content:be.replace(/^https:/,"http:")}),n.jsx("meta",{property:"og:video:secure_url",content:be.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:video:type",content:"text/html"}),n.jsx("meta",{property:"og:video:width",content:"1280"}),n.jsx("meta",{property:"og:video:height",content:"720"}),v.tags?String(v.tags).split(",").map(Pe=>n.jsx("meta",{property:"og:video:tag",content:Pe},Pe)):null,m&&v?n.jsx("script",{type:"application/ld+json",children:V1(m,f,x,i)}):null]}),n.jsx(Un,{item:f,title:v.title,description:Te,inlineLayout:N,primaryMetadata:Oe,secondaryMetadata:Ve,image:re,shareButton:zn,favoriteButton:un,trailerButton:Ds,startWatchingButton:Os,isLoading:se,accessModel:j,isLoggedIn:oe,hasSubscription:ie,playlist:L,relatedTitle:N?v.title:t("episodes"),setFilter:H,currentFilter:O,defaultFilterLabel:t("all_seasons"),activeLabel:t("current_episode"),watchHistory:ee,filterMetadata:wt,filters:T,getURL:W,player:N&&(f||U)?n.jsx(Wn,{isLoggedIn:oe,item:f||U,onComplete:q,feedId:l??void 0,startWatchingButton:Os,isEntitled:$,hasMediaOffers:te,autostart:c||void 0}):n.jsx(ln,{open:c&&$,onClose:Q,item:f||U,title:(f==null?void 0:f.title)||U.title,primaryMetadata:Oe,secondaryMetadata:Ve,onComplete:q,feedId:l??void 0})}),f&&n.jsx(Vn,{item:w,title:`${f.title} - Trailer`,open:e,onClose:()=>r(!1)})]})};class Yc{constructor(){p(this,"defaultScreen");p(this,"definitions",[])}register(t,e){this.definitions.push({component:t,predicate:e})}registerByContentType(t,e){this.register(t,r=>!!r&&sn(r,e))}registerDefault(t){this.defaultScreen=t}getScreen(t){var r;const e=(r=this.definitions.find(({predicate:a})=>a(t)))==null?void 0:r.component;if(e)return e;if(!this.defaultScreen)throw new Error("Default screen not defined");return this.defaultScreen}}const z1="_mediaStaticPage_v6zr1_1",G1={mediaStaticPage:z1},J1=({data:s})=>{const{config:t}=K(({config:o})=>({config:o}),he),{siteName:e}=t,r=`${s.title} - ${e}`,a=s?`${window.location.origin}${Fe({media:s})}`:window.location.href;return h.useEffect(()=>{(document.scrollingElement||document.body).scroll({top:0})},[s.mediaid]),n.jsxs(n.Fragment,{children:[n.jsxs(_t,{children:[n.jsx("title",{children:r}),n.jsx("link",{rel:"canonical",href:a}),n.jsx("meta",{property:"og:title",content:r}),n.jsx("meta",{name:"twitter:title",content:r})]}),n.jsx("div",{className:G1.mediaStaticPage,children:n.jsx(aa,{markdownString:s.markdown||s.description})})]})},ya=(s,t)=>{const e=`${t}${Fe({media:s})}`;return JSON.stringify({"@context":"http://schema.org/","@type":"VideoObject","@id":e,name:s.title,description:s.description,duration:En(s.duration,!0),thumbnailUrl:s.image,uploadDate:En(s.pubdate)})},Y1=(s,t,e,r)=>({"@type":"TVSeries","@id":`${r}/m/${e}`,name:t.title,numberOfEpisodes:String((s==null?void 0:s.episode_count)||0),numberOfSeasons:String((s==null?void 0:s.season_count)||0)}),K1=(s,t,e,r,a)=>{const o=`${e}/m/${s.series_id}?e=${r==null?void 0:r.mediaid}`,i=Y1(s,t,s.series_id,e);return JSON.stringify(r?{"@context":"http://schema.org/","@type":"TVEpisode","@id":o,episodeNumber:(a==null?void 0:a.episodeNumber)||"0",seasonNumber:(a==null?void 0:a.seasonNumber)||"0",name:r.title,uploadDate:En(r.pubdate),partOfSeries:i}:i)},Kc=({data:s,isLoading:t})=>{var te,oe,ie;const{t:e}=A("video"),[r,a]=h.useState(!1),o=Le(),i=le(),l=zt().id||"",d=Be("play")==="1",u=Be("r"),{config:m,accessModel:g}=K(({config:Q,accessModel:W})=>({config:Q,accessModel:W}),he),{siteName:_,features:f,custom:y}=m,w=!!(f!=null&&f.favoritesList),x=!!(y!=null&&y.inlinePlayer),{isLoading:v,data:b}=qt((s==null?void 0:s.trailerId)||""),{isLoading:S,data:j}=on((f==null?void 0:f.recommendationsPlaylist)||"",{related_media_id:l}),{user:C,subscription:I}=M(({user:Q,subscription:W})=>({user:Q,subscription:W}),he),{isEntitled:P,mediaOffers:k}=$s(s),N=!!k.length,T=()=>s&&i(Fe({media:s,playlistId:u,play:!1})),O=Q=>Fe({media:Q,playlistId:f==null?void 0:f.recommendationsPlaylist}),H=h.useCallback(()=>{if(!l||!j)return;const Q=j.playlist.findIndex(({mediaid:q})=>q===l),W=j.playlist[Q+1];return W&&i(Fe({media:W,playlistId:f==null?void 0:f.recommendationsPlaylist,play:!0}))},[l,j,i,f==null?void 0:f.recommendationsPlaylist]);h.useEffect(()=>{var Q;(document.scrollingElement||document.body).scroll({top:0}),(Q=document.querySelector("#video-details button"))==null||Q.focus()},[l]);const U=`${s.title} - ${_}`,L=s?`${window.location.origin}${Fe({media:s})}`:window.location.href,R=n.jsx(Ps,{attributes:pa(s)}),X=n.jsx(dn,{title:s.title,description:s.description,url:L}),ee=n.jsx(cn,{item:s,playUrl:Fe({media:s,playlistId:u,play:!0})},l),z=w&&n.jsx(qn,{item:s}),E=(!!b||v)&&n.jsx(D,{label:e("video:trailer"),"aria-label":e("video:watch_trailer"),startIcon:n.jsx(Y,{icon:Hn}),onClick:()=>a(!0),active:r,fullWidth:o<ae.md,disabled:!b}),$=!!C,G=!!I;return n.jsxs(Ne.Fragment,{children:[n.jsxs(_t,{children:[n.jsx("title",{children:U}),n.jsx("link",{rel:"canonical",href:L}),n.jsx("meta",{name:"description",content:s.description}),n.jsx("meta",{property:"og:description",content:s.description}),n.jsx("meta",{property:"og:title",content:U}),n.jsx("meta",{property:"og:type",content:"video.other"}),s.image&&n.jsx("meta",{property:"og:image",content:(te=s.image)==null?void 0:te.replace(/^https:/,"http:")}),s.image&&n.jsx("meta",{property:"og:image:secure_url",content:(oe=s.image)==null?void 0:oe.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:image:width",content:s.image?"720":""}),n.jsx("meta",{property:"og:image:height",content:s.image?"406":""}),n.jsx("meta",{name:"twitter:title",content:U}),n.jsx("meta",{name:"twitter:description",content:s.description}),n.jsx("meta",{name:"twitter:image",content:s.image}),n.jsx("meta",{property:"og:video",content:L.replace(/^https:/,"http:")}),n.jsx("meta",{property:"og:video:secure_url",content:L.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:video:type",content:"text/html"}),n.jsx("meta",{property:"og:video:width",content:"1280"}),n.jsx("meta",{property:"og:video:height",content:"720"}),(ie=s.tags)==null?void 0:ie.split(",").map(Q=>n.jsx("meta",{property:"og:video:tag",content:Q},Q)),s?n.jsx("script",{type:"application/ld+json",children:ya(s,window.location.origin)}):null]}),n.jsx(Un,{item:s,inlineLayout:x,isLoading:t||S,accessModel:g,isLoggedIn:$,hasSubscription:G,title:s.title,description:s.description,image:s.backgroundImage,primaryMetadata:R,shareButton:X,favoriteButton:z,trailerButton:E,startWatchingButton:ee,playlist:j,relatedTitle:j==null?void 0:j.title,getURL:O,activeLabel:e("current_video"),player:x?n.jsx(Wn,{isLoggedIn:$,item:s,onComplete:H,feedId:u??void 0,startWatchingButton:ee,isEntitled:P,hasMediaOffers:N,autostart:d||void 0}):n.jsx(ln,{open:d&&P,onClose:T,item:s,title:s.title,primaryMetadata:R,onComplete:H,feedId:u??void 0,onNext:H})}),n.jsx(Vn,{item:b,title:`${s.title} - Trailer`,open:r,onClose:()=>a(!1)})]})},Q1=s=>s&&"seasons"in s?s.seasons.map(t=>({label:t.season_title||String(t.season_number),value:String(t.season_number)})):[],Z1=(s,t)=>{var e;return(e=((t==null?void 0:t.seasons)||[]).find(r=>r.season_number===Number(s==null?void 0:s.seasonNumber)))==null?void 0:e.episode_count},X1=s=>{const t=V(He),{data:e,isLoading:r,error:a}=Ue(["series",s],async()=>await t.getSeries(s||""),{enabled:!!s,staleTime:Es,cacheTime:ks,retry:(o,i)=>i.code!==404&&o<2});return{data:e,isLoading:r,error:a}},ew=s=>{const{page:t,page_limit:e,total:r}=s;if(!(e*t>=r))return t},tw=(s,t,e)=>{const r=V(He),{data:a,fetchNextPage:o,isLoading:i,hasNextPage:c=!1}=Ll([s,t],async({pageParam:l=0})=>{if(Number(t)){const d=await r.getSeasonWithEpisodes({seriesId:s,seasonNumber:Number(t),pageOffset:l});return{pagination:d.pagination,episodes:d.episodes}}else return await r.getEpisodes({seriesId:s,pageOffset:l})},{getNextPageParam:l=>ew(l==null?void 0:l.pagination),enabled:e.enabled,staleTime:Es,cacheTime:ks});return{data:(a==null?void 0:a.pages)||[],isLoading:i,fetchNextPage:o,hasNextPage:c}},Qc=s=>{const t=V(He),{isLoading:e,data:r}=Ue(["seriesLookup",s],async()=>{var i;if(!s)return;const a=await t.getSeriesByMediaIds([s]);return(i=a==null?void 0:a[s])==null?void 0:i[0]},{staleTime:Es,cacheTime:ks,enabled:!!s});return{isLoading:e,data:r}},sw=({series:s,episodeId:t})=>{const e=V(He),{isLoading:r,data:a}=Ue(["next-episode",s==null?void 0:s.series_id,t],async()=>{var i;const o=await e.getEpisodes({seriesId:s==null?void 0:s.series_id,pageLimit:1,afterId:t});return(i=o==null?void 0:o.episodes)==null?void 0:i[0]},{staleTime:Es,cacheTime:ks,enabled:!!(s!=null&&s.series_id&&t)});return{isLoading:r,data:a}},Zc=({data:s})=>{var wa,ba,ja;const t=Le(),{t:e}=A("video"),[r,a]=h.useState(!1),[o,i]=en(),c=s.mediaid,l=o.get("play")==="1",d=o.get("r"),u=o.get("e"),{isLoading:m,data:g,error:_}=X1(c),{isLoading:f,data:y}=qt(u||""),{isLoading:w,data:x}=qt((y==null?void 0:y.trailerId)||""),{data:v,isLoading:b}=Qc(y==null?void 0:y.mediaid),S=y||s,{config:j,accessModel:C}=K(({config:de,accessModel:rs})=>({config:de,accessModel:rs}),he),{features:I,siteName:P,custom:k}=j,N=!!(I!=null&&I.favoritesList),T=!!(k!=null&&k.inlinePlayer),O=h.useMemo(()=>Q1(g),[g]),[H,U]=h.useState(void 0),{data:L,fetchNextPage:R,hasNextPage:X}=tw(c,H,{enabled:H!==void 0&&!!g}),ee=h.useMemo(()=>{var de,rs;return(rs=(de=L==null?void 0:L[0])==null?void 0:de.episodes)==null?void 0:rs[0]},[L]),z=h.useMemo(()=>v&&{episodeNumber:v!=null&&v.episode_number?String(v.episode_number):"",seasonNumber:v!=null&&v.season_number?String(v.season_number):""},[v]),E=h.useMemo(()=>({title:s.title,description:s.description,feedid:g==null?void 0:g.series_id,playlist:(L==null?void 0:L.flatMap(de=>de.episodes))||[]}),[s,g,L]),$=Z1(z,g),{data:G}=sw({series:g,episodeId:(y==null?void 0:y.mediaid)||(ee==null?void 0:ee.mediaid)}),te=ct(de=>de.watchHistory),oe=ct(de=>de.getDictionaryWithEpisodes()),ie=te.find(de=>(de==null?void 0:de.seriesId)===c&&de.progress>Wt.Min&&de.progress<Wt.Max),{user:Q,subscription:W}=M(({user:de,subscription:rs})=>({user:de,subscription:rs}),he),{isEntitled:q,mediaOffers:se}=$s(y||ee),ge=!!se.length,Te=!!Q,be=!!W,re=ue(),Oe=de=>On(re,{e:de.mediaid}),Ve=h.useCallback(()=>{i({...o,e:y==null?void 0:y.mediaid,r:d||""})},[i,o,y,d]),wt=h.useCallback(async()=>{var de;i({...o,e:(de=G||y)==null?void 0:de.mediaid,r:d||"",play:G?"1":"0"})},[i,G,y,d,o]),zn=h.useCallback(async()=>{y||i({...o,e:ee==null?void 0:ee.mediaid,r:d||"",play:"1"})},[i,ee,d,y,o]);h.useEffect(()=>{var de;(document.scrollingElement||document.body).scroll({top:0}),(de=document.querySelector("#video-details button"))==null||de.focus()},[y]),h.useEffect(()=>{ie&&!o.get("e")&&i({...o,e:ie.mediaid,r:d||""},{replace:!0})},[ie,i,o,d]),h.useEffect(()=>{var de;if(!(m||f||b)){if(!u&&H===void 0){U(((de=O[0])==null?void 0:de.value)||"");return}H===void 0&&z&&U(z.seasonNumber)}},[z,H,m,f,b,O,u]);const Os=h.useMemo(()=>n.jsx(cn,{item:y||ee,onClick:()=>{i({...o,e:(y||ee).mediaid,r:d||"",play:"1"},{replace:!0})}},u),[u,y,ee,i,o,d]),un=m||b||f;if(un)return n.jsx(ns,{});if((_==null?void 0:_.code)===404){const de=oc(s,l,d);return n.jsx(Vt,{to:de,replace:!0})}if(!s||!g)return n.jsx(Ze,{title:e("series_error")});const Ds=`${S.title} - ${P}`,Jt=`${window.location.origin}${Fe({media:s,episodeId:y==null?void 0:y.mediaid})}`,Fs=n.jsx(Ps,{attributes:pa(S,e("video:total_episodes",{count:g.episode_count}))}),Pe=z&&y&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:$n(z.seasonNumber,z.episodeNumber)})," - ",y.title]}),Ms=z&&` ${e("video:season")} ${z.seasonNumber}/${O==null?void 0:O.length} - ${e("video:episode")} ${z.episodeNumber}/${$}`,al=n.jsx(dn,{title:S==null?void 0:S.title,description:S.description,url:Jt}),ol=N&&n.jsx(qn,{item:s||ee}),il=(!!x||w)&&n.jsx(D,{label:e("video:trailer"),"aria-label":e("video:watch_trailer"),startIcon:n.jsx(Y,{icon:Hn}),onClick:()=>a(!0),active:r,fullWidth:t<ae.md,disabled:!x});return n.jsxs(Ne.Fragment,{children:[n.jsxs(_t,{children:[n.jsx("title",{children:Ds}),n.jsx("link",{rel:"canonical",href:Jt}),n.jsx("meta",{name:"description",content:S.description}),n.jsx("meta",{property:"og:description",content:S.description}),n.jsx("meta",{property:"og:title",content:Ds}),n.jsx("meta",{property:"og:type",content:y?"video.episode":"video.series"}),S.image&&n.jsx("meta",{property:"og:image",content:(wa=S.image)==null?void 0:wa.replace(/^https:/,"http:")}),S.image&&n.jsx("meta",{property:"og:image:secure_url",content:(ba=S.image)==null?void 0:ba.replace(/^http:/,"https:")}),S.image&&n.jsx("meta",{property:"og:image:width",content:S.image?"720":""}),S.image&&n.jsx("meta",{property:"og:image:height",content:S.image?"406":""}),n.jsx("meta",{name:"twitter:title",content:Ds}),n.jsx("meta",{name:"twitter:description",content:S.description}),n.jsx("meta",{name:"twitter:image",content:S.image}),n.jsx("meta",{property:"og:video",content:Jt.replace(/^https:/,"http:")}),n.jsx("meta",{property:"og:video:secure_url",content:Jt.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:video:type",content:"text/html"}),n.jsx("meta",{property:"og:video:width",content:"1280"}),n.jsx("meta",{property:"og:video:height",content:"720"}),(ja=S.tags)==null?void 0:ja.split(",").map(de=>n.jsx("meta",{property:"og:video:tag",content:de},de)),S?n.jsx("script",{type:"application/ld+json",children:K1(g,s,window.location.origin,y,z)}):null]}),n.jsx(Un,{item:S,title:T?S.title:s.title,description:S.description||s.description,inlineLayout:T,primaryMetadata:Fs,secondaryMetadata:Pe,image:S.backgroundImage,shareButton:al,favoriteButton:ol,trailerButton:il,startWatchingButton:Os,isLoading:un,accessModel:C,isLoggedIn:Te,hasSubscription:be,playlist:E,relatedTitle:T?s.title:e("episodes"),getURL:Oe,setFilter:U,currentFilter:H,defaultFilterLabel:e("all_seasons"),activeLabel:e("current_episode"),watchHistory:oe,filterMetadata:Ms,filters:O,hasMore:X,loadMore:R,player:T&&(y||ee)?n.jsx(Wn,{isLoggedIn:Te,item:y||ee,seriesItem:s,onComplete:wt,feedId:d??void 0,onPlay:zn,startWatchingButton:Os,isEntitled:q,hasMediaOffers:ge,autostart:l||void 0}):n.jsx(ln,{open:l&&q,onClose:Ve,item:y||ee,seriesItem:s,title:s.title,primaryMetadata:Fs,secondaryMetadata:Pe,onComplete:wt,feedId:d??void 0})}),y&&n.jsx(Vn,{item:x,title:`${y.title} - Trailer`,open:r,onClose:()=>a(!1)})]})},nw=({data:s,isLoading:t})=>{const e=s.liveChannelsId;return t?n.jsx(ns,{}):e?n.jsx(Vt,{to:vs(e,s.mediaid),replace:!0}):n.jsx(Kc,{data:s,isLoading:t})},Xc=({data:s,isLoading:t})=>{const e=s.mediaid,[r]=en(),a=r.get("play")==="1",o=r.get("r"),{data:i,isLoading:c}=Qc(s.mediaid),{isLoading:l,data:d}=qt((i==null?void 0:i.series_id)||"");return t||c||l?n.jsx(ns,{}):i?n.jsx(Vt,{to:Fe({episodeId:e,media:d,play:a,playlistId:o}),replace:!0}):n.jsx(Vt,{to:oc(s,a,o),replace:!0})};function rw(s){return{isLiveEvent:Zi(s),isPlayable:ld(s)}}const aw="_tag_gc1jh_1",ow="_normal_gc1jh_11",iw="_large_gc1jh_20",cw="_live_gc1jh_31",gr={tag:aw,normal:ow,large:iw,live:cw},$r=({children:s,className:t,isLive:e=!1,size:r="normal"})=>n.jsx("div",{className:B(t,gr.tag,gr[r],{[gr.live]:e}),children:s}),lw="_icon_1fdnv_1",Fi={icon:lw};function dw({mediaStatus:s}){const{t}=A("video");return s===Nt.SCHEDULED||s===Nt.VOD?n.jsx(Y,{icon:ca,className:Fi.icon}):s===Nt.LIVE?n.jsx($r,{isLive:!0,className:Fi.icon,children:t("live")}):null}const uw=({data:s,isLoading:t})=>{var ie,Q,W;const{t:e,i18n:r}=A("video"),[a,o]=h.useState(!1),i=Le(),c=le(),d=zt().id||"",u=Be("play")==="1",m=Be("r"),{config:g,accessModel:_}=K(({config:q,accessModel:se})=>({config:q,accessModel:se}),he),{siteName:f,features:y,custom:w}=g,x=!!(y!=null&&y.favoritesList),v=!!(w!=null&&w.inlinePlayer),{isLoading:b,data:S}=qt((s==null?void 0:s.trailerId)||""),{isLoading:j,data:C}=on(m||""),I=rw(s),{user:P,subscription:k}=M(({user:q,subscription:se})=>({user:q,subscription:se}),he),{isEntitled:N,mediaOffers:T}=$s(s),O=!!T.length,H=()=>s&&c(Fe({media:s,playlistId:m,play:!1})),U=q=>Fe({media:q,playlistId:m}),L=h.useCallback(()=>{if(!d||!C)return;const q=C.playlist.findIndex(({mediaid:ge})=>ge===d),se=C.playlist[q+1];if(se.mediaStatus!==Nt.SCHEDULED)return se&&c(Fe({media:se,playlistId:m,play:!0}))},[d,C,c,m]);h.useEffect(()=>{var q;(document.scrollingElement||document.body).scroll({top:0}),(q=document.querySelector("#video-details button"))==null||q.focus()},[d]);const R=`${s.title} - ${f}`,X=s?`${window.location.origin}${Fe({media:s})}`:window.location.href,ee=n.jsxs(n.Fragment,{children:[n.jsx(dw,{mediaStatus:s.mediaStatus}),n.jsx(Ps,{attributes:Ov(s,r.language)})]}),z=n.jsx(dn,{title:s.title,description:s.description,url:X}),E=n.jsx(cn,{item:s,playUrl:Fe({media:s,playlistId:m,play:!0}),disabled:!I.isPlayable},d),$=x&&n.jsx(qn,{item:s}),G=(!!S||b)&&n.jsx(D,{label:e("video:trailer"),"aria-label":e("video:watch_trailer"),startIcon:n.jsx(Y,{icon:Hn}),onClick:()=>o(!0),active:a,fullWidth:i<ae.md,disabled:!S}),te=!!P,oe=!!k;return n.jsxs(Ne.Fragment,{children:[n.jsxs(_t,{children:[n.jsx("title",{children:R}),n.jsx("link",{rel:"canonical",href:X}),n.jsx("meta",{name:"description",content:s.description}),n.jsx("meta",{property:"og:description",content:s.description}),n.jsx("meta",{property:"og:title",content:R}),n.jsx("meta",{property:"og:type",content:"video.other"}),s.image&&n.jsx("meta",{property:"og:image",content:(ie=s.image)==null?void 0:ie.replace(/^https:/,"http:")}),s.image&&n.jsx("meta",{property:"og:image:secure_url",content:(Q=s.image)==null?void 0:Q.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:image:width",content:s.image?"720":""}),n.jsx("meta",{property:"og:image:height",content:s.image?"406":""}),n.jsx("meta",{name:"twitter:title",content:R}),n.jsx("meta",{name:"twitter:description",content:s.description}),n.jsx("meta",{name:"twitter:image",content:s.image}),n.jsx("meta",{property:"og:video",content:X.replace(/^https:/,"http:")}),n.jsx("meta",{property:"og:video:secure_url",content:X.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:video:type",content:"text/html"}),n.jsx("meta",{property:"og:video:width",content:"1280"}),n.jsx("meta",{property:"og:video:height",content:"720"}),(W=s.tags)==null?void 0:W.split(",").map(q=>n.jsx("meta",{property:"og:video:tag",content:q},q)),s?n.jsx("script",{type:"application/ld+json",children:ya(s,window.location.origin)}):null]}),n.jsx(Un,{item:s,inlineLayout:v,isLoading:t||j,accessModel:_,isLoggedIn:te,hasSubscription:oe,title:s.title,description:s.description,image:s.backgroundImage,primaryMetadata:ee,shareButton:z,favoriteButton:$,trailerButton:G,startWatchingButton:E,playlist:C,relatedTitle:C==null?void 0:C.title,getURL:U,activeLabel:e("current_video"),player:v?n.jsx(Wn,{isLoggedIn:te,item:s,onComplete:L,feedId:m??void 0,startWatchingButton:E,isEntitled:N,hasMediaOffers:O,autostart:I.isPlayable&&(u||void 0),playable:I.isPlayable}):n.jsx(ln,{open:u&&N,onClose:H,item:s,title:s.title,primaryMetadata:ee,onComplete:L,feedId:m??void 0,onNext:L})}),n.jsx(Vn,{item:S,title:`${s.title} - Trailer`,open:a,onClose:()=>o(!1)})]})},xt=new Yc;xt.registerByContentType(Zc,dt.series);xt.registerByContentType(Xc,dt.episode);xt.registerByContentType(nw,dt.liveChannel);xt.registerByContentType(uw,dt.liveEvent);xt.registerByContentType(J1,dt.page);xt.registerDefault(Kc);xt.register(Xc,s=>!!s&&nc(s));xt.register(Zc,s=>!!s&&tc(s));const mw=()=>{const t=zt().id||"",{isLoading:e,isFetching:r,error:a,data:o}=qt(t),{t:i}=A("error");if(e)return n.jsx(ns,{});if(a||!o)return n.jsx(Ze,{title:i("video_not_found")});const c=xt.getScreen(o);return n.jsx(c,{data:o,isLoading:r})},hw="_playlist_1eoo8_1",pw="_main_1eoo8_26",fw="_header_1eoo8_30",gw="_cell_1eoo8_47",_w="_error_1eoo8_51",_r={playlist:hw,main:pw,header:fw,cell:gw,error:_w},yw=({data:s,isLoading:t})=>{const{config:e,accessModel:r}=K(({config:_,accessModel:f})=>({config:_,accessModel:f}),he),[a,o]=h.useState(""),i=Jd(e,s.feedid),c=h.useMemo(()=>Yd(s,a),[s,a]),l=!!i.length,{user:d,subscription:u}=M(({user:_,subscription:f})=>({user:_,subscription:f}),he);h.useEffect(()=>{o("")},[s.feedid]);const m=`${s.title} - ${e.siteName}`,g=_=>Fe({media:_,playlistId:_.feedid});return n.jsxs("div",{className:_r.playlist,children:[n.jsxs(_t,{children:[n.jsx("title",{children:m}),n.jsx("meta",{property:"og:title",content:m}),n.jsx("meta",{name:"twitter:title",content:m})]}),n.jsxs("div",{className:_r.main,children:[n.jsxs("header",{className:_r.header,children:[n.jsx("h1",{children:s.title}),l&&n.jsx(Wc,{name:"genre",value:a,defaultLabel:"All",options:i,setValue:o})]}),n.jsx(Rn,{getUrl:g,playlist:c,accessModel:r,isLoggedIn:!!d,hasSubscription:!!u,isLoading:t,headingLevel:2})]})]})},va=s=>{const t=new Date(s.startTime),e=new Date(s.endTime);return zi(t)&&Tl(e)},vw=s=>{const t=new Date(s.endTime);return zi(t)},xw=(s,t=8)=>{const e=new Date(s.startTime),r=Gi(new Date,t);return $l(e,r)},wn=s=>s.programs.find(va),ww=({playlist:s,initialChannelId:t,enableAutoUpdate:e=!0})=>{const r=V(dc),{data:a=[]}=Ue(["schedules",...s.map(({mediaid:g})=>g)],()=>r.getSchedules(s),{refetchInterval:Zl}),[o,i]=h.useState(e),[c,l]=h.useState(),[d,u]=h.useState();h.useEffect(()=>{if(!o||!e)return;const g=window.setInterval(()=>c&&u(wn(c)),5e3);return()=>clearInterval(g)},[c,o,e]),h.useEffect(()=>{const g=a.find(({id:_})=>_===t)||a[0];if(!c&&g&&(l(g),u(wn(g))),c){const _=a.find(({id:y})=>y===c.id);let f=d&&(_==null?void 0:_.programs.find(({id:y})=>y===(d==null?void 0:d.id)));!f&&_&&(f=wn(_)),l(_),u(f)}},[a]);const m=h.useCallback((g,_)=>{const f=a==null?void 0:a.find(w=>w.id===g);if(!f)return;const y=_?f.programs.find(w=>w.id===_):wn(f);l(f),u(y),i(!y||va(y))},[a]);return{channel:c,channels:a,program:d,setActiveChannel:m}},bw=({program:s,catchupHours:t})=>{const[e,r]=h.useState(!1),[a,o]=h.useState(!1),[i,c]=h.useState(!1);return h.useEffect(()=>{const l=()=>{r(!!s&&va(s)),o(!!s&&vw(s)),c(!!s&&xw(s,t))},d=setInterval(l,5e3);return l(),()=>clearInterval(d)},[t,s]),{isLive:e,isVod:a,isWatchableFromBeginning:i}},jw=M1(),Sw=({id:s,channelLogoImage:t,backgroundImage:e})=>({uuid:s,logo:t,channelLogoImage:t,backgroundImage:e}),Cw=(s,{id:t,title:e,cardImage:r,backgroundImage:a,description:o,endTime:i,startTime:c})=>({channelUuid:s,id:t,title:e,image:r||"",cardImage:r||"",backgroundImage:a||"",description:o||"",till:i,since:c}),Pw=({channels:s,sidebarWidth:t,itemHeight:e,highlightColor:r,backgroundColor:a})=>{const[o,i]=h.useMemo(()=>[s.map(Sw),s.flatMap(m=>m.programs.map(g=>Cw(m.id,g)))],[s]),c=h.useMemo(()=>kw(r,a),[r,a]),l=Ol().toJSON(),[d,u]=h.useMemo(()=>[Dl(new Date(l)),Fl()],[l]);return Ml({channels:o,epg:i,dayWidth:7200,sidebarWidth:t,itemHeight:e,isSidebar:!0,isTimeline:!0,isLine:!0,isBaseTimeFormat:jw,startDate:d,endDate:u,theme:c})},kw=(s,t)=>({primary:{600:t||"#141523",900:t||"#141523"},grey:{300:s||"#fff"},white:s||"#fff",green:{300:s||"#fff"},loader:{teal:"",purple:"",pink:"",bg:""},scrollbar:{border:"",thumb:{bg:""}},gradient:{blue:{300:"",600:"",900:""}},text:{grey:{300:"",500:""}},timeline:{divider:{bg:""}}}),Ew="_epgChannelBox_hazxl_1",Nw="_epgChannel_hazxl_1",Iw="_epgChannelLogo_hazxl_27",bn={epgChannelBox:Ew,epgChannel:Nw,epgChannelLogo:Iw},Aw=({channel:s,channelItemWidth:t,sidebarWidth:e,onClick:r,isActive:a,title:o})=>{const{position:i,uuid:c,channelLogoImage:l}=s,d={top:i.top,height:i.height,width:e};return n.jsx("div",{className:bn.epgChannelBox,style:d,children:n.jsx("div",{className:B(bn.epgChannel,{[bn.active]:a}),style:{width:t},onClick:()=>r&&r(s),"data-testid":void 0,role:"button",children:n.jsx(Ts,{className:bn.epgChannelLogo,image:l,alt:o,width:320})})})},Lw="_epgProgramBox_swcj7_1",Tw="_epgProgram_swcj7_1",$w="_disabled_swcj7_24",Ow="_live_swcj7_28",Dw="_selected_swcj7_31",Fw="_epgProgramTitle_swcj7_34",Mw="_epgProgramText_swcj7_37",Bw="_epgLiveTag_swcj7_50",Rw="_epgProgramContent_swcj7_77",Hw="_epgProgramImage_swcj7_119",et={epgProgramBox:Lw,epgProgram:Tw,disabled:$w,live:Ow,selected:Dw,epgProgramTitle:Fw,epgProgramText:Mw,epgLiveTag:Bw,epgProgramContent:Rw,epgProgramImage:Hw},Uw=({program:s,onClick:t,isActive:e,compact:r,disabled:a,isBaseTimeFormat:o})=>{const{styles:{position:i},formatTime:c,set12HoursTimeFormat:l,isLive:d,isMinWidth:u}=Bl({program:s,isBaseTimeFormat:o}),{t:m}=A("common"),{data:g}=s,{image:_,title:f,since:y,till:w}=g,x=c(y,l()).toLowerCase(),v=c(w,l()).toLowerCase(),b=!r&&u,S=!r&&u&&d,j="";return n.jsx("div",{className:et.epgProgramBox,style:i,onClick:()=>t&&t(s),children:n.jsxs("div",{className:B(et.epgProgram,{[et.selected]:e,[et.live]:d,[et.disabled]:a}),style:{width:et.width},"data-testid":(s.data.id,void 0),children:[b&&n.jsx("img",{className:et.epgProgramImage,src:_,alt:j}),S&&n.jsx("div",{className:et.epgLiveTag,children:m("live")}),n.jsxs("div",{className:et.epgProgramContent,children:[r&&d&&n.jsx("div",{className:et.epgLiveTag,children:m("live")}),n.jsx("h2",{className:et.epgProgramTitle,children:f}),n.jsxs("span",{className:et.epgProgramText,children:[x," - ",v]})]})]})})},Ww="_timelineBox_10xo1_1",Vw="_timelineTime_10xo1_5",qw="_timelineContainer_10xo1_16",zw="_timelineDividers_10xo1_23",Gw="_timelineDivider_10xo1_23",qs={timelineBox:Ww,timelineTime:Vw,timelineContainer:qw,timelineDividers:zw,timelineDivider:Gw},Jw=({isBaseTimeFormat:s,dayWidth:t,hourWidth:e,numberOfHoursInDay:r,offsetStartHoursRange:a,isSidebar:o,sidebarWidth:i})=>{const{time:c,dividers:l,formatTime:d}=Rl(r,s),u=()=>l.map((g,_)=>n.jsx("div",{className:qs.timelineDivider,style:{marginRight:e/4}},_)),m=g=>n.jsxs("div",{className:qs.timelineBox,style:{width:e},children:[n.jsx("time",{className:qs.timelineTime,children:d(g+a).toLowerCase()}),n.jsx("div",{className:qs.timelineDividers,children:u()})]},g);return n.jsx("div",{className:qs.timelineContainer,style:{width:t,left:o?i:0},children:c.map((g,_)=>m(_))})},Yw="_epg_19byb_1",Kw="_epgSpinner_19byb_35",Qw="_timelineControl_19byb_43",Zw="_timelineNowButton_19byb_57",Xw="_leftControl_19byb_68",eb="_rightControl_19byb_69",_s={epg:Yw,epgSpinner:Kw,timelineControl:Qw,timelineNowButton:Zw,leftControl:Xw,rightControl:eb};function tb({channels:s,selectedChannel:t,onChannelClick:e,onProgramClick:r,program:a,config:o}){const i=Le(),{t:c}=A("common"),l=i<ae.sm,d=l?70:184,u=l?d-10:d-24,m=l?80:106,{highlightColor:g,backgroundColor:_}=o.styling,{getEpgProps:f,getLayoutProps:y,onScrollToNow:w,onScrollLeft:x,onScrollRight:v}=Pw({channels:s,sidebarWidth:d,itemHeight:m,highlightColor:g,backgroundColor:_}),b=h.useMemo(()=>Object.fromEntries(s.map(j=>[j.id,j.catchupHours])),[s]),S=h.useMemo(()=>Object.fromEntries(s.map(j=>[j.id,j.title])),[s]);return n.jsxs("div",{className:_s.epg,children:[n.jsxs("div",{className:_s.timelineControl,children:[n.jsx(D,{className:_s.timelineNowButton,variant:"contained",label:c("now"),color:"primary",onClick:w,size:"small"}),n.jsx(We,{className:_s.leftControl,"aria-label":c("slide_left"),onClick:()=>x(),children:n.jsx(Y,{icon:Oc})}),n.jsx(We,{className:_s.rightControl,"aria-label":c("slide_right"),onClick:()=>v(),children:n.jsx(Y,{icon:oa})})]}),n.jsx(Hl,{...f(),loader:n.jsx(ss,{className:_s.epgSpinner}),children:n.jsx(Ul,{...y(),renderTimeline:j=>n.jsx(Jw,{...j}),renderChannel:({channel:j})=>n.jsx(Aw,{channel:j,channelItemWidth:u,sidebarWidth:d,onClick:C=>{e(C.uuid),w()},title:S[j.uuid]||"",isActive:(t==null?void 0:t.id)===j.uuid},j.uuid),renderProgram:({program:j,isBaseTimeFormat:C})=>{const I=b[j.data.channelUuid],P=Wl(new Date(j.data.since),Gi(new Date,I));return n.jsx(Uw,{program:j,disabled:P,onClick:k=>!P&&r(k.data.id,k.data.channelUuid),isActive:(a==null?void 0:a.id)===j.data.id,compact:l,isBaseTimeFormat:C},j.data.id)}})})]})}const sb="_epgContainer_1b7k0_1",nb="_catchupButton_1b7k0_21",rb="_tag_1b7k0_27",yr={epgContainer:sb,catchupButton:nb,tag:rb},ab=({data:{feedid:s,playlist:t}})=>{var R,X,ee;const{t:e}=A("epg"),{config:r}=K(({config:z})=>({config:z}),he),{siteName:a}=r,o=ue(),i=le(),c=h.useMemo(()=>new URLSearchParams(o.search),[o.search]),l=c.get("play")==="1",d=c.get("channel")??void 0,u=c.get("start"),m=c.get("end"),g=c.get("beginning")==="1",_=()=>s&&i(vs(s,d)),[f]=h.useState(d),{channels:y,channel:w,program:x,setActiveChannel:v}=ww({playlist:t,initialChannelId:f,enableAutoUpdate:!g}),{isLive:b,isVod:S,isWatchableFromBeginning:j}=bw({program:x,catchupHours:w==null?void 0:w.catchupHours}),C=h.useMemo(()=>t.find(({mediaid:z})=>(w==null?void 0:w.id)===z),[w==null?void 0:w.id,t]),{isEntitled:I}=$s(C),P=h.useMemo(()=>x?{title:x.title,description:x.description||"",image:x.backgroundImage,canWatch:b||S&&j,canWatchFromBeginning:I&&b&&j}:{title:(w==null?void 0:w.title)||"",description:(w==null?void 0:w.description)||"",image:w==null?void 0:w.backgroundImage,canWatch:!0,canWatchFromBeginning:!1},[w==null?void 0:w.backgroundImage,w==null?void 0:w.description,w==null?void 0:w.title,I,b,S,j,x]),k=h.useMemo(()=>{if(!w)return"";if(!x)return n.jsx($r,{isLive:!0,children:e("common:live")});const z=new Date(x.startTime),E=new Date(x.endTime),$=Vl(E,z),G=Yr($),te=[e("on_channel",{name:w.title}),G].filter(Boolean);return n.jsxs(n.Fragment,{children:[n.jsx($r,{className:yr.tag,isLive:b,children:b?e("common:live"):`${Pa(z,"p")} - ${Pa(E,"p")}`}),n.jsx(Ps,{attributes:te})]})},[w,b,x,e]),N=(z,E)=>{v(E,z),(document.scrollingElement||document.body).scroll({top:0,behavior:"smooth"})},T=z=>{v(z)};if(h.useEffect(()=>{w&&s&&d!==w.id&&i(vs(s,w.id),{replace:!0})},[i,s,w,d]),!w||!s)return n.jsx(ns,{});const O=`${window.location.origin}${vs(s,w.id)}`,H=`${w.title} - ${a}`,U=C?n.jsx(dn,{title:C.title,description:C.description,url:window.location.href}):null,L=C?n.jsxs(n.Fragment,{children:[n.jsx(cn,{item:C,playUrl:Ee(vs(s,d,!0),{start:S?x==null?void 0:x.startTime:void 0,end:S?x==null?void 0:x.endTime:void 0}),disabled:!P.canWatch}),P.canWatchFromBeginning&&n.jsx(D,{className:yr.catchupButton,onClick:()=>i(Ee(vs(s||"",d,!0),{start:x==null?void 0:x.startTime,beginning:1})),label:e("start_from_beginning"),startIcon:n.jsx(Y,{icon:Jc})})]}):null;return n.jsxs(n.Fragment,{children:[n.jsxs(_t,{children:[n.jsx("title",{children:H}),n.jsx("link",{rel:"canonical",href:O}),n.jsx("meta",{name:"description",content:C==null?void 0:C.description}),n.jsx("meta",{property:"og:description",content:C==null?void 0:C.description}),n.jsx("meta",{property:"og:title",content:H}),n.jsx("meta",{property:"og:type",content:"video.other"}),(C==null?void 0:C.image)&&n.jsx("meta",{property:"og:image",content:(R=C.image)==null?void 0:R.replace(/^https:/,"http:")}),(C==null?void 0:C.image)&&n.jsx("meta",{property:"og:image:secure_url",content:(X=C.image)==null?void 0:X.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:image:width",content:C!=null&&C.image?"720":""}),n.jsx("meta",{property:"og:image:height",content:C!=null&&C.image?"406":""}),n.jsx("meta",{name:"twitter:title",content:H}),n.jsx("meta",{name:"twitter:description",content:C==null?void 0:C.description}),n.jsx("meta",{name:"twitter:image",content:C==null?void 0:C.image}),n.jsx("meta",{property:"og:video",content:O.replace(/^https:/,"http:")}),n.jsx("meta",{property:"og:video:secure_url",content:O.replace(/^http:/,"https:")}),n.jsx("meta",{property:"og:video:type",content:"text/html"}),n.jsx("meta",{property:"og:video:width",content:"1280"}),n.jsx("meta",{property:"og:video:height",content:"720"}),(ee=C==null?void 0:C.tags)==null?void 0:ee.split(",").map(z=>n.jsx("meta",{property:"og:video:tag",content:z},z)),C?n.jsx("script",{type:"application/ld+json",children:ya(C,window.location.origin)}):null]}),n.jsxs(Vc,{title:P.title,description:P.description,image:P.image,startWatchingButton:L,shareButton:U,primaryMetadata:k,children:[C&&n.jsx(ln,{open:l&&I,onClose:_,item:C,title:P.title,primaryMetadata:k,feedId:s,liveStartDateTime:u,liveEndDateTime:m,liveFromBeginning:g}),n.jsx("div",{className:yr.epgContainer,children:n.jsx(tb,{channels:y,onChannelClick:T,onProgramClick:N,selectedChannel:w,program:x,config:r})})]})]})},xa=new Yc;xa.registerByContentType(ab,dt.live);xa.registerDefault(yw);const ob=()=>{const t=zt().id||"",{isLoading:e,isFetching:r,error:a,data:o}=on(t),{t:i}=A("error");if(e)return n.jsx(ns,{});if(a||!o)return n.jsx(Ze,{title:i("playlist_not_found")});if(o.playlist.length===0)return n.jsx(Ze,{title:i("empty_shelves_heading"),message:i("empty_shelves_description")});const c=xa.getScreen(o);return n.jsx(c,{data:o,isLoading:r})},ib="_header_j5wd7_1",cb="_fixed_j5wd7_7",lb="_container_j5wd7_17",db="_menu_j5wd7_24",ub="_iconButton_j5wd7_28",mb="_brand_j5wd7_36",hb="_nav_j5wd7_41",pb="_skipToContent_j5wd7_63",fb="_actions_j5wd7_97",gb="_search_j5wd7_108",_b="_brandCentered_j5wd7_112",yb="_navButton_j5wd7_116",vb="_searchActive_j5wd7_147",st={header:ib,fixed:cb,static:"_static_j5wd7_12",container:lb,menu:db,iconButton:ub,brand:mb,nav:hb,skipToContent:pb,actions:fb,search:gb,brandCentered:_b,navButton:yb,searchActive:vb},xb=({children:s,headerType:t="static",searchActive:e})=>{const r=B(st.header,st[t],{[st.searchActive]:e});return n.jsx("header",{className:r,children:n.jsx("div",{className:st.container,children:s})})},wb="_footer_ur4vs_1",bb="_list_ur4vs_16",jb="_testFixMargin_ur4vs_29",vr={footer:wb,list:bb,testFixMargin:jb},Sb=({text:s})=>{const t=s.split("|").map(a=>a.trim()),e=t.map((a,o)=>n.jsx(aa,{markdownString:a,inline:!0,tag:t.length>1?"li":"div"},o)),r=t.length>1?n.jsx("ul",{className:vr.list,children:e}):e;return n.jsx("footer",{className:B(vr.footer,{[vr.testFixMargin]:ad}),children:r})},Cb=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),h.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})),Pb=({sideBarOpen:s,onClick:t})=>{const{t:e}=A("menu");return n.jsx("div",{className:st.menu,children:n.jsx(We,{className:st.iconButton,"aria-label":e("open_menu"),"aria-expanded":s,onClick:t,children:n.jsx(Y,{icon:Cb})})})},kb=({navItems:s})=>n.jsx("nav",{className:st.nav,children:n.jsx("ul",{children:s.map((t,e)=>n.jsx("li",{children:n.jsx(D,{activeClassname:st.navButton,label:t.label,to:t.to,variant:"text"})},e))})}),Eb="_logo_82l2n_1",Nb={logo:Eb},Ib=({src:s,alt:t="logo",onLoad:e})=>{const[r,a]=h.useState({height:void 0,width:void 0}),o=i=>{const{height:c,width:l}=i.currentTarget;a({height:c,width:l}),e()};return n.jsx(tn,{to:"/",children:n.jsx("img",{className:Nb.logo,alt:t,src:s,height:r.height,width:r.width,onLoad:o,onError:e})})},Ab=({siteName:s,logoSrc:t,setLogoLoaded:e})=>{const{t:r}=A("menu");return t?n.jsx("div",{className:st.brand,children:n.jsx(Ib,{alt:r("logo_alt",{siteName:s}),src:t,onLoad:()=>e(!0)})}):null},Lb=({children:s})=>n.jsx("div",{className:st.actions,children:s}),Tb=()=>{const{t:s}=A("menu");return n.jsx("a",{href:"#content",className:st.skipToContent,children:s("skip_to_content")})},$b="_sidebar_1hxk3_1",Ob="_heading_1hxk3_19",Db="_group_1hxk3_24",xr={sidebar:$b,heading:Ob,group:Db},Fb=({children:s,...t})=>n.jsx(Zr,{direction:"left",...t,children:s}),Mb=({isOpen:s,onClose:t,children:e})=>{const{t:r}=A("menu");return n.jsx(Dn,{open:s,onClose:t,AnimationComponent:Fb,children:n.jsxs("div",{className:xr.sidebar,id:"sidebar",children:[n.jsx("div",{className:xr.heading,children:n.jsx(We,{onClick:t,"aria-label":r("close_menu"),children:n.jsx(Y,{icon:Fn})})}),n.jsx("nav",{className:xr.group,onClick:t,children:e})]})})},Bb="_menuButton_5vhgl_1",Rb="_small_5vhgl_24",Hb="_startIcon_5vhgl_28",Ub="_active_5vhgl_41",ys={menuButton:Bb,small:Rb,startIcon:Hb,active:Ub},ws=({label:s,to:t,onClick:e,onBlur:r,onFocus:a,tabIndex:o=0,active:i=!1,startIcon:c,small:l=!1,...d})=>{const u=c?n.jsx("div",{className:ys.startIcon,children:c}):null,m=g=>B(ys.menuButton,{[ys.small]:l},{[ys.active]:g});return t?n.jsxs(Wi,{onBlur:r,onFocus:a,onClick:e,className:({isActive:g})=>m(g||i),to:t,tabIndex:o,end:!0,children:[u,n.jsx("span",{className:ys.label,children:s})]}):n.jsxs("div",{role:"button",onBlur:r,onFocus:a,className:m(i),onClick:e,tabIndex:o,...d,children:[u,n.jsx("span",{className:ys.label,children:s})]})},Wb="_popover_kvdn6_1",Vb="_buttonContainer_kvdn6_5",qb="_menuItems_kvdn6_12",zb="_divider_kvdn6_23",Gb="_small_kvdn6_36",Jb="_sectionHeader_kvdn6_50",bs={popover:Wb,buttonContainer:Vb,menuItems:qb,divider:zb,small:Gb,sectionHeader:Jb},el=({showPaymentItems:s,small:t=!1,onButtonClick:e,favoritesEnabled:r,focusable:a,titleId:o})=>{const{t:i}=A("user"),c=le(),l=V(_e),d=a?0:-1,u=h.useCallback(async()=>{e&&e(),await l.logout(),c("/",{replace:!0})},[e,c,l]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:bs.sectionHeader,id:o,children:i("nav.settings")}),n.jsxs("ul",{className:bs.menuItems,children:[n.jsx("li",{children:n.jsx(ws,{small:t,onClick:e,to:fd,label:i("nav.account"),startIcon:n.jsx(Y,{icon:ua}),tabIndex:d})}),r&&n.jsx("li",{children:n.jsx(ws,{small:t,onClick:e,to:_d,label:i("nav.favorites"),startIcon:n.jsx(Y,{icon:ma}),tabIndex:d})}),s&&n.jsx("li",{children:n.jsx(ws,{small:t,onClick:e,to:yd,label:i("nav.payments"),startIcon:n.jsx(Y,{icon:Bc}),tabIndex:d})}),n.jsx("li",{className:B(bs.divider,{[bs.small]:t}),children:n.jsx(ws,{small:t,onClick:u,label:i("nav.logout"),startIcon:n.jsx(Y,{icon:Rc}),tabIndex:d})})]})]})},Yb="_buttonContainer_ak6a2_1",Kb="_separator_ak6a2_10",tl={buttonContainer:Yb,separator:Kb},Qb=({sideBarOpen:s,canLogin:t,isLoggedIn:e,favoritesEnabled:r,onLoginClick:a,onSignUpClick:o})=>{const{t:i}=A("menu"),c=rt("usermenu-title");return t?e?n.jsx("section",{"aria-labelledby":c,children:n.jsx(el,{focusable:s,favoritesEnabled:r,titleId:c,showPaymentItems:!0})}):n.jsxs("div",{className:tl.buttonContainer,children:[n.jsx(D,{tabIndex:s?0:-1,onClick:a,label:i("sign_in"),fullWidth:!0}),n.jsx(D,{tabIndex:s?0:-1,variant:"contained",color:"primary",onClick:o,label:i("sign_up"),fullWidth:!0})]}):null},Zb=()=>{const{t:s}=A("common"),t=le(),e=ue(),r=Re(_=>_.sideBarOpen),{config:{menu:a,features:o},accessModel:i}=K(_=>({config:_.config,accessModel:_.accessModel})),c=M(({user:_})=>!!_),l=!!(o!=null&&o.favoritesList),d=i!==Me.AVOD,u=()=>Re.setState({sideBarOpen:!1}),m=()=>{t(J(e,"login"))},g=()=>{t(J(e,"create-account"))};return n.jsxs(Mb,{isOpen:r,onClose:u,children:[n.jsxs("ul",{children:[n.jsx("li",{children:n.jsx(ws,{label:s("home"),to:"/"})}),a.map(_=>n.jsx("li",{children:n.jsx(ws,{label:_.label,to:ac(_.contentId)})},_.contentId))]}),n.jsx("hr",{className:tl.separator}),n.jsx(Qb,{sideBarOpen:r,favoritesEnabled:l,canLogin:d,isLoggedIn:c,onLoginClick:m,onSignUpClick:g})]})},Xb=()=>{const{t:s}=A("common"),{siteName:t,description:e}=K(({config:a})=>a,he),r=e||s("default_description");return n.jsxs(_t,{children:[n.jsx("title",{children:t}),n.jsx("meta",{name:"description",content:r}),n.jsx("meta",{property:"og:description",content:r}),n.jsx("meta",{property:"og:title",content:t}),n.jsx("meta",{name:"twitter:title",content:t}),n.jsx("meta",{name:"twitter:description",content:r})]})},sl=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),ej=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{d:"M9 1C4.58 1 1 4.58 1 9s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4 10.87L11.87 13 9 10.13 6.13 13 5 11.87 7.87 9 5 6.13 6.13 5 9 7.87 11.87 5 13 6.13 10.13 9 13 11.87z"})),tj="_searchBar_kqbxa_1",sj="_searchForm_kqbxa_5",nj="_icon_kqbxa_9",rj="_input_kqbxa_15",aj="_clearButton_kqbxa_40",zs={searchBar:tj,searchForm:sj,icon:nj,input:rj,clearButton:aj},oj=({query:s,onQueryChange:t,onClearButtonClick:e,onClose:r,inputRef:a})=>{const{t:o}=A("search"),i=c=>{var l;c.preventDefault(),a==null||a.current.focus(),(l=document.querySelector("#content"))==null||l.focus()};return n.jsxs("div",{className:zs.searchBar,children:[n.jsx(Y,{icon:sl,className:zs.icon}),n.jsxs("form",{className:zs.searchForm,role:"search",onSubmit:i,children:[n.jsx("label",{htmlFor:"searchbar-input",className:"hidden",children:o("search_bar.search_label")}),n.jsx("input",{className:zs.input,id:"searchbar-input",type:"search",value:s,onChange:t,onKeyDown:c=>c.key==="Escape"&&(r==null?void 0:r()),placeholder:o("search_bar.search_placeholder"),ref:a}),s?n.jsx(We,{className:zs.clearButton,"aria-label":o("search_bar.clear_search_label"),onClick:e,children:n.jsx(Y,{icon:ej})}):null]})]})},Nn=({children:s,className:t,...e})=>n.jsx(We,{className:B(st.iconButton,t),...e,children:s}),ij="_searchContainer_17e7m_1",cj={searchContainer:ij},lj=()=>{const s=ue(),t=h.useRef(null),e=K(({config:f})=>f),{features:r,custom:a}=e,{searchPlaylist:o}=r||{},i=Gt(a==null?void 0:a.appContentSearch),c=!!o||i,{searchQuery:l,searchActive:d}=Re(({searchQuery:f,searchActive:y,userMenuOpen:w,languageMenuOpen:x})=>({languageMenuOpen:x,searchQuery:f,searchActive:y,userMenuOpen:w}),he),{updateSearchQuery:u,resetSearchQuery:m}=Mc(),g=()=>{m(),Re.setState({searchActive:!1})},_=()=>{Re.setState({searchActive:!0,preSearchPage:`${s.pathname}${s.search||""}`})};return h.useEffect(()=>{d&&t.current&&t.current.focus()},[d]),c?d?n.jsxs("div",{className:cj.searchContainer,children:[n.jsx(oj,{query:l,onQueryChange:f=>u(f.target.value),onClearButtonClick:()=>u(""),inputRef:t,onClose:g}),n.jsx(Nn,{"aria-label":"Close search",onClick:g,children:n.jsx(Y,{icon:Fn})})]}):n.jsx(Nn,{"aria-label":"Open search",onClick:_,children:n.jsx(Y,{icon:sl})}):null},dj=s=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},h.createElement("path",{fill:"currentColor",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})),uj="_panel_jhs6c_1",mj={panel:uj},nl=({children:s,...t})=>n.jsx("div",{className:mj.panel,...t,children:s}),hj=({callback:s,children:t})=>{const e=h.useRef();return h.useEffect(()=>{const r=a=>{var o;!e.current||!(a.target instanceof Node)||e.current!==a.target&&!((o=e.current)!=null&&o.contains(a.target))&&s()};return setTimeout(()=>document.addEventListener("click",r),1),()=>document.removeEventListener("click",r)},[s]),Ne.cloneElement(t,{ref:r=>{e.current=r}})},pj="_popover_1efkk_1",fj={popover:pj},rl=({children:s,className:t,isOpen:e,onClose:r})=>n.jsx(Zr,{open:e,duration:250,direction:"right",style:{position:"relative"},children:n.jsx(hj,{callback:r,children:n.jsx("div",{className:B(fj.popover,t),children:s})})}),gj="_popover_1oh0j_1",_j="_menuItems_1oh0j_5",yj="_header_1oh0j_11",vj="_menuItem_1oh0j_5",xj="_menuItemActive_1oh0j_28",wr={popover:gj,menuItems:_j,header:yj,menuItem:vj,menuItemActive:xj},wj=({onClick:s,className:t,languages:e,currentLanguage:r,languageMenuOpen:a,closeLanguageMenu:o,openLanguageMenu:i})=>{const{t:c}=A("menu"),l=(u,m)=>{u.preventDefault(),s&&s(m),o()},d=()=>{a?o():i()};return n.jsxs("div",{children:[n.jsx(Nn,{"data-testid":void 0,"aria-controls":"language-panel","aria-expanded":a,"aria-haspopup":"menu",className:t,"aria-label":c("language_menu"),onClick:d,onBlur:o,children:n.jsx(Y,{icon:dj})}),n.jsx(rl,{isOpen:a,onClose:o,children:n.jsx(nl,{id:"language-panel",children:n.jsx("ul",{className:wr.menuItems,children:e.map(({code:u,displayName:m})=>{const g=(r==null?void 0:r.code)===u,_=B(wr.menuItem,{[wr.menuItemActive]:g});return n.jsx("li",{className:_,onClick:f=>l(f,u),children:n.jsx(Xs,{onFocus:i,onBlur:o,href:"#","aria-current":g,children:m})},u)})})})})]})},bj=()=>{const{i18n:s}=A("menu"),t=K(c=>c.supportedLanguages),e=Re(c=>c.languageMenuOpen),r=h.useCallback(()=>Re.setState({languageMenuOpen:!0}),[]),a=h.useCallback(()=>Re.setState({languageMenuOpen:!1}),[]),o=c=>{s.changeLanguage(c)},i=h.useMemo(()=>t.find(({code:c})=>c===s.language),[s.language,t]);return t.length<2?null:n.jsx(wj,{openLanguageMenu:r,closeLanguageMenu:a,languageMenuOpen:e,onClick:o,languages:t,currentLanguage:i})},jj="_profileIcon_1ej7j_1",Sj={profileIcon:jj},Cj=({src:s,alt:t})=>n.jsx("img",{className:Sj.profileIcon,src:s,alt:t}),Pj=({isLoggedIn:s,favoritesEnabled:t,open:e,onClose:r,onOpen:a,onLoginButtonClick:o,onSignUpButtonClick:i,profilesEnabled:c,profile:l})=>{const{t:d}=A("menu");return s?n.jsxs("div",{children:[n.jsx(Nn,{"aria-label":d("open_user_menu"),"aria-controls":"menu_panel","aria-expanded":e,"aria-haspopup":"menu",onClick:a,onBlur:r,children:c&&l?n.jsx(Cj,{src:l.avatar_url,alt:l.name||d("profile_icon")}):n.jsx(Y,{icon:ua})}),n.jsx(rl,{className:bs.popover,isOpen:e,onClose:r,children:n.jsx(nl,{id:"menu_panel",children:n.jsx("div",{onFocus:a,onBlur:r,children:n.jsx(el,{focusable:e,onButtonClick:r,showPaymentItems:!0,currentProfile:l,favoritesEnabled:t,small:!0})})})})]}):n.jsxs("div",{className:bs.buttonContainer,children:[n.jsx(D,{onClick:o,label:d("sign_in"),"aria-haspopup":"dialog"}),n.jsx(D,{variant:"contained",color:"primary",onClick:i,label:d("sign_up"),"aria-haspopup":"dialog"})]})},kj=()=>{const s=Le(),t=le(),e=ue(),r=Re(_=>_.userMenuOpen),{config:{features:a},accessModel:o}=K(_=>({config:_.config,accessModel:_.accessModel})),i=M(({user:_})=>!!_),c=!!(a!=null&&a.favoritesList),l=o!==Me.AVOD,d=h.useCallback(()=>Re.setState({userMenuOpen:!0}),[]),u=h.useCallback(()=>Re.setState({userMenuOpen:!1}),[]),m=()=>t(J(e,"login")),g=()=>t(J(e,"create-account"));return!l||s<=ae.sm?null:n.jsx(Pj,{open:r,onOpen:d,onClose:u,isLoggedIn:i,favoritesEnabled:c,onLoginButtonClick:m,onSignUpButtonClick:g,profilesEnabled:!1,profile:null,profiles:[],profileLoading:!1,onSelectProfile:()=>{}})},Ej="_layout_93hv3_1",Nj="_main_93hv3_6",Mi={layout:Ej,main:Nj},Ij=()=>{const{t:s}=A("common"),{config:t}=K(({config:f,accessModel:y,supportedLanguages:w})=>({config:f,accessModel:y,supportedLanguages:w}),he),{menu:e,assets:r,siteName:a,styling:o}=t,{footerText:i}=o||{},c=i||nd(ne.APP_FOOTER_TEXT),{sideBarOpen:l,searchActive:d}=Re(f=>({sideBarOpen:f.sideBarOpen,searchActive:f.searchActive})),u=r.banner,m=()=>Re.setState({sideBarOpen:!0}),g=[{label:s("home"),to:"/"},...e.map(f=>({label:f.label,to:ac(f.contentId)}))],_={inert:l?"":void 0};return n.jsxs("div",{className:Mi.layout,children:[n.jsx(Xb,{}),n.jsxs("div",{..._,children:[n.jsxs(xb,{searchActive:d,children:[n.jsx(Tb,{}),n.jsx(Pb,{sideBarOpen:l,onClick:m}),n.jsx(Ab,{siteName:a,logoSrc:u,setLogoLoaded:()=>{}}),n.jsx(kb,{navItems:g}),n.jsxs(Lb,{children:[n.jsx(lj,{}),n.jsx(bj,{}),n.jsx(kj,{})]})]}),n.jsx("main",{id:"content",className:Mi.main,tabIndex:-1,children:n.jsx(Ji,{})}),!!c&&n.jsx(Sb,{text:c})]}),n.jsx(Zb,{})]})};function Aj(){const s=le(),t=ue(),e=M(i=>{var c;return typeof((c=i.user)==null?void 0:c.uuid)=="string"?i.user.uuid:void 0}),r=V(_e),{hasNotifications:a}=(r==null?void 0:r.getFeatures())||{},o=xe((i,c)=>{s(J(t,i,c))});h.useEffect(()=>{!e||!a||r==null||r.subscribeToNotifications({uuid:e,onMessage:async i=>{var c,l;if(i){const d=JSON.parse(i);switch(d.type){case".failed":case"payment.card.failed":case"subscribe.failed":o("payment-error",(c=d.resource)==null?void 0:c.message);break;case"payment.card.success":await fc.invalidateQueries(["entitlements"]),o(null);break;case"subscribe.success":await r.reloadSubscriptions();break;case"access.revoked":await r.reloadSubscriptions();break;case"payment.card.requires.action":case"subscribe.requires.action":window.location.href=(l=d.resource)==null?void 0:l.redirect_to_url;break}}}})},[r,a,o,e])}const Lj=()=>{const{i18n:s}=A(),t=ue(),e=M(r=>({loading:r.loading,user:r.user}),he);return Aj(),h.useEffect(()=>{document.documentElement.setAttribute("lang",s.language)},[s.language]),e.user&&!e.loading&&window.location.href.includes("#token")?n.jsx(Vt,{to:{...t,hash:""},replace:!0}):n.jsx(Ji,{})};function Tj(){const{t:s}=A("error");return n.jsx(qi,{children:n.jsx(ze,{element:n.jsx(Lj,{}),children:n.jsxs(ze,{element:n.jsx(Ij,{}),errorElement:n.jsx(mg,{}),children:[n.jsx(ze,{index:!0,element:n.jsx(C_,{})}),n.jsx(ze,{path:Wr,element:n.jsx(ob,{})}),n.jsx(ze,{path:Xi,element:n.jsx(mw,{})}),n.jsx(ze,{path:dd,element:n.jsx(q1,{})}),n.jsx(ze,{path:ud,element:n.jsx(V_,{})}),n.jsx(ze,{path:hd,element:n.jsx(Tv,{})}),n.jsx(ze,{path:md,element:n.jsx(yg,{})}),n.jsx(ze,{path:"/*",element:n.jsx(Ze,{title:s("notfound_error_heading","Not found"),message:s("notfound_error_description","This page doesn't exist.")})})]})})})}const $j="_hero_4vsml_1",Oj="_heroPadding_4vsml_10",Dj="_info_4vsml_29",Fj="_title_4vsml_54",Mj="_description_4vsml_71",Bj="_poster_4vsml_78",Rj="_posterFade_4vsml_101",Ut={hero:$j,heroPadding:Oj,info:Dj,title:Fj,description:Mj,poster:Bj,posterFade:Rj},Hj=({title:s,description:t,image:e})=>{const a=Le()===ae.xs;return n.jsxs("div",{className:B(Ut.hero,Ut.heroPadding),children:[n.jsx(Ts,{className:Ut.poster,image:e,width:1280,alt:""}),n.jsx("div",{className:Ut.posterFade}),n.jsxs("div",{className:Ut.info,children:[n.jsx("h1",{className:Ut.title,children:s}),a?n.jsx(ga,{text:t,className:Ut.description}):n.jsx(fa,{text:t,maximumLines:8,className:Ut.description})]})]})},Uj=s=>(typeof s=="string"?s.replace(/\s+/g,"").split(","):[]).map(e=>({type:"playlist",contentId:e})),Wj=({data:s})=>{const t=h.useMemo(()=>Uj(s.playlists||s.playlist),[s.playlist,s.playlists]);return h.useEffect(()=>{var e;(document.scrollingElement||document.body).scroll({top:0}),(e=document.querySelector("#video-details button"))==null||e.focus()},[s]),n.jsxs("header",{children:[n.jsx(Hj,{image:s.backgroundImage,title:s.title,description:s.description}),n.jsx(Fc,{rows:t})]})};function Vj(){xt.registerByContentType(Wj,dt.hub)}function qj(s,t){const[e,r]=en();return h.useLayoutEffect(()=>{s&&(e.has(Gs)&&(!t||t===(s==null?void 0:s.defaultConfigSource))&&r(a=>(a.delete(Gs),a),{replace:!0}),t&&t!==(s==null?void 0:s.defaultConfigSource)&&e.get(Gs)!==t&&r(a=>(a.set(Gs,t),a),{replace:!0}))},[t,e,r,s]),t}const zj=Rr,Gj=({error:s})=>s instanceof js?n.jsx(Ze,{title:s.payload.title,message:s.payload.description,helpLink:s.payload.helpLink,error:s}):n.jsx(Ze,{error:s}),Jj=({query:s})=>{const{isLoading:t,error:e,data:r}=s;return t?n.jsx(ye,{}):n.jsxs(n.Fragment,{children:[e&&n.jsx(Gj,{error:e}),zj,Rr]})},Yj=({onReady:s})=>{var e,r;const t=og(window.location.href,s);return qj((e=t.data)==null?void 0:e.settings,(r=t.data)==null?void 0:r.configSource),n.jsx(Jj,{query:t})},Kj=()=>{const s=h.useRef(!1),[t,e]=h.useState(!1);h.useEffect(()=>{Vj()},[]);const r=h.useCallback(async a=>{a&&(ig(a),a.analyticsToken&&!s.current&&(await yc("/jwpltx.js"),s.current=!0),e(!0))},[]);return n.jsxs(n.Fragment,{children:[t&&n.jsx(Tj,{}),t&&n.jsx(sg,{}),n.jsx(Yj,{onReady:r})]})};function Qj(){const[s,t]=h.useState({isLoading:!0});return h.useEffect(()=>{Hu().then(()=>t({isLoading:!1})).catch(e=>t({isLoading:!1,error:e}))},[]),s.isLoading?n.jsx(ye,{}):s.error?n.jsx(gc,{title:"Unable to load translations",message:"Check your language settings and try again later. If the problem persists contact technical support.",error:s.error}):n.jsx(hu,{children:n.jsx(ql,{children:n.jsx(Fu,{children:n.jsx(Kj,{})})})})}const Zj=()=>{let s=!1;document.addEventListener("keydown",t=>{t.key==="Tab"&&!s&&(s=!0,document.body.classList.add("is-tabbing"))}),document.addEventListener("mousedown",()=>{s&&(s=!1,document.body.classList.remove("is-tabbing"))})};var Bi={APP_API_BASE_URL:"https://cdn.jwplayer.com",APP_PLAYER_ID:"M4qoGvUk",APP_VERSION:"4.30.0",APP_FOOTER_TEXT:"\\u00a9 JW Player | [jwplayer.com](https://www.jwplayer.com/) | v4.30.0",APP_DEFAULT_LANGUAGE:"en",APP_ENABLED_LANGUAGES:"en,es",BASE_URL:"/",MODE:"${MODE:=prod}",DEV:!1,PROD:!0,SSR:!1,APP_BODY_FONT:"",APP_BODY_ALT_FONT:""};Yl({APP_VERSION:"4.30.0",APP_API_BASE_URL:"https://cdn.jwplayer.com",APP_PLAYER_ID:"M4qoGvUk",APP_DEFAULT_CONFIG_SOURCE:Bi.APP_DEFAULT_CONFIG_SOURCE,APP_PLAYER_LICENSE_KEY:Bi.APP_PLAYER_LICENSE_KEY,APP_FOOTER_TEXT:"\\u00a9 JW Player | [jwplayer.com](https://www.jwplayer.com/) | v4.30.0",APP_BODY_FONT:"",APP_BODY_ALT_FONT:""});Zj();const Ri=document.getElementById("root");Ri?ml(Ri).render(n.jsx(Qj,{})):console.info("Application - rootElement not found");const Xj=Jl({immediate:!0,onNeedRefresh:()=>Xj(!0)});export{Yi as _,TS as a,oS as c,iS as g};
//# sourceMappingURL=index-knuSdpEX.js.map
